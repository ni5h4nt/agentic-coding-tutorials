<!DOCTYPE html>
<html lang="en" x-data="tutorialApp()" x-init="init()" :class="{ 'dark': darkMode }">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CLI Generator Tutorial - Complete Claude Code Mastery</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#6366f1',
                        secondary: '#8b5cf6',
                    }
                }
            }
        }
    </script>

    <!-- Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <!-- Prism.js for code highlighting -->
    <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-toml.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-markdown.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-yaml.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-json.min.js"></script>

    <!-- Mermaid.js for diagrams -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>

    <style>
        [x-cloak] { display: none !important; }
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #6366f1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #4f46e5; }
        html { scroll-behavior: smooth; }
        pre[class*="language-"] { margin: 1rem 0; border-radius: 0.5rem; position: relative; }
        .copy-button { position: absolute; top: 0.5rem; right: 0.5rem; padding: 0.25rem 0.5rem; background: rgba(99, 102, 241, 0.8); color: white; border: none; border-radius: 0.25rem; cursor: pointer; font-size: 0.75rem; opacity: 0; transition: opacity 0.2s; }
        pre:hover .copy-button { opacity: 1; }
        .copy-button:hover { background: rgba(99, 102, 241, 1); }
        .copy-button.copied { background: #10b981; }
        /* Mermaid Diagram Styling */
        .mermaid-container {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border: 1px solid #e2e8f0;
            border-radius: 1rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            overflow-x: auto;
        }
        .dark .mermaid-container {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-color: #334155;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
        }
        .mermaid-container-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #64748b;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid #e2e8f0;
        }
        .dark .mermaid-container-title {
            color: #94a3b8;
            border-color: #334155;
        }
        .mermaid-container-title svg {
            width: 1rem;
            height: 1rem;
        }
        .mermaid {
            background: transparent;
            display: flex;
            justify-content: center;
            padding: 0.5rem;
        }
        .dark .mermaid {
            filter: invert(0.92) hue-rotate(180deg);
        }
        .mermaid svg {
            max-width: 100%;
            height: auto !important;
        }
        /* Make flowchart nodes prettier */
        .mermaid .node rect,
        .mermaid .node circle,
        .mermaid .node ellipse,
        .mermaid .node polygon,
        .mermaid .node path {
            stroke-width: 2px !important;
        }
        .mermaid .edgePath path {
            stroke-width: 2px !important;
        }

        /* Mermaid Walkthrough Animation Styles */
        .mermaid-walkthrough {
            position: relative;
        }
        .mermaid-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            padding: 0.5rem 0.75rem;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 0.5rem;
            border: 1px solid #e2e8f0;
        }
        .dark .mermaid-controls {
            background: rgba(30, 41, 59, 0.7);
            border-color: #475569;
        }
        .mermaid-controls button {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 2rem;
            height: 2rem;
            border-radius: 0.375rem;
            border: 1px solid #e2e8f0;
            background: white;
            color: #64748b;
            cursor: pointer;
            transition: all 0.15s ease;
        }
        .dark .mermaid-controls button {
            background: #334155;
            border-color: #475569;
            color: #94a3b8;
        }
        .mermaid-controls button:hover {
            background: #f1f5f9;
            color: #6366f1;
            border-color: #6366f1;
        }
        .dark .mermaid-controls button:hover {
            background: #475569;
            color: #818cf8;
            border-color: #818cf8;
        }
        .mermaid-controls button.active {
            background: #6366f1;
            color: white;
            border-color: #6366f1;
        }
        .mermaid-controls button svg {
            width: 1rem;
            height: 1rem;
        }
        .mermaid-controls button svg.hidden {
            display: none;
        }
        .mermaid-step-indicator {
            font-size: 0.75rem;
            color: #64748b;
            margin-left: 0.5rem;
            font-weight: 500;
        }
        .dark .mermaid-step-indicator {
            color: #94a3b8;
        }
        .mermaid-step-description {
            flex: 1;
            font-size: 0.8125rem;
            color: #475569;
            margin-left: 0.75rem;
            padding-left: 0.75rem;
            border-left: 2px solid #e2e8f0;
            min-height: 1.25rem;
        }
        .dark .mermaid-step-description {
            color: #94a3b8;
            border-color: #475569;
        }
        .mermaid-kbd-hint {
            font-size: 0.625rem;
            color: #94a3b8;
            margin-left: auto;
            display: flex;
            gap: 0.25rem;
        }
        .dark .mermaid-kbd-hint {
            color: #64748b;
        }
        .mermaid-kbd-hint kbd {
            padding: 0.125rem 0.375rem;
            background: #f1f5f9;
            border: 1px solid #e2e8f0;
            border-radius: 0.25rem;
            font-family: inherit;
            font-size: 0.625rem;
        }
        .dark .mermaid-kbd-hint kbd {
            background: #1e293b;
            border-color: #475569;
        }

        /* Node animation states */
        .mermaid.walkthrough-active .node,
        .mermaid.walkthrough-active .edgePath,
        .mermaid.walkthrough-active .edgePaths > g,
        .mermaid.walkthrough-active [class*="edge"] {
            opacity: 0.25;
            transition: opacity 0.3s ease;
        }
        .mermaid.walkthrough-active .node.highlighted,
        .mermaid.walkthrough-active g.highlighted {
            opacity: 1 !important;
        }
        .mermaid.walkthrough-active .edgePath.highlighted path,
        .mermaid.walkthrough-active .highlighted path,
        .mermaid.walkthrough-active path.highlighted {
            opacity: 1 !important;
            stroke-width: 3px !important;
        }
        /* Use filter for glow effect instead of transform (avoids SVG position issues) */
        .mermaid.walkthrough-active .node.highlighted rect,
        .mermaid.walkthrough-active .node.highlighted polygon,
        .mermaid.walkthrough-active .node.highlighted circle,
        .mermaid.walkthrough-active .node.highlighted path,
        .mermaid.walkthrough-active .highlighted rect,
        .mermaid.walkthrough-active .highlighted polygon {
            filter: drop-shadow(0 0 6px rgba(99, 102, 241, 0.6)) drop-shadow(0 0 12px rgba(99, 102, 241, 0.3));
        }

        /* Edge flow animation - flowing dashes traveling towards arrows */
        @keyframes edgeFlow {
            0% { stroke-dashoffset: 30; }
            100% { stroke-dashoffset: 0; }
        }

        /* Dim non-highlighted edges but keep markers visible */
        .mermaid.walkthrough-active .edgePaths path.flowchart-link {
            opacity: 0.15;
            transition: opacity 0.3s ease;
        }

        /* Keep arrowhead markers always visible */
        .mermaid.walkthrough-active marker,
        .mermaid.walkthrough-active marker path,
        .mermaid.walkthrough-active defs path,
        .mermaid.walkthrough-active path.arrowMarkerPath {
            opacity: 1 !important;
        }

        /* Highlighted edge animation - use high specificity to override Mermaid */
        .mermaid.walkthrough-active path.flowchart-link.highlighted,
        .mermaid.walkthrough-active .edgePaths path.highlighted,
        .mermaid.walkthrough-active path.edge-thickness-normal.highlighted,
        .mermaid.walkthrough-active path.highlighted.flowchart-link {
            opacity: 1 !important;
            stroke: #6366f1 !important;
            stroke-width: 3px !important;
            stroke-dasharray: 6, 10 !important;
            stroke-dashoffset: 0;
            stroke-linecap: round !important;
            animation: edgeFlow 0.5s linear infinite !important;
            filter: drop-shadow(0 0 4px rgba(99, 102, 241, 0.7));
        }

        /* Hover exploration mode */
        .mermaid.hover-mode .node {
            cursor: pointer;
            transition: opacity 0.2s ease;
        }
        .mermaid.hover-mode.hovering .node:not(.hover-connected) {
            opacity: 0.25;
        }
        .mermaid.hover-mode.hovering .edgePath:not(.hover-connected) {
            opacity: 0.15;
        }
        .mermaid.hover-mode .node.hover-connected {
            opacity: 1;
        }
        .mermaid.hover-mode .edgePath.hover-connected path {
            stroke-width: 3px !important;
            opacity: 1;
        }

        /* Reduced motion preference */
        @media (prefers-reduced-motion: reduce) {
            .mermaid.walkthrough-active .edgePath.highlighted path {
                animation: none;
            }
            .mermaid.walkthrough-active .node,
            .mermaid.walkthrough-active .edgePath {
                transition: opacity 0.1s ease;
            }
        }

        .progress-bar { transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }
        .bookmark-pulse { animation: pulse 0.3s ease-in-out; }
        @keyframes highlight { 0% { background-color: rgba(99, 102, 241, 0.3); } 100% { background-color: transparent; } }
        .section-highlight { animation: highlight 2s ease-out; }

        /* Before/After comparison boxes */
        .comparison-box pre {
            overflow-x: auto;
            max-width: 100%;
            white-space: pre;
            margin: 0;
            padding: 0.5rem;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 0.375rem;
        }
        .dark .comparison-box pre {
            background: rgba(0, 0, 0, 0.2);
        }
        .comparison-box pre code {
            display: block;
            overflow-wrap: normal;
            word-break: normal;
        }

        /* Subsection headers with bookmark */
        .subsection-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            scroll-margin-top: 5rem;
        }
        .subsection-header h3 {
            margin: 0;
        }
        .subsection-bookmark {
            opacity: 0;
            transition: opacity 0.2s, transform 0.2s;
            padding: 0.25rem;
            color: #9ca3af;
            flex-shrink: 0;
        }
        .subsection-header:hover .subsection-bookmark,
        .subsection-bookmark.bookmarked {
            opacity: 1;
        }
        .subsection-bookmark:hover {
            color: #6366f1;
            transform: scale(1.1);
        }
        .subsection-bookmark.bookmarked {
            color: #6366f1;
        }
        .subsection-bookmark svg {
            width: 1.25rem;
            height: 1.25rem;
        }
        .dark .subsection-bookmark {
            color: #6b7280;
        }
        .dark .subsection-bookmark:hover {
            color: #818cf8;
        }
        .dark .subsection-bookmark.bookmarked {
            color: #818cf8;
        }
        table { width: 100%; border-collapse: collapse; margin: 1rem 0; }
        th, td { padding: 0.75rem; text-align: left; border-bottom: 1px solid #e5e7eb; }
        .dark th, .dark td { border-color: #374151; }
        th { font-weight: 600; background: #f9fafb; }
        .dark th { background: #1f2937; }
        .checklist-item { display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 0; }
        .checklist-item input[type="checkbox"] { width: 1.25rem; height: 1.25rem; accent-color: #6366f1; }
        .nav-item.active { background: linear-gradient(90deg, rgba(99, 102, 241, 0.1) 0%, transparent 100%); border-left: 3px solid #6366f1; }
        .callout { padding: 1rem; border-radius: 0.5rem; margin: 1rem 0; }
        .callout-info { background: #dbeafe; border-left: 4px solid #3b82f6; }
        .callout-warning { background: #fef3c7; border-left: 4px solid #f59e0b; }
        .callout-success { background: #d1fae5; border-left: 4px solid #10b981; }
        .callout-danger { background: #fee2e2; border-left: 4px solid #ef4444; }
        .dark .callout-info { background: rgba(59, 130, 246, 0.2); }
        .dark .callout-warning { background: rgba(245, 158, 11, 0.2); }
        .dark .callout-success { background: rgba(16, 185, 129, 0.2); }
        .dark .callout-danger { background: rgba(239, 68, 68, 0.2); }

        /* Animated Roadmap Styles */
        .roadmap { position: relative; padding: 2rem 0; }
        .roadmap-track {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #e5e7eb 0%, #e5e7eb 100%);
            transform: translateY(-50%);
            border-radius: 2px;
            z-index: 0;
        }
        .dark .roadmap-track { background: #374151; }
        .roadmap-progress {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: linear-gradient(90deg, #6366f1, #8b5cf6, #10b981);
            border-radius: 2px;
            transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .roadmap-weeks {
            position: relative;
            display: flex;
            justify-content: space-between;
            z-index: 1;
        }
        .roadmap-week {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
        }
        .week-badge {
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.875rem;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 2;
        }
        .week-badge.pending {
            background: #f3f4f6;
            color: #9ca3af;
            border: 3px solid #e5e7eb;
        }
        .dark .week-badge.pending {
            background: #1f2937;
            color: #6b7280;
            border-color: #374151;
        }
        .week-badge.active {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            border: 3px solid #6366f1;
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.5);
            animation: pulse-glow 2s infinite;
        }
        .week-badge.completed {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: 3px solid #10b981;
        }
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(99, 102, 241, 0.5); }
            50% { box-shadow: 0 0 30px rgba(99, 102, 241, 0.8); }
        }
        .week-label {
            margin-top: 0.75rem;
            font-size: 0.75rem;
            font-weight: 600;
            text-align: center;
            opacity: 0.8;
        }
        .week-title {
            font-size: 0.625rem;
            color: #6b7280;
            text-align: center;
        }
        .dark .week-title { color: #9ca3af; }

        /* Day Progress Node */
        .day-node {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        .day-node:hover { transform: translateY(-4px); }
        .day-circle {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.75rem;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }
        .day-circle.pending {
            background: #f9fafb;
            color: #9ca3af;
            border: 2px solid #e5e7eb;
        }
        .dark .day-circle.pending {
            background: #1f2937;
            color: #6b7280;
            border-color: #374151;
        }
        .day-circle.current {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            border: 2px solid transparent;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4);
            animation: bounce-soft 2s infinite;
        }
        .day-circle.completed {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: 2px solid transparent;
        }
        .day-circle.completed::after {
            content: '✓';
            position: absolute;
            font-size: 0.875rem;
        }
        .day-circle.completed span { opacity: 0; }
        @keyframes bounce-soft {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }
        .day-label {
            margin-top: 0.5rem;
            font-size: 0.625rem;
            text-align: center;
            max-width: 4rem;
            line-height: 1.2;
        }

        /* Progress Ring */
        .progress-ring {
            transform: rotate(-90deg);
        }
        .progress-ring-circle {
            transition: stroke-dashoffset 1s cubic-bezier(0.4, 0, 0.2, 1);
            stroke-linecap: round;
        }

        /* Animated connector lines */
        .connector-line {
            height: 3px;
            background: linear-gradient(90deg, transparent, #e5e7eb, transparent);
            flex: 1;
            margin: 0 0.25rem;
            position: relative;
            overflow: hidden;
        }
        .dark .connector-line { background: linear-gradient(90deg, transparent, #374151, transparent); }
        .connector-line.active::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, #6366f1, transparent);
            animation: flow 2s infinite;
        }
        @keyframes flow {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* Mini progress for day section headers */
        .mini-progress {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }
        .mini-dot {
            width: 0.5rem;
            height: 0.5rem;
            border-radius: 50%;
            background: #e5e7eb;
            transition: all 0.3s ease;
        }
        .dark .mini-dot { background: #374151; }
        .mini-dot.completed { background: #10b981; }
        .mini-dot.current {
            background: #6366f1;
            animation: pulse 1.5s infinite;
        }

        /* Floating particles background */
        .particles {
            position: absolute;
            inset: 0;
            overflow: hidden;
            pointer-events: none;
        }
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(99, 102, 241, 0.3);
            border-radius: 50%;
            animation: float-up 8s infinite;
        }
        @keyframes float-up {
            0% { transform: translateY(100%) scale(0); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100vh) scale(1); opacity: 0; }
        }

        /* Completion celebration animation */
        @keyframes celebrate {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); opacity: 1; }
        }
        @keyframes confetti-fall {
            0% { transform: translateY(-100%) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 100;
            overflow: hidden;
        }
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            animation: confetti-fall 3s ease-out forwards;
        }

        /* Celebration Overlay */
        .celebration-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            z-index: 200;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fade-in 0.3s ease-out;
        }
        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .celebration-modal {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 1.5rem;
            padding: 2.5rem;
            text-align: center;
            max-width: 400px;
            margin: 1rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            animation: modal-pop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
        }
        .dark .celebration-modal {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
        }
        @keyframes modal-pop {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        .celebration-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 1.5rem;
            background: linear-gradient(135deg, #10b981, #059669);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: icon-bounce 0.6s ease-out 0.3s both;
        }
        @keyframes icon-bounce {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        .celebration-icon svg {
            width: 40px;
            height: 40px;
            color: white;
        }
        .celebration-title {
            font-size: 1.75rem;
            font-weight: 700;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }
        .celebration-day {
            font-size: 1.125rem;
            color: #374151;
            margin-bottom: 1rem;
        }
        .dark .celebration-day {
            color: #d1d5db;
        }
        .celebration-progress {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            padding: 1rem;
            background: #f1f5f9;
            border-radius: 1rem;
            margin-bottom: 1.5rem;
        }
        .dark .celebration-progress {
            background: #1e293b;
        }
        .celebration-progress-ring {
            width: 50px;
            height: 50px;
            position: relative;
        }
        .celebration-progress-ring svg {
            transform: rotate(-90deg);
        }
        .celebration-progress-ring circle {
            fill: none;
            stroke-width: 4;
        }
        .celebration-progress-ring .bg {
            stroke: #e2e8f0;
        }
        .dark .celebration-progress-ring .bg {
            stroke: #334155;
        }
        .celebration-progress-ring .progress {
            stroke: url(#progress-gradient);
            stroke-linecap: round;
            transition: stroke-dashoffset 1s ease-out;
        }
        .celebration-progress-text {
            text-align: left;
        }
        .celebration-progress-count {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1e293b;
        }
        .dark .celebration-progress-count {
            color: #f1f5f9;
        }
        .celebration-progress-label {
            font-size: 0.875rem;
            color: #64748b;
        }
        .celebration-btn {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 0.75rem;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .celebration-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px -10px rgba(99, 102, 241, 0.5);
        }
        .celebration-sparkles {
            position: absolute;
            inset: 0;
            pointer-events: none;
            overflow: hidden;
        }
        .celebration-sparkle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #fbbf24;
            border-radius: 50%;
            animation: sparkle 1.5s ease-in-out infinite;
        }
        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
        }

        /* Day circle highlight animation */
        .day-circle.just-completed {
            animation: circle-celebrate 1s ease-out;
        }
        @keyframes circle-celebrate {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); }
            50% { transform: scale(1.3); box-shadow: 0 0 0 15px rgba(16, 185, 129, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
        }

        /* Enhanced completion badge */
        .completion-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-weight: 600;
            font-size: 0.875rem;
            transition: all 0.3s ease;
        }
        .completion-badge.completed {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            animation: celebrate 0.5s ease-out;
        }
        .completion-badge.in-progress {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
        }
        .completion-badge.pending {
            background: #f3f4f6;
            color: #6b7280;
        }
        .dark .completion-badge.pending {
            background: #374151;
            color: #9ca3af;
        }
        .completion-badge svg {
            width: 1rem;
            height: 1rem;
        }

        /* Section header enhancements */
        .section-header {
            position: relative;
            padding-bottom: 1.5rem;
            margin-bottom: 2rem;
            border-bottom: 1px solid #e5e7eb;
        }
        .dark .section-header {
            border-bottom-color: #374151;
        }
        .section-header::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 4rem;
            height: 3px;
            background: linear-gradient(90deg, #6366f1, #8b5cf6);
            border-radius: 2px;
            transition: width 0.3s ease;
        }
        .section-header.completed::after {
            background: linear-gradient(90deg, #10b981, #059669);
            width: 100%;
        }

        /* Day section styling */
        .day-section {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
            border: 1px solid #e5e7eb;
            position: relative;
        }
        .dark .day-section {
            background: #1f2937;
            border-color: #374151;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }
        /* Left border accent for day sections */
        .day-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            width: 4px;
            border-radius: 1rem 0 0 1rem;
        }
        .day-section.week-1::before {
            background: linear-gradient(180deg, #3b82f6, #6366f1);
        }
        .day-section.week-2::before {
            background: linear-gradient(180deg, #8b5cf6, #a855f7);
        }
        .day-section.week-3::before {
            background: linear-gradient(180deg, #10b981, #059669);
        }
        .day-section.reference::before {
            background: linear-gradient(180deg, #6b7280, #374151);
        }

        /* Week separator banner */
        .week-banner {
            position: relative;
            padding: 2rem 0;
            margin: 3rem 0;
            text-align: center;
        }
        .week-banner::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, #e5e7eb 20%, #e5e7eb 80%, transparent);
        }
        .dark .week-banner::before {
            background: linear-gradient(90deg, transparent, #374151 20%, #374151 80%, transparent);
        }
        .week-banner-content {
            position: relative;
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            padding: 1rem 2rem;
            background: white;
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
        }
        .dark .week-banner-content {
            background: #1f2937;
            border-color: #374151;
        }
        .week-banner-icon {
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.5rem;
        }
        .week-banner.week-1 .week-banner-icon {
            background: linear-gradient(135deg, #3b82f6, #6366f1);
        }
        .week-banner.week-2 .week-banner-icon {
            background: linear-gradient(135deg, #8b5cf6, #a855f7);
        }
        .week-banner.week-3 .week-banner-icon {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        .week-banner-title {
            font-size: 1.5rem;
            font-weight: 700;
        }
        .week-banner.week-1 .week-banner-title {
            background: linear-gradient(135deg, #3b82f6, #6366f1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .week-banner.week-2 .week-banner-title {
            background: linear-gradient(135deg, #8b5cf6, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .week-banner.week-3 .week-banner-title {
            background: linear-gradient(135deg, #10b981, #059669);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .week-banner.reference .week-banner-icon {
            background: linear-gradient(135deg, #6b7280, #374151);
        }
        .week-banner.reference .week-banner-title {
            background: linear-gradient(135deg, #6b7280, #374151);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .week-banner-subtitle {
            font-size: 0.875rem;
            color: #6b7280;
        }
        .dark .week-banner-subtitle {
            color: #9ca3af;
        }
        .week-banner-days {
            font-size: 0.75rem;
            color: #9ca3af;
            margin-top: 0.25rem;
        }

        /* Day divider between days within same week */
        .day-divider {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: 2rem 0;
            color: #9ca3af;
        }
        .day-divider::before,
        .day-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: linear-gradient(90deg, transparent, #e5e7eb, transparent);
        }
        .dark .day-divider::before,
        .dark .day-divider::after {
            background: linear-gradient(90deg, transparent, #374151, transparent);
        }
        .day-divider-dot {
            width: 0.5rem;
            height: 0.5rem;
            border-radius: 50%;
            background: #d1d5db;
        }
        .dark .day-divider-dot {
            background: #4b5563;
        }

        /* Day card styling (legacy, keep for compatibility) */
        .day-card {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .dark .day-card {
            background: #1f2937;
        }
        .day-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #6366f1, #8b5cf6, #10b981);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.5s ease;
        }
        .day-card.completed::before {
            transform: scaleX(1);
        }
        .day-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.15);
        }

        /* Smooth number counter animation */
        @keyframes count-up {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .stat-number {
            animation: count-up 0.5s ease-out;
            font-variant-numeric: tabular-nums;
        }

        /* Enhanced sidebar navigation */
        .nav-day {
            position: relative;
            padding-left: 2rem;
            transition: all 0.2s ease;
        }
        .nav-day::before {
            content: '';
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            width: 0.5rem;
            height: 0.5rem;
            border-radius: 50%;
            background: #e5e7eb;
            transition: all 0.3s ease;
        }
        .dark .nav-day::before {
            background: #374151;
        }
        .nav-day.completed::before {
            background: #10b981;
            box-shadow: 0 0 8px rgba(16, 185, 129, 0.5);
        }
        .nav-day.current::before {
            background: #6366f1;
            box-shadow: 0 0 8px rgba(99, 102, 241, 0.5);
            animation: pulse 2s infinite;
        }
        .nav-day:hover {
            background: rgba(99, 102, 241, 0.1);
            border-radius: 0.5rem;
        }

        /* Stats card with hover effect */
        .stats-card {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
            border-radius: 1rem;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid rgba(99, 102, 241, 0.2);
        }
        .stats-card:hover {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.15));
            transform: scale(1.02);
            border-color: rgba(99, 102, 241, 0.4);
        }
        .stats-card .stat-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Streak flame animation */
        @keyframes flame {
            0%, 100% { transform: scaleY(1) scaleX(1); }
            25% { transform: scaleY(1.1) scaleX(0.95); }
            50% { transform: scaleY(1.2) scaleX(0.9); }
            75% { transform: scaleY(1.05) scaleX(0.97); }
        }
        .streak-flame {
            animation: flame 0.5s ease-in-out infinite;
            display: inline-block;
        }

        /* Fixed Right Progress Indicator */
        .progress-sidebar {
            position: fixed;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            z-index: 40;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.125rem;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(8px);
            border-radius: 1rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            min-width: 2.5rem;
        }
        .dark .progress-sidebar {
            background: rgba(31, 41, 55, 0.95);
            border-color: rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        /* Progress item (dot + number) */
        .progress-item {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            background: #f3f4f6;
            font-size: 0.625rem;
            font-weight: 600;
            color: #9ca3af;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }
        .dark .progress-item {
            background: #374151;
            color: #6b7280;
        }
        .progress-item:hover {
            transform: scale(1.15);
            background: #e5e7eb;
        }
        .dark .progress-item:hover {
            background: #4b5563;
        }
        .progress-item.completed {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border-color: #059669;
        }
        .progress-item.completed .item-number {
            display: none;
        }
        .progress-item.completed::after {
            content: '✓';
            font-size: 0.75rem;
            font-weight: bold;
        }
        .progress-item.current {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3);
            animation: progress-pulse 2s infinite;
        }
        @keyframes progress-pulse {
            0%, 100% {
                box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3);
            }
            50% {
                box-shadow: 0 0 0 5px rgba(99, 102, 241, 0.15);
            }
        }

        /* Current section expanded label */
        .progress-current-label {
            position: absolute;
            right: calc(100% + 0.5rem);
            top: 50%;
            transform: translateY(-50%);
            padding: 0.375rem 0.625rem;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            font-size: 0.625rem;
            font-weight: 600;
            white-space: nowrap;
            border-radius: 0.375rem;
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3);
            opacity: 1;
            transition: all 0.3s ease;
        }
        .progress-current-label::after {
            content: '';
            position: absolute;
            left: 100%;
            top: 50%;
            transform: translateY(-50%);
            border: 4px solid transparent;
            border-left-color: #8b5cf6;
        }

        /* Tooltip for non-current items */
        .progress-item .tooltip {
            position: absolute;
            right: calc(100% + 0.5rem);
            top: 50%;
            transform: translateY(-50%);
            padding: 0.375rem 0.625rem;
            background: #1f2937;
            color: white;
            font-size: 0.625rem;
            font-weight: 500;
            white-space: nowrap;
            border-radius: 0.375rem;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
            pointer-events: none;
        }
        .dark .progress-item .tooltip {
            background: white;
            color: #1f2937;
        }
        .progress-item .tooltip::after {
            content: '';
            position: absolute;
            left: 100%;
            top: 50%;
            transform: translateY(-50%);
            border: 4px solid transparent;
            border-left-color: #1f2937;
        }
        .dark .progress-item .tooltip::after {
            border-left-color: white;
        }
        .progress-item:hover .tooltip {
            opacity: 1;
            visibility: visible;
        }
        .progress-item.current .tooltip {
            display: none;
        }

        /* Week divider with label */
        .progress-week-divider {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            margin: 0.375rem 0;
            width: 100%;
        }
        .progress-week-divider::before,
        .progress-week-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: #e5e7eb;
        }
        .dark .progress-week-divider::before,
        .dark .progress-week-divider::after {
            background: #4b5563;
        }
        .progress-week-divider span {
            font-size: 0.5rem;
            font-weight: 700;
            color: #9ca3af;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Progress summary at bottom */
        .progress-summary {
            margin-top: 0.5rem;
            padding-top: 0.5rem;
            border-top: 1px solid #e5e7eb;
            text-align: center;
            width: 100%;
        }
        .dark .progress-summary {
            border-top-color: #4b5563;
        }
        .progress-summary-count {
            font-size: 0.75rem;
            font-weight: 700;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .progress-summary-label {
            font-size: 0.5rem;
            color: #9ca3af;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Hide on mobile, show on larger screens */
        @media (max-width: 1024px) {
            .progress-sidebar {
                display: none;
            }
        }
        @media (max-width: 1280px) {
            .progress-current-label {
                display: none;
            }
        }

        /* Sticky Notes Styles */
        .note-button {
            opacity: 0;
            transition: opacity 0.2s, transform 0.2s;
            padding: 0.25rem;
            color: #9ca3af;
            flex-shrink: 0;
            cursor: pointer;
            background: none;
            border: none;
        }
        .subsection-header:hover .note-button,
        .note-button.has-note {
            opacity: 1;
        }
        /* Always show note button on h2 headers */
        h2 > .note-button {
            opacity: 0.5;
        }
        h2:hover > .note-button,
        h2 > .note-button.has-note {
            opacity: 1;
        }
        .note-button:hover {
            color: #f59e0b;
            transform: scale(1.1);
        }
        .note-button.has-note {
            color: #f59e0b;
        }
        .note-button svg {
            width: 1.25rem;
            height: 1.25rem;
        }
        .dark .note-button {
            color: #6b7280;
        }
        .dark .note-button:hover {
            color: #fbbf24;
        }
        .dark .note-button.has-note {
            color: #fbbf24;
        }

        /* Note indicator badge */
        .note-indicator {
            position: absolute;
            top: -2px;
            right: -2px;
            width: 8px;
            height: 8px;
            background: #f59e0b;
            border-radius: 50%;
            border: 2px solid white;
        }
        .dark .note-indicator {
            border-color: #1f2937;
        }

        /* Note editor inline */
        .note-editor {
            margin-top: 0.75rem;
            background: #fffbeb;
            border: 1px solid #fcd34d;
            border-radius: 0.5rem;
            padding: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .dark .note-editor {
            background: #292524;
            border-color: #78716c;
        }
        .note-editor textarea {
            width: 100%;
            min-height: 80px;
            padding: 0.5rem;
            border: 1px solid #e5e7eb;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            resize: vertical;
            background: white;
            color: #1f2937;
        }
        .dark .note-editor textarea {
            background: #1c1917;
            border-color: #44403c;
            color: #e7e5e4;
        }
        .note-editor textarea:focus {
            outline: none;
            border-color: #f59e0b;
            box-shadow: 0 0 0 2px rgba(245, 158, 11, 0.2);
        }
        .note-editor-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }
        .note-btn {
            padding: 0.375rem 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        .note-btn-save {
            background: #f59e0b;
            color: white;
            border: none;
        }
        .note-btn-save:hover {
            background: #d97706;
        }
        .note-btn-cancel {
            background: transparent;
            border: 1px solid #d1d5db;
            color: #6b7280;
        }
        .note-btn-cancel:hover {
            background: #f3f4f6;
        }
        .dark .note-btn-cancel {
            border-color: #44403c;
            color: #a8a29e;
        }
        .dark .note-btn-cancel:hover {
            background: #292524;
        }
        .note-btn-delete {
            background: transparent;
            border: 1px solid #fca5a5;
            color: #ef4444;
        }
        .note-btn-delete:hover {
            background: #fee2e2;
        }
        .dark .note-btn-delete:hover {
            background: #450a0a;
        }

        /* Notes panel floating button */
        .notes-fab {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            width: 3.5rem;
            height: 3.5rem;
            background: linear-gradient(135deg, #f59e0b, #d97706);
            border-radius: 50%;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .notes-fab:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.5);
        }
        .notes-fab svg {
            width: 1.5rem;
            height: 1.5rem;
            color: white;
        }
        .notes-fab-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            min-width: 20px;
            height: 20px;
            background: #ef4444;
            color: white;
            border-radius: 10px;
            font-size: 0.75rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 4px;
        }

        /* Notes panel */
        .notes-panel {
            position: fixed;
            bottom: 6rem;
            right: 1.5rem;
            width: 360px;
            max-height: 70vh;
            background: white;
            border-radius: 1rem;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            z-index: 49;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        .dark .notes-panel {
            background: #1f2937;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }
        .notes-panel-header {
            padding: 1rem;
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .notes-panel-title {
            font-weight: 600;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .notes-panel-close {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 0.25rem;
            opacity: 0.8;
            transition: opacity 0.2s;
        }
        .notes-panel-close:hover {
            opacity: 1;
        }
        .notes-panel-body {
            flex: 1;
            overflow-y: auto;
            padding: 0.5rem;
        }
        .notes-panel-empty {
            padding: 2rem;
            text-align: center;
            color: #9ca3af;
        }
        .note-card {
            background: #fffbeb;
            border: 1px solid #fcd34d;
            border-radius: 0.5rem;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
        }
        .dark .note-card {
            background: #292524;
            border-color: #78716c;
        }
        .note-card-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }
        .note-card-section {
            font-size: 0.75rem;
            font-weight: 600;
            color: #92400e;
            cursor: pointer;
            transition: color 0.2s;
        }
        .note-card-section:hover {
            color: #d97706;
            text-decoration: underline;
        }
        .dark .note-card-section {
            color: #fbbf24;
        }
        .note-card-copy,
        .note-card-delete {
            background: none;
            border: none;
            color: #9ca3af;
            cursor: pointer;
            padding: 0.125rem;
            transition: color 0.2s;
        }
        .note-card-copy:hover {
            color: #10b981;
        }
        .note-card-copy.copied {
            color: #10b981;
        }
        .note-card-delete:hover {
            color: #ef4444;
        }
        .note-card-content {
            font-size: 0.875rem;
            color: #374151;
            white-space: pre-wrap;
            word-break: break-word;
        }
        .dark .note-card-content {
            color: #d1d5db;
        }
        @media (max-width: 640px) {
            .notes-panel {
                left: 1rem;
                right: 1rem;
                width: auto;
            }
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-200">

    <!-- Fixed Right Progress Indicator -->
    <nav class="progress-sidebar" aria-label="Tutorial progress">
        <!-- Week 1: Days 1-5 -->
        <div class="progress-week-divider"><span>W1</span></div>
        <template x-for="day in [1,2,3,4,5]" :key="day">
            <a :href="'#day-' + day"
               class="progress-item"
               :class="{
                   'completed': completedDays.includes(day),
                   'current': currentSection === 'day-' + day
               }">
                <span class="item-number" x-text="day"></span>
                <span class="tooltip" x-text="dayTitles[day]"></span>
                <span x-show="currentSection === 'day-' + day" class="progress-current-label" x-text="dayTitles[day]"></span>
            </a>
        </template>

        <!-- Week 2: Days 6-10 -->
        <div class="progress-week-divider"><span>W2</span></div>
        <template x-for="day in [6,7,8,9,10]" :key="day">
            <a :href="'#day-' + day"
               class="progress-item"
               :class="{
                   'completed': completedDays.includes(day),
                   'current': currentSection === 'day-' + day
               }">
                <span class="item-number" x-text="day"></span>
                <span class="tooltip" x-text="dayTitles[day]"></span>
                <span x-show="currentSection === 'day-' + day" class="progress-current-label" x-text="dayTitles[day]"></span>
            </a>
        </template>

        <!-- Week 3: Days 11-14 (combined) -->
        <div class="progress-week-divider"><span>W3</span></div>
        <a href="#day-11-12"
           class="progress-item"
           :class="{
               'completed': completedDays.includes(11) && completedDays.includes(12),
               'current': currentSection === 'day-11-12'
           }">
            <span class="item-number" style="font-size: 0.5rem;">11</span>
            <span class="tooltip">Documentation</span>
            <span x-show="currentSection === 'day-11-12'" class="progress-current-label">Documentation</span>
        </a>
        <a href="#day-13-14"
           class="progress-item"
           :class="{
               'completed': completedDays.includes(13) && completedDays.includes(14),
               'current': currentSection === 'day-13-14'
           }">
            <span class="item-number" style="font-size: 0.5rem;">14</span>
            <span class="tooltip">Final Testing</span>
            <span x-show="currentSection === 'day-13-14'" class="progress-current-label">Final Testing</span>
        </a>

        <!-- Appendices -->
        <div class="progress-week-divider"><span>REF</span></div>
        <a href="#appendix-a"
           class="progress-item"
           :class="{ 'current': currentSection === 'appendix-a' }">
            <span class="item-number">A</span>
            <span class="tooltip">Troubleshooting</span>
            <span x-show="currentSection === 'appendix-a'" class="progress-current-label">Troubleshooting</span>
        </a>
        <a href="#appendix-b"
           class="progress-item"
           :class="{ 'current': currentSection === 'appendix-b' }">
            <span class="item-number">B</span>
            <span class="tooltip">Quick Reference</span>
            <span x-show="currentSection === 'appendix-b'" class="progress-current-label">Quick Reference</span>
        </a>
        <a href="#appendix-c"
           class="progress-item"
           :class="{ 'current': currentSection === 'appendix-c' }">
            <span class="item-number">C</span>
            <span class="tooltip">Extension Ideas</span>
            <span x-show="currentSection === 'appendix-c'" class="progress-current-label">Extension Ideas</span>
        </a>

        <!-- Progress Summary -->
        <div class="progress-summary">
            <div class="progress-summary-count" x-text="completedDays.length + '/14'"></div>
            <div class="progress-summary-label">Done</div>
        </div>
    </nav>

    <!-- Top Navigation Bar -->
    <nav class="fixed top-0 left-0 right-0 h-16 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 z-50 flex items-center justify-between px-4 lg:px-6">
        <div class="flex items-center gap-4">
            <button @click="sidebarOpen = !sidebarOpen" class="lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
            </button>
            <h1 class="text-lg font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">CLI Generator Tutorial</h1>
        </div>
        <div class="hidden md:flex items-center gap-4 flex-1 max-w-md mx-8">
            <div class="flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                <div class="progress-bar h-full bg-gradient-to-r from-primary to-secondary rounded-full" :style="'width: ' + progressPercent + '%'"></div>
            </div>
            <span class="text-sm font-medium" x-text="progressPercent + '%'"></span>
        </div>
        <div class="flex items-center gap-2">
            <button @click="showBookmarks = !showBookmarks" class="relative p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700" title="Bookmarks">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>
                <span x-show="bookmarks.length > 0" class="absolute -top-1 -right-1 w-4 h-4 bg-primary text-white text-xs rounded-full flex items-center justify-center" x-text="bookmarks.length"></span>
            </button>
            <button @click="toggleDarkMode()" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700" title="Toggle dark mode">
                <svg x-show="!darkMode" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
                <svg x-show="darkMode" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
            </button>
            <button @click="resetProgress()" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-red-500" title="Reset progress">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
            </button>
        </div>
    </nav>

    <!-- Bookmarks Dropdown -->
    <div x-show="showBookmarks" x-cloak @click.outside="showBookmarks = false" class="fixed top-16 right-4 w-80 max-h-96 overflow-y-auto bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 z-50">
        <div class="p-4">
            <h3 class="font-semibold mb-3">Bookmarks</h3>
            <template x-if="bookmarks.length === 0"><p class="text-gray-500 text-sm">No bookmarks yet.</p></template>
            <template x-for="bookmark in bookmarks" :key="bookmark.id">
                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-700 last:border-0">
                    <a :href="'#' + bookmark.id" @click="showBookmarks = false" class="text-sm hover:text-primary truncate flex-1" x-text="bookmark.title"></a>
                    <button @click="removeBookmark(bookmark.id)" class="p-1 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    </button>
                </div>
            </template>
        </div>
    </div>

    <!-- Sidebar Navigation -->
    <aside :class="sidebarOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'" class="fixed top-16 left-0 bottom-0 w-72 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 overflow-y-auto z-40 transition-transform duration-200">
        <nav class="p-4">
            <div class="mb-4">
                <a href="#overview" @click="sidebarOpen = false" :class="{'nav-item active': currentSection === 'overview'}" class="nav-item block py-2 px-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Overview</a>
            </div>
            <div class="mb-4">
                <button @click="week1Open = !week1Open" class="w-full flex items-center justify-between py-2 px-3 font-semibold text-primary">
                    <span>Week 1: Foundation</span>
                    <svg :class="week1Open ? 'rotate-90' : ''" class="w-4 h-4 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                </button>
                <div x-show="week1Open" x-collapse class="ml-2 space-y-1">
                    <template x-for="day in [1,2,3,4,5]" :key="day">
                        <a :href="'#day-' + day" @click="sidebarOpen = false" :class="{'nav-item active': currentSection === 'day-' + day}" class="nav-item flex items-center gap-2 py-2 px-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-sm">
                            <input type="checkbox" :checked="completedDays.includes(day)" @click.stop="toggleDay(day)" class="rounded">
                            <span x-text="'Day ' + day + ': ' + dayTitles[day]"></span>
                        </a>
                    </template>
                </div>
            </div>
            <div class="mb-4">
                <button @click="week2Open = !week2Open" class="w-full flex items-center justify-between py-2 px-3 font-semibold text-secondary">
                    <span>Week 2: Intelligence</span>
                    <svg :class="week2Open ? 'rotate-90' : ''" class="w-4 h-4 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                </button>
                <div x-show="week2Open" x-collapse class="ml-2 space-y-1">
                    <template x-for="day in [6,7,8,9,10]" :key="day">
                        <a :href="'#day-' + day" @click="sidebarOpen = false" :class="{'nav-item active': currentSection === 'day-' + day}" class="nav-item flex items-center gap-2 py-2 px-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-sm">
                            <input type="checkbox" :checked="completedDays.includes(day)" @click.stop="toggleDay(day)" class="rounded">
                            <span x-text="'Day ' + day + ': ' + dayTitles[day]"></span>
                        </a>
                    </template>
                </div>
            </div>
            <div class="mb-4">
                <button @click="week3Open = !week3Open" class="w-full flex items-center justify-between py-2 px-3 font-semibold text-green-600">
                    <span>Week 3: Polish</span>
                    <svg :class="week3Open ? 'rotate-90' : ''" class="w-4 h-4 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                </button>
                <div x-show="week3Open" x-collapse class="ml-2 space-y-1">
                    <a href="#day-11-12" @click="sidebarOpen = false" :class="{'nav-item active': currentSection === 'day-11-12'}" class="nav-item flex items-center gap-2 py-2 px-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-sm">
                        <input type="checkbox" :checked="completedDays.includes(11)" @click.stop="toggleDay(11); toggleDay(12)" class="rounded">
                        <span>Days 11-12: Documentation</span>
                    </a>
                    <a href="#day-13-14" @click="sidebarOpen = false" :class="{'nav-item active': currentSection === 'day-13-14'}" class="nav-item flex items-center gap-2 py-2 px-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-sm">
                        <input type="checkbox" :checked="completedDays.includes(13)" @click.stop="toggleDay(13); toggleDay(14)" class="rounded">
                        <span>Days 13-14: Testing & Release</span>
                    </a>
                </div>
            </div>
            <div class="mb-4">
                <button @click="appendicesOpen = !appendicesOpen" class="w-full flex items-center justify-between py-2 px-3 font-semibold text-gray-600 dark:text-gray-400">
                    <span>Appendices</span>
                    <svg :class="appendicesOpen ? 'rotate-90' : ''" class="w-4 h-4 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                </button>
                <div x-show="appendicesOpen" x-collapse class="ml-2 space-y-1">
                    <a href="#appendix-a" @click="sidebarOpen = false" class="nav-item block py-2 px-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-sm">A: Troubleshooting</a>
                    <a href="#appendix-b" @click="sidebarOpen = false" class="nav-item block py-2 px-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-sm">B: Quick Reference</a>
                    <a href="#appendix-c" @click="sidebarOpen = false" class="nav-item block py-2 px-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-sm">C: Extension Ideas</a>
                </div>
            </div>
        </nav>
    </aside>

    <div x-show="sidebarOpen" x-cloak @click="sidebarOpen = false" class="fixed inset-0 bg-black/50 z-30 lg:hidden"></div>

    <!-- Main Content -->
    <main class="lg:ml-72 pt-16 min-h-screen">
        <div class="max-w-4xl mx-auto px-4 py-8 lg:px-8">

            <!-- Overview Section -->
            <section id="overview" class="mb-16" x-intersect:enter="currentSection = 'overview'">
                <div class="flex items-center gap-3 mb-6">
                    <h1 class="text-4xl font-bold">Personal CLI Tool Generator</h1>
                    <button @click="toggleBookmark('overview', 'Overview')" :class="isBookmarked('overview') ? 'text-primary' : 'text-gray-400'" class="p-1 hover:scale-110 transition-transform">
                        <svg class="w-6 h-6" :fill="isBookmarked('overview') ? 'currentColor' : 'none'" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>
                    </button>
                </div>
                <p class="text-xl text-gray-600 dark:text-gray-400 mb-8">Build a tool that generates CLI applications from natural language while mastering every Claude Code concept</p>

                <div class="grid md:grid-cols-3 gap-4 mb-8">
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"><div class="text-sm text-gray-500 mb-1">Timeline</div><div class="font-semibold">2-3 weeks</div></div>
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"><div class="text-sm text-gray-500 mb-1">Difficulty</div><div class="font-semibold">Intermediate</div></div>
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"><div class="text-sm text-gray-500 mb-1">Prerequisites</div><div class="font-semibold">Python basics, CLI familiarity</div></div>
                </div>

                <h2 class="text-2xl font-bold mb-4">Why This Project?</h2>
                <div class="bg-gradient-to-r from-primary/10 to-secondary/10 rounded-xl p-6 mb-6">
                    <p class="font-medium mb-2">You describe:</p>
                    <blockquote class="italic text-gray-600 dark:text-gray-400 mb-4 pl-4 border-l-4 border-primary">"I need a CLI that converts images between formats, with options for quality and resize"</blockquote>
                    <p class="font-medium mb-2">You get:</p>
                    <pre class="!bg-gray-900 !m-0"><code class="language-bash">imgconvert input.png output.jpg --quality 85 --resize 800x600</code></pre>
                </div>

                <h3 class="text-xl font-semibold mb-4">Pain Points Solved by Claude Code</h3>
                <div class="overflow-x-auto">
                    <table>
                        <thead><tr><th>Pain Point</th><th>Claude Code Solution</th></tr></thead>
                        <tbody>
                            <tr><td>Re-explaining CLI preferences every time</td><td><strong>CLAUDE.md</strong></td></tr>
                            <tr><td>Typing repetitive generation prompts</td><td><strong>Slash Commands</strong></td></tr>
                            <tr><td>Forgetting help text or input validation</td><td><strong>Hooks</strong></td></tr>
                            <tr><td>Wanting suggestions while describing features</td><td><strong>Skills</strong></td></tr>
                            <tr><td>Generating tests and implementation separately</td><td><strong>Subagents</strong></td></tr>
                            <tr><td>Checking PyPI for name conflicts</td><td><strong>MCP Tools</strong></td></tr>
                            <tr><td>Sharing your generator with others</td><td><strong>Plugins</strong></td></tr>
                        </tbody>
                    </table>
                </div>

                <h3 class="text-xl font-semibold mt-8 mb-4">Learning Journey</h3>

                <!-- Animated Progress Roadmap -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700 relative overflow-hidden">
                    <!-- Floating particles -->
                    <div class="particles">
                        <template x-for="i in 8" :key="i">
                            <div class="particle" :style="'left: ' + (i * 12) + '%; animation-delay: ' + (i * 0.8) + 's'"></div>
                        </template>
                    </div>

                    <!-- Week Progress Track -->
                    <div class="roadmap mb-8">
                        <div class="roadmap-track">
                            <div class="roadmap-progress" :style="'width: ' + (progressPercent * 1.1) + '%'"></div>
                        </div>
                        <div class="roadmap-weeks">
                            <div class="roadmap-week">
                                <div class="week-badge" :class="week1Complete ? 'completed' : (week1Started ? 'active' : 'pending')">
                                    <span x-show="week1Complete">✓</span>
                                    <span x-show="!week1Complete">1</span>
                                </div>
                                <div class="week-label text-primary">Foundation</div>
                                <div class="week-title">Days 1-5</div>
                            </div>
                            <div class="roadmap-week">
                                <div class="week-badge" :class="week2Complete ? 'completed' : (week2Started ? 'active' : 'pending')">
                                    <span x-show="week2Complete">✓</span>
                                    <span x-show="!week2Complete">2</span>
                                </div>
                                <div class="week-label text-secondary">Intelligence</div>
                                <div class="week-title">Days 6-10</div>
                            </div>
                            <div class="roadmap-week">
                                <div class="week-badge" :class="week3Complete ? 'completed' : (week3Started ? 'active' : 'pending')">
                                    <span x-show="week3Complete">✓</span>
                                    <span x-show="!week3Complete">3</span>
                                </div>
                                <div class="week-label text-green-600">Polish</div>
                                <div class="week-title">Days 11-14</div>
                            </div>
                        </div>
                    </div>

                    <!-- Day-by-day progress -->
                    <div class="grid grid-cols-3 gap-6">
                        <!-- Week 1 -->
                        <div class="bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4">
                            <h4 class="text-sm font-semibold text-primary mb-3 flex items-center gap-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>
                                Week 1: Foundation
                            </h4>
                            <div class="flex justify-between items-start">
                                <template x-for="day in [1,2,3,4,5]" :key="day">
                                    <a :href="'#day-' + day" class="day-node group text-center">
                                        <div class="day-circle" :class="completedDays.includes(day) ? 'completed' : (currentSection === 'day-' + day ? 'current' : 'pending')">
                                            <span x-text="day"></span>
                                        </div>
                                        <div class="day-label text-gray-600 dark:text-gray-400 group-hover:text-primary transition-colors" x-text="dayTitles[day].split(' ')[0]"></div>
                                    </a>
                                </template>
                            </div>
                        </div>

                        <!-- Week 2 -->
                        <div class="bg-purple-50 dark:bg-purple-900/20 rounded-xl p-4">
                            <h4 class="text-sm font-semibold text-secondary mb-3 flex items-center gap-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>
                                Week 2: Intelligence
                            </h4>
                            <div class="flex justify-between items-start">
                                <template x-for="day in [6,7,8,9,10]" :key="day">
                                    <a :href="'#day-' + day" class="day-node group text-center">
                                        <div class="day-circle" :class="completedDays.includes(day) ? 'completed' : (currentSection === 'day-' + day ? 'current' : 'pending')">
                                            <span x-text="day"></span>
                                        </div>
                                        <div class="day-label text-gray-600 dark:text-gray-400 group-hover:text-secondary transition-colors" x-text="dayTitles[day].split(' ')[0]"></div>
                                    </a>
                                </template>
                            </div>
                        </div>

                        <!-- Week 3 -->
                        <div class="bg-green-50 dark:bg-green-900/20 rounded-xl p-4">
                            <h4 class="text-sm font-semibold text-green-600 mb-3 flex items-center gap-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path></svg>
                                Week 3: Polish
                            </h4>
                            <div class="flex justify-around items-start">
                                <a href="#day-11-12" class="day-node group">
                                    <div class="day-circle" :class="completedDays.includes(11) ? 'completed' : (currentSection === 'day-11-12' ? 'current' : 'pending')" style="width: 3rem; height: 3rem;">
                                        <span>11-12</span>
                                    </div>
                                    <div class="day-label text-gray-600 dark:text-gray-400 group-hover:text-green-600 transition-colors">Docs</div>
                                </a>
                                <a href="#day-13-14" class="day-node group">
                                    <div class="day-circle" :class="completedDays.includes(13) ? 'completed' : (currentSection === 'day-13-14' ? 'current' : 'pending')" style="width: 3rem; height: 3rem;">
                                        <span>13-14</span>
                                    </div>
                                    <div class="day-label text-gray-600 dark:text-gray-400 group-hover:text-green-600 transition-colors">Release</div>
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Progress Stats Legend -->
                    <div class="mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 rounded-full bg-gradient-to-r from-green-400 to-green-600"></div>
                                <span class="text-sm text-gray-600 dark:text-gray-400">Completed</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 rounded-full bg-gradient-to-r from-primary to-secondary animate-pulse"></div>
                                <span class="text-sm text-gray-600 dark:text-gray-400">Current</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 rounded-full bg-gray-300 dark:bg-gray-600"></div>
                                <span class="text-sm text-gray-600 dark:text-gray-400">Pending</span>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <!-- Circular progress indicator -->
                            <svg class="progress-ring w-12 h-12" viewBox="0 0 36 36">
                                <circle class="text-gray-200 dark:text-gray-700" stroke="currentColor" stroke-width="3" fill="transparent" r="16" cx="18" cy="18"/>
                                <circle class="progress-ring-circle text-primary" stroke="currentColor" stroke-width="3" fill="transparent" r="16" cx="18" cy="18"
                                    :stroke-dasharray="100.53"
                                    :stroke-dashoffset="100.53 - (progressPercent / 100 * 100.53)"/>
                            </svg>
                            <div>
                                <div class="text-2xl font-bold" x-text="progressPercent + '%'"></div>
                                <div class="text-xs text-gray-500">Complete</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Animated Stats Cards -->
                <div class="grid md:grid-cols-4 gap-4 mt-8">
                    <div class="stats-card">
                        <div class="stat-value stat-number" x-text="completedDays.length"></div>
                        <div class="text-sm text-gray-600 dark:text-gray-400 mt-1">Days Completed</div>
                        <div class="text-xs text-gray-500 mt-2">of 14 total</div>
                    </div>
                    <div class="stats-card">
                        <div class="stat-value stat-number flex items-center justify-center gap-1">
                            <span x-text="completedDays.length >= 3 ? '3+' : completedDays.length"></span>
                            <span x-show="completedDays.length >= 3" class="streak-flame text-2xl">🔥</span>
                        </div>
                        <div class="text-sm text-gray-600 dark:text-gray-400 mt-1">Day Streak</div>
                        <div class="text-xs text-gray-500 mt-2">Keep going!</div>
                    </div>
                    <div class="stats-card">
                        <div class="stat-value stat-number" x-text="14 - completedDays.length"></div>
                        <div class="text-sm text-gray-600 dark:text-gray-400 mt-1">Days Remaining</div>
                        <div class="text-xs text-gray-500 mt-2">You've got this!</div>
                    </div>
                    <div class="stats-card">
                        <div class="stat-value stat-number" x-text="(week1Complete ? 1 : 0) + (week2Complete ? 1 : 0) + (week3Complete ? 1 : 0)"></div>
                        <div class="text-sm text-gray-600 dark:text-gray-400 mt-1">Weeks Complete</div>
                        <div class="text-xs text-gray-500 mt-2">of 3 weeks</div>
                    </div>
                </div>
            </section>

            <!-- Week 1 Banner -->
            <div class="week-banner week-1">
                <div class="week-banner-content">
                    <div class="week-banner-icon">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>
                    </div>
                    <div class="week-banner-title">Week 1: Foundation</div>
                    <div class="week-banner-subtitle">Setting Up & Building the Core</div>
                    <div class="week-banner-days">Days 1-5</div>
                </div>
            </div>

            <!-- Day 1 -->
            <section id="day-1" class="day-section week-1" x-intersect:enter="currentSection = 'day-1'">
                <div class="flex items-center justify-between mb-4">
                    <span class="px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-sm font-medium rounded-full">Day 1 of 5</span>
                    <button @click="toggleBookmark('day-1', 'Day 1: Project Setup')" :class="isBookmarked('day-1') ? 'text-primary' : 'text-gray-400'" class="p-1 hover:scale-110 transition-transform">
                        <svg class="w-6 h-6" :fill="isBookmarked('day-1') ? 'currentColor' : 'none'" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>
                    </button>
                </div>
                <h2 class="text-3xl font-bold mb-2">Day 1: Project Setup + Configuration</h2>
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-6">Day 1 of 14 • Week 1: Foundation</p>

                <h3 class="text-xl font-semibold mb-3">Learning Objectives</h3>
                <ul class="list-disc list-inside mb-6 space-y-1">
                    <li>Understand why CLAUDE.md exists</li>
                    <li>Create effective project context</li>
                    <li>Experience the "cold start" problem</li>
                </ul>

                <h3 class="text-xl font-semibold mb-3">The Cold Start Problem</h3>
                <p class="mb-4">Open Claude Code in an empty directory and try:</p>
                <pre><code class="language-text">Help me create a function that generates a Click command from a natural language description.</code></pre>

                <p class="mt-4 mb-2"><strong>Notice Claude's questions:</strong></p>
                <ul class="list-disc list-inside mb-4 space-y-1">
                    <li>What Python version?</li>
                    <li>Click or Typer or argparse?</li>
                    <li>How should the output be structured?</li>
                    <li>Where should generated code go?</li>
                </ul>

                <p class="mb-4">Now answer them. Close the session. Open a new one. Ask a related question.</p>

                <div class="callout callout-warning mt-4"><strong>Claude remembers nothing.</strong> This is the pain CLAUDE.md solves.</div>

                <h3 class="text-xl font-semibold mt-8 mb-3">Project Setup</h3>
                <pre><code class="language-bash"># Create project structure
mkdir cli-generator
cd cli-generator

# Claude Code directories
mkdir -p .claude/{commands,hooks,skills,subagents,mcp,rules,plugins}

# Source code directories
mkdir -p src/cli_generator/{generators,validators,templates}
mkdir -p tests/{unit,integration}
mkdir -p generated  # Where generated CLIs go
mkdir -p examples   # Example CLI descriptions

# Initialize Python project with uv
uv init
uv venv
source .venv/bin/activate  # or `.venv\Scripts\activate` on Windows

# Create initial files
touch src/cli_generator/__init__.py
touch src/cli_generator/cli.py
touch src/cli_generator/models.py
touch src/cli_generator/generators/__init__.py
touch src/cli_generator/validators/__init__.py
touch tests/__init__.py</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Create pyproject.toml</h3>
                <pre><code class="language-toml">[project]
name = "cli-generator"
version = "0.1.0"
description = "Generate CLI tools from natural language descriptions"
requires-python = ">=3.11"
dependencies = [
    "click>=8.1",
    "rich>=13.0",
    "pydantic>=2.0",
    "pydantic-ai>=0.1",
    "jinja2>=3.1",
    "httpx>=0.25",
    "pytest>=7.0",
    "pytest-asyncio>=0.21",
]

[project.scripts]
cli-gen = "cli_generator.cli:main"

[build-system]
requires = ["setuptools>=61.0"]
build-backend = "setuptools.build_meta"

[tool.pytest.ini_options]
asyncio_mode = "auto"
testpaths = ["tests"]</code></pre>

                <p class="mt-4 mb-4">Install in development mode:</p>
                <pre><code class="language-bash">uv pip install -e .</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Creating Your CLAUDE.md</h3>
                <p class="mb-4">This is the most important file. It tells Claude everything about your project.</p>
                <p class="mb-4">Create <code>.claude/CLAUDE.md</code>:</p>
                <pre><code class="language-markdown"># CLI Generator

## What This Project Does

Generates complete, working CLI applications from natural language descriptions.

Input: "A CLI that downloads YouTube videos with quality selection"
Output: A complete Python package with Click commands, help text, error handling, and tests.

## Current State

Week 1: Building foundation - core generator working, basic commands.

## Technology Decisions

### Why Click (not Typer or argparse)?

- Most widely used in production
- Excellent documentation
- Decorators are explicit (good for generation)
- Better error messages than argparse

### Why Jinja2 for Templates?

- Industry standard
- Easy to read template syntax
- Good error messages for template issues
- Supports template inheritance

### Why PydanticAI?

- Type-safe LLM interactions
- Structured output parsing
- Built-in retry logic
- Works with multiple providers

## My CLI Preferences (Use These for Generation)

### Structure

- One command per file in `commands/` directory
- Main CLI group in `cli.py`
- Shared utilities in `utils.py`

### Style

- Always include `--help` (Click does this automatically)
- Always include `--version` flag
- Use `--verbose/-v` for debug output
- Use `--quiet/-q` to suppress output
- Color output by default, `--no-color` to disable

### Error Handling

- Catch exceptions and show user-friendly messages
- Exit code 0 for success, 1 for user error, 2 for system error
- Never show stack traces unless `--verbose`

### Documentation

- Every command has a docstring (becomes help text)
- Every option has `help=` parameter
- Include usage examples in command docstrings

## Data Models

### CLISpec

The specification for a CLI to generate:

```python
class CLISpec(BaseModel):
    name: str                    # CLI name (e.g., "imgconvert")
    description: str             # What it does
    commands: list[CommandSpec]  # Commands to generate
    global_options: list[OptionSpec]  # Options for all commands
    python_version: str = "3.11"
    dependencies: list[str] = []
```

### CommandSpec

A single command in the CLI:

```python
class CommandSpec(BaseModel):
    name: str                    # Command name (e.g., "convert")
    description: str             # Help text
    arguments: list[ArgumentSpec]
    options: list[OptionSpec]
    examples: list[str] = []
```

### OptionSpec

A command-line option:

```python
class OptionSpec(BaseModel):
    name: str                    # Long name (e.g., "output")
    short: str | None = None     # Short name (e.g., "o")
    type: str = "str"            # str, int, float, bool, path, choice
    required: bool = False
    default: Any = None
    help: str = ""
    choices: list[str] | None = None  # For choice type
```

### ArgumentSpec

A positional argument:

```python
class ArgumentSpec(BaseModel):
    name: str
    type: str = "str"
    required: bool = True
    help: str = ""
```

## File Structure

```
cli-generator/
├── .claude/
│   ├── CLAUDE.md              # This file
│   ├── commands/              # Slash commands
│   ├── hooks/                 # Quality gates
│   ├── skills/                # Context-aware behaviors
│   ├── subagents/             # Specialized agents
│   ├── mcp/                   # External tool definitions
│   └── rules/                 # Standards and guidelines
├── src/cli_generator/
│   ├── __init__.py
│   ├── cli.py                 # Main CLI (our own interface)
│   ├── models.py              # Pydantic models
│   ├── generators/
│   │   ├── __init__.py
│   │   ├── spec_generator.py  # NL → CLISpec
│   │   ├── code_generator.py  # CLISpec → Python code
│   │   └── test_generator.py  # CLISpec → pytest tests
│   ├── validators/
│   │   ├── __init__.py
│   │   ├── spec_validator.py  # Validate CLISpec
│   │   └── code_validator.py  # Validate generated code
│   └── templates/
│       ├── cli.py.j2          # Main CLI template
│       ├── command.py.j2      # Command template
│       └── test.py.j2         # Test template
├── tests/
├── generated/                 # Output directory
└── examples/                  # Example descriptions
```

## Common Workflows

### Generate a New CLI

1. User provides natural language description
2. LLM parses into CLISpec
3. Validator checks spec
4. Code generator creates Python files
5. Test generator creates pytest files
6. Output validator checks code compiles

### Add Command to Existing CLI

1. Load existing CLISpec from generated CLI
2. Parse new command description
3. Merge into existing spec
4. Regenerate code (preserving customizations?)

## What's Not Built Yet

- [ ] Spec generator (Day 2)
- [ ] Code generator (Day 2)
- [ ] Slash commands (Days 3-4)
- [ ] Hooks (Day 5)
- [ ] Skills (Day 6)
- [ ] Subagents (Day 7)
- [ ] MCP tools (Day 8)

## Testing Strategy

- Unit tests: Each generator/validator in isolation
- Integration tests: Full NL → working CLI flow
- Golden tests: Known inputs produce expected outputs</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Create Rules Files</h3>
                <p class="mb-4">Create <code>.claude/rules/code_standards.md</code>:</p>
                <pre><code class="language-markdown"># Code Standards

## Python Style
- Python 3.11+ features allowed (match statements, type unions with |)
- Type hints required on all function signatures
- Docstrings required on all public functions
- Use `pathlib.Path` for file paths
- Use `async/await` for I/O operations

## Generated Code Style
Generated CLIs should follow these conventions:
- Imports at top, stdlib first, then third-party, then local
- One class per file for complex commands
- Helper functions prefixed with underscore
- Constants in UPPER_SNAKE_CASE

## Testing
- Every generator function needs tests
- Use pytest fixtures for common test data
- Mock LLM calls in unit tests
- Integration tests can use real LLM (marked slow)

## Error Messages
- User-facing: Friendly, actionable
- Developer-facing: Include context (what was being generated)
- Never expose internal details to users</code></pre>

                <p class="mt-4 mb-4">Create <code>.claude/rules/generation_rules.md</code>:</p>
                <pre><code class="language-markdown"># CLI Generation Rules

## Naming Conventions

- CLI names: lowercase, hyphens allowed (e.g., `my-tool`)
- Command names: lowercase, underscores for multi-word (e.g., `list_items`)
- Option names: lowercase, hyphens (e.g., `--output-dir`)
- Short options: single letter, common conventions (e.g., `-o` for output, `-v` for verbose)

## Required Elements

Every generated CLI must have:

1. `--help` flag (Click provides automatically)
2. `--version` flag
3. Proper exit codes (0=success, 1=user error, 2=system error)
4. Error handling that doesn't show tracebacks

## Forbidden Patterns

- Never generate `eval()` or `exec()`
- Never generate hardcoded credentials
- Never generate commands that delete without confirmation
- Never generate `sudo` or privilege escalation

## Template Variables

Templates receive these variables:

- `cli`: The full CLISpec object
- `command`: The current CommandSpec (in command template)
- `timestamp`: Generation timestamp
- `generator_version`: Version of cli-generator</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Test Your CLAUDE.md</h3>
                <p class="mb-4">Start a fresh Claude Code session in your project directory. Ask:</p>
                <pre><code class="language-text">Based on this project, create the CLISpec Pydantic model.</code></pre>

                <p class="mt-4 mb-2">Claude should:</p>
                <ul class="list-disc list-inside mb-4 space-y-1">
                    <li>Know you're using Pydantic v2</li>
                    <li>Know the field structure from CLAUDE.md</li>
                    <li>Follow your code standards</li>
                </ul>

                <div class="callout callout-info"><strong>Tip:</strong> If Claude asks questions already answered in CLAUDE.md, update CLAUDE.md with clearer answers.</div>

                <h3 class="text-xl font-semibold mt-8 mb-3">Settings & Permissions</h3>
                <p class="mb-4">Beyond CLAUDE.md, Claude Code uses <code>settings.json</code> files to control behavior and permissions.</p>

                <h4 class="text-lg font-semibold mt-6 mb-2">Settings File Locations</h4>
                <div class="overflow-x-auto mb-4">
                    <table class="w-full border-collapse border border-gray-300 dark:border-gray-600">
                        <thead><tr class="bg-gray-100 dark:bg-gray-700">
                            <th class="border border-gray-300 dark:border-gray-600 px-3 py-2 text-left">File</th>
                            <th class="border border-gray-300 dark:border-gray-600 px-3 py-2 text-left">Scope</th>
                            <th class="border border-gray-300 dark:border-gray-600 px-3 py-2 text-left">Use Case</th>
                        </tr></thead>
                        <tbody>
                            <tr><td class="border border-gray-300 dark:border-gray-600 px-3 py-2"><code>~/.claude/settings.json</code></td><td class="border border-gray-300 dark:border-gray-600 px-3 py-2">User-level</td><td class="border border-gray-300 dark:border-gray-600 px-3 py-2">Personal preferences across all projects</td></tr>
                            <tr><td class="border border-gray-300 dark:border-gray-600 px-3 py-2"><code>.claude/settings.json</code></td><td class="border border-gray-300 dark:border-gray-600 px-3 py-2">Project-level</td><td class="border border-gray-300 dark:border-gray-600 px-3 py-2">Team-shared project settings</td></tr>
                            <tr><td class="border border-gray-300 dark:border-gray-600 px-3 py-2"><code>.claude/settings.local.json</code></td><td class="border border-gray-300 dark:border-gray-600 px-3 py-2">Local-only</td><td class="border border-gray-300 dark:border-gray-600 px-3 py-2">Personal overrides (not committed)</td></tr>
                        </tbody>
                    </table>
                </div>

                <h4 class="text-lg font-semibold mt-6 mb-2">Permission Configuration</h4>
                <p class="mb-4">Control what Claude can access using permission patterns. Deny rules always take precedence over allow rules.</p>
                <pre><code class="language-json">{
  "permissions": {
    "allow": [
      "Read(**)",
      "Edit(src/**)",
      "Edit(tests/**)",
      "Bash(uv:*)",
      "Bash(pytest:*)",
      "Bash(git:*)"
    ],
    "deny": [
      "Bash(rm -rf:*)",
      "Edit(.env*)",
      "Bash(:*sudo:*)"
    ]
  }
}</code></pre>

                <p class="mt-4 mb-4">Create <code>.claude/settings.json</code> for our CLI generator project:</p>
                <pre><code class="language-json">{
  "permissions": {
    "allow": [
      "Read(**)",
      "Edit(src/**)",
      "Edit(tests/**)",
      "Edit(generated/**)",
      "Bash(uv:*)",
      "Bash(pytest:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push)"
    ],
    "deny": [
      "Bash(rm -rf:*)",
      "Edit(.env*)",
      "Bash(:*sudo:*)",
      "Bash(:*eval:*)",
      "Bash(:*exec:*)"
    ]
  }
}</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Status Line Configuration</h3>
                <p class="mb-4">The status line shows useful information in your terminal while Claude works. Configure it using the <code>/statusline</code> command or manually.</p>

                <h4 class="text-lg font-semibold mt-6 mb-2">Quick Setup</h4>
                <pre><code class="language-bash"># In Claude Code session
/statusline</code></pre>
                <p class="mt-2 mb-4">Follow the prompts to choose your display format and information.</p>

                <h4 class="text-lg font-semibold mt-6 mb-2">Manual Setup</h4>
                <p class="mb-4">Create a status line script that reads JSON from stdin:</p>
                <pre><code class="language-bash">#!/bin/bash
# ~/.claude/statusline.sh
read -r input
model=$(echo "$input" | jq -r '.model // "unknown"')
tokens=$(echo "$input" | jq -r '.tokens_used // 0')
max_tokens=$(echo "$input" | jq -r '.max_tokens // 200000')
pct=$(( tokens * 100 / max_tokens ))
echo "🤖 $model | 📊 $pct%"</code></pre>
                <p class="mt-2 mb-4">Make it executable: <code>chmod +x ~/.claude/statusline.sh</code></p>

                <h3 class="text-xl font-semibold mt-8 mb-3">Day 1 Checklist</h3>
                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                    <div class="checklist-item"><input type="checkbox" id="d1-1" @change="saveChecklist('d1-1', $event.target.checked)" :checked="checklist['d1-1']"><label for="d1-1">Project structure created</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d1-2" @change="saveChecklist('d1-2', $event.target.checked)" :checked="checklist['d1-2']"><label for="d1-2">Dependencies installed with uv</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d1-3" @change="saveChecklist('d1-3', $event.target.checked)" :checked="checklist['d1-3']"><label for="d1-3">CLAUDE.md comprehensive and tested</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d1-4" @change="saveChecklist('d1-4', $event.target.checked)" :checked="checklist['d1-4']"><label for="d1-4">Rules files created</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d1-5" @change="saveChecklist('d1-5', $event.target.checked)" :checked="checklist['d1-5']"><label for="d1-5">settings.json configured with permissions</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d1-6" @change="saveChecklist('d1-6', $event.target.checked)" :checked="checklist['d1-6']"><label for="d1-6">Status line setup (optional)</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d1-7" @change="saveChecklist('d1-7', $event.target.checked)" :checked="checklist['d1-7']"><label for="d1-7">Fresh Claude session reads context correctly</label></div>
                </div>

                <h3 class="text-xl font-semibold mt-8 mb-3">Exercise: CLAUDE.md Stress Test</h3>
                <p class="mb-4">Try these prompts in a fresh session:</p>
                <ol class="list-decimal list-inside mb-4 space-y-2">
                    <li>"What CLI framework are we using and why?"</li>
                    <li>"Show me the data model for a command option."</li>
                    <li>"Where should generated test files go?"</li>
                    <li>"What's our convention for short option flags?"</li>
                </ol>
                <p class="mb-4"><strong>All answers should come from CLAUDE.md without additional questions.</strong></p>

                <div class="flex justify-end mt-6">
                    <button @click="toggleDay(1)" :class="completedDays.includes(1) ? 'bg-green-500' : 'bg-primary'" class="px-6 py-2 text-white rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2">
                        <span x-text="completedDays.includes(1) ? 'Completed!' : 'Mark as Complete'"></span>
                    </button>
                </div>
            </section>

            <!-- Day Divider -->
            <div class="day-divider"><div class="day-divider-dot"></div></div>

            <!-- Day 2 -->
            <section id="day-2" class="day-section week-1" x-intersect:enter="currentSection = 'day-2'">
                <div class="flex items-center justify-between mb-4">
                    <span class="px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-sm font-medium rounded-full">Day 2 of 5</span>
                    <button @click="toggleBookmark('day-2', 'Day 2: Core Models')" :class="isBookmarked('day-2') ? 'text-primary' : 'text-gray-400'" class="p-1 hover:scale-110 transition-transform">
                        <svg class="w-6 h-6" :fill="isBookmarked('day-2') ? 'currentColor' : 'none'" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>
                    </button>
                </div>
                <h2 class="text-3xl font-bold mb-2">Day 2: Core Models + Generator Engine</h2>
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-6">Day 2 of 14 • Week 1: Foundation</p>

                <h3 class="text-xl font-semibold mb-3">Learning Objectives</h3>
                <ul class="list-disc list-inside mb-6 space-y-1">
                    <li>Build the core generation engine through iterative prompting</li>
                    <li>Experience the TDD workflow with Claude Code</li>
                    <li>Understand how to verify and correct Claude's output</li>
                </ul>

                <h3 class="text-xl font-semibold mb-3">Your Role Today</h3>
                <div class="grid md:grid-cols-2 gap-4 mb-6">
                    <div class="bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4">
                        <h4 class="font-semibold mb-2">You will:</h4>
                        <ol class="list-decimal list-inside space-y-1 text-sm">
                            <li>Write prompts to Claude Code</li>
                            <li>Review the generated code against requirements</li>
                            <li>Run tests to verify correctness</li>
                            <li>Iterate when something needs adjustment</li>
                        </ol>
                    </div>
                    <div class="bg-purple-50 dark:bg-purple-900/20 rounded-xl p-4">
                        <h4 class="font-semibold mb-2">Claude will:</h4>
                        <ol class="list-decimal list-inside space-y-1 text-sm">
                            <li>Generate code based on your prompts and CLAUDE.md context</li>
                            <li>Follow the patterns and standards you've established</li>
                            <li>Correct itself when you point out issues</li>
                        </ol>
                    </div>
                </div>

                <h3 class="text-xl font-semibold mb-3">Step 1: Create the Data Models</h3>
                <h4 class="text-lg font-medium mb-2">The Prompt</h4>
                <p class="mb-2">Open Claude Code in your <code>cli-generator</code> project directory and type:</p>
                <pre><code class="language-text">Based on the data models defined in CLAUDE.md, create src/cli_generator/models.py with:

1. OptionSpec - command line option
2. ArgumentSpec - positional argument
3. CommandSpec - a CLI command
4. CLISpec - complete CLI specification

Include Pydantic validators for:
- CLI name must be valid Python package name (lowercase, hyphens allowed)
- Option short names must be single character
- No duplicate command names in a CLI
- No duplicate option names within a command
- Choice type options must have choices list

Write tests first in tests/unit/test_models.py following TDD.</code></pre>

                <h4 class="text-lg font-medium mt-6 mb-2">What to Expect</h4>
                <p class="mb-2">Claude should generate:</p>
                <ol class="list-decimal list-inside mb-4 space-y-1">
                    <li><strong>Test file first</strong> (<code>tests/unit/test_models.py</code>) with tests for:
                        <ul class="list-disc list-inside ml-6 text-sm">
                            <li>Valid option creation</li>
                            <li>Short option validation (single character only)</li>
                            <li>Choice type requiring choices list</li>
                            <li>Valid CLI names</li>
                            <li>Invalid CLI names (uppercase, special characters)</li>
                            <li>Duplicate command detection</li>
                            <li>Duplicate option detection</li>
                        </ul>
                    </li>
                    <li><strong>Implementation file</strong> (<code>src/cli_generator/models.py</code>) with:
                        <ul class="list-disc list-inside ml-6 text-sm">
                            <li>Pydantic BaseModel classes</li>
                            <li>Field validators using <code>@field_validator</code></li>
                            <li>Model validators using <code>@model_validator</code></li>
                            <li>Proper type hints</li>
                        </ul>
                    </li>
                </ol>

                <h4 class="text-lg font-medium mt-6 mb-2">Reference: Expected Test Structure</h4>
                <p class="mb-2">Your tests should cover cases like these:</p>
                <pre><code class="language-python">"""Tests for CLI specification models."""

import pytest
from pydantic import ValidationError
from cli_generator.models import OptionSpec, ArgumentSpec, CommandSpec, CLISpec


class TestOptionSpec:
    """Tests for OptionSpec model."""

    def test_valid_option_with_short(self):
        """Valid option with short name."""
        opt = OptionSpec(name="output", short="o", type="str", help="Output file")
        assert opt.name == "output"
        assert opt.short == "o"

    def test_short_must_be_single_character(self):
        """Short option must be exactly one letter."""
        with pytest.raises(ValidationError) as exc_info:
            OptionSpec(name="output", short="out", type="str")
        assert "single letter" in str(exc_info.value).lower()

    def test_choice_type_requires_choices(self):
        """Choice type must have choices list."""
        with pytest.raises(ValidationError) as exc_info:
            OptionSpec(name="format", type="choice", help="Output format")
        assert "choices" in str(exc_info.value).lower()


class TestCommandSpec:
    """Tests for CommandSpec model."""

    def test_no_duplicate_option_names(self):
        """Command cannot have duplicate option names."""
        with pytest.raises(ValidationError) as exc_info:
            CommandSpec(
                name="convert",
                description="Convert files",
                options=[
                    OptionSpec(name="output", type="path"),
                    OptionSpec(name="output", type="str"),  # Duplicate!
                ]
            )
        assert "duplicate" in str(exc_info.value).lower()


class TestCLISpec:
    """Tests for CLISpec model."""

    def test_cli_name_must_be_lowercase(self):
        """CLI name must be lowercase."""
        with pytest.raises(ValidationError) as exc_info:
            CLISpec(name="MyTool", description="A tool")
        assert "package name" in str(exc_info.value).lower()

    def test_no_duplicate_commands(self):
        """CLI cannot have duplicate command names."""
        with pytest.raises(ValidationError) as exc_info:
            CLISpec(
                name="my-tool",
                description="A tool",
                commands=[
                    CommandSpec(name="list", description="List items"),
                    CommandSpec(name="list", description="List things"),  # Duplicate!
                ]
            )
        assert "duplicate" in str(exc_info.value).lower()</code></pre>

                <h4 class="text-lg font-medium mt-6 mb-2">Verify Your Output</h4>
                <pre><code class="language-bash"># Run the tests
uv run pytest tests/unit/test_models.py -v

# Expected: All tests pass</code></pre>

                <div class="callout callout-info mt-4"><strong>If tests fail</strong>, tell Claude what went wrong:
                    <pre class="!mt-2 text-sm"><code class="language-text">The test test_short_must_be_single_character is failing. The validator
is accepting "out" as a valid short option. The regex should ensure
exactly one character.</code></pre>
                </div>

                <h3 class="text-xl font-semibold mt-8 mb-3">Step 2: Create the Spec Generator</h3>
                <h4 class="text-lg font-medium mb-2">The Prompt</h4>
                <pre><code class="language-text">Create src/cli_generator/generators/spec_generator.py that uses PydanticAI
to convert natural language descriptions into CLISpec objects.

Requirements:
1. SpecGenerator class with model parameter (default: "openai:gpt-4o-mini")
2. System prompt that knows CLI best practices from CLAUDE.md
3. async generate(description: str) -> CLISpec method
4. async add_command(spec: CLISpec, description: str) -> CLISpec method

The system prompt should guide the LLM to:
- Create appropriate CLI names from descriptions
- Break complex tools into multiple commands
- Use standard option conventions (-o for output, -v for verbose, etc.)
- Include helpful descriptions and examples

Write tests in tests/unit/test_spec_generator.py that mock LLM responses.</code></pre>

                <h4 class="text-lg font-medium mt-6 mb-2">Reference: Expected Implementation</h4>
                <pre><code class="language-python">"""Generate CLISpec from natural language descriptions."""

from pydantic_ai import Agent
from ..models import CLISpec


class SpecGenerator:
    """Generates CLI specifications from natural language."""

    def __init__(self, model: str = "openai:gpt-4o-mini"):
        """Initialize with specified LLM model."""
        self.agent = Agent(
            model,
            result_type=CLISpec,
            system_prompt=self._system_prompt()
        )

    def _system_prompt(self) -> str:
        """System prompt encoding CLI design best practices."""
        return """You are an expert CLI designer. Convert natural language
descriptions into structured CLI specifications.

Follow these guidelines:

## Naming
- CLI names: lowercase, hyphens allowed (e.g., my-tool, file-converter)
- Command names: lowercase, underscores for multi-word (e.g., list_all)
- Option names: lowercase, hyphens (e.g., --output-dir)

## Standard Options
Use conventional short options:
- -o / --output: Output file or directory
- -v / --verbose: Verbose/debug output
- -q / --quiet: Suppress output
- -f / --force: Force operation without confirmation

## Best Practices
- Every command needs a clear description
- Include realistic usage examples
- Add helpful default values where sensible"""

    async def generate(self, description: str) -> CLISpec:
        """Generate a CLISpec from a natural language description."""
        result = await self.agent.run(description)
        return result.data

    async def add_command(self, spec: CLISpec, command_description: str) -> CLISpec:
        """Add a new command to an existing CLI spec."""
        prompt = f"""Existing CLI: {spec.name}
Description: {spec.description}
Current commands: {[cmd.name for cmd in spec.commands]}

Add this new command: {command_description}

Return the complete updated CLISpec with the new command added."""

        result = await self.agent.run(prompt)
        return result.data</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Step 3: Create the Code Generator</h3>
                <h4 class="text-lg font-medium mb-2">The Prompt</h4>
                <pre><code class="language-text">Create the code generator that transforms CLISpec into Python/Click code.

Files to create:

1. src/cli_generator/templates/cli.py.j2 - Jinja2 template for CLI code
   - Should generate valid Click CLI with all commands
   - Include proper decorators for arguments and options
   - Handle all option types (str, int, float, bool, path, choice)
   - Generate docstrings from descriptions

2. src/cli_generator/generators/code_generator.py - CodeGenerator class
   - generate(spec: CLISpec, output_dir: Path) -> dict[str, Path]
   - Creates: cli.py, __init__.py, pyproject.toml, README.md
   - Uses Jinja2 for templating
   - Returns dict mapping file type to path

3. tests/unit/test_code_generator.py
   - Test that generated code compiles (valid Python syntax)
   - Test that all commands are present
   - Test that options have correct types</code></pre>

                <h4 class="text-lg font-medium mt-6 mb-2">Reference: Expected Template (cli.py.j2)</h4>
                <pre><code class="language-jinja2">#!/usr/bin/env python3
"""{{ cli.description }}

Generated by cli-generator v{{ generator_version }}
"""

import click

__version__ = "{{ cli.version }}"


@click.group()
@click.version_option(__version__)
@click.pass_context
def cli(ctx):
    """{{ cli.description }}"""
    ctx.ensure_object(dict)


{% for command in cli.commands %}
@cli.command()
{% for arg in command.arguments %}
@click.argument("{{ arg.name }}")
{% endfor %}
{% for opt in command.options %}
@click.option(
    "--{{ opt.name }}"{% if opt.short %}, "-{{ opt.short }}"{% endif %},
    {% if opt.type == "bool" %}is_flag=True,{% endif %}
    {% if opt.type == "choice" %}type=click.Choice({{ opt.choices | tojson }}),{% endif %}
    help="{{ opt.help }}"
)
{% endfor %}
def {{ command.name }}({% for arg in command.arguments %}{{ arg.name }}, {% endfor %}{% for opt in command.options %}{{ opt.name | replace("-", "_") }}{% if not loop.last %}, {% endif %}{% endfor %}):
    """{{ command.description }}"""
    # TODO: Implement {{ command.name }}
    click.echo(f"Running {{ command.name }}...")


{% endfor %}
def main():
    """Entry point."""
    cli()


if __name__ == "__main__":
    main()</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Step 4: Create the CLI Interface</h3>
                <h4 class="text-lg font-medium mb-2">The Prompt</h4>
                <pre><code class="language-text">Create src/cli_generator/cli.py - our CLI interface for the generator.

Commands needed:
1. cli-gen spec &lt;description&gt;
   - Generate and display CLISpec from description
   - Pretty print as JSON with syntax highlighting

2. cli-gen generate &lt;description&gt;
   - Generate complete CLI from description
   - Options: --output/-o for output directory (default: ./generated)
   - Options: --dry-run to show spec without generating

3. cli-gen build &lt;spec_file&gt;
   - Build CLI from a saved JSON spec file

Use Rich for colored output and syntax highlighting.
Include proper error handling with user-friendly messages.</code></pre>

                <h4 class="text-lg font-medium mt-6 mb-2">Verify Your Output</h4>
                <pre><code class="language-bash"># Install your package
uv pip install -e .

# Test the spec command
cli-gen spec "A tool to count words in files"

# Test generate with dry-run
cli-gen generate "A simple greeting CLI" --dry-run

# Test actual generation
cli-gen generate "A hello world CLI"

# Check what was generated
ls -la generated/
cat generated/hello_world/cli.py</code></pre>

                <div class="callout callout-warning mt-6">
                    <strong>Common Issue: LLM Output Validation Errors</strong>
                    <p class="mt-2">When testing, you might see errors like "Exceeded maximum retries for output validation". This often happens when the LLM generates data that doesn't match your Pydantic model's expectations.</p>

                    <p class="mt-3"><strong>Example problem:</strong> The LLM generates option names with <code>--</code> prefix:</p>
                    <pre class="!mt-2 text-sm"><code class="language-json">{
  "name": "--verbose",
  "short": "-v"
}</code></pre>

                    <p class="mt-3">But your model expects just the name:</p>
                    <pre class="!mt-2 text-sm"><code class="language-json">{
  "name": "verbose",
  "short": "v"
}</code></pre>

                    <p class="mt-4"><strong>Two fixes to apply:</strong></p>

                    <p class="mt-3">1. <strong>Improve the system prompt</strong> to be more explicit:</p>
                    <pre class="!mt-2 text-sm"><code class="language-python">SYSTEM_PROMPT = """
## CRITICAL: Field Format Rules

### Option and Argument Names
- Option `name` field: Use ONLY the name WITHOUT dashes. Example: "output" NOT "--output"
- Option `short` field: Use ONLY the single letter WITHOUT dash. Example: "o" NOT "-o"
...
"""</code></pre>

                    <p class="mt-3">2. <strong>Add field validators</strong> to sanitize input:</p>
                    <pre class="!mt-2 text-sm"><code class="language-python">from pydantic import field_validator

class OptionSpec(BaseModel):
    name: str
    short: str | None = None

    @field_validator("name", mode="before")
    @classmethod
    def clean_name(cls, v: str) -> str:
        """Strip leading dashes from option names."""
        if isinstance(v, str):
            return v.lstrip("-")
        return v

    @field_validator("short", mode="before")
    @classmethod
    def clean_short(cls, v: str | None) -> str | None:
        """Strip leading dash from short option."""
        if isinstance(v, str):
            cleaned = v.lstrip("-")
            return cleaned if cleaned else None
        return v</code></pre>

                    <p class="mt-3 text-sm text-gray-600 dark:text-gray-400">This defensive approach handles LLM inconsistencies gracefully while still guiding it toward correct output.</p>
                </div>

                <h3 class="text-xl font-semibold mt-8 mb-3">Step 5: Integration Test</h3>
                <h4 class="text-lg font-medium mb-2">The Prompt</h4>
                <pre><code class="language-text">Create an integration test that verifies the complete workflow:
1. Generate a spec from description
2. Generate code from spec
3. Verify generated code compiles
4. Optionally install and test --help

Put in tests/integration/test_workflow.py
Mark slow tests with @pytest.mark.slow</code></pre>

                <h4 class="text-lg font-medium mt-6 mb-2">Verify Complete Pipeline</h4>
                <pre><code class="language-bash"># Run unit tests
uv run pytest tests/unit/ -v

# Run integration tests (may be slower)
uv run pytest tests/integration/ -v

# Run everything
uv run pytest -v</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">The Repetitive Prompts Problem</h3>
                <p class="mb-4">By now you've typed variations of:</p>
                <ul class="list-disc list-inside mb-4 space-y-1">
                    <li>"Create a generator that..."</li>
                    <li>"Add tests for..."</li>
                    <li>"Make sure it validates..."</li>
                    <li>"Generate code that..."</li>
                </ul>

                <div class="callout callout-success">
                    <strong>Write down 5 prompts you typed today that were similar to previous prompts.</strong>
                    <p class="mt-2">This repetition is the pain that slash commands solve tomorrow. Instead of typing a long prompt, you'll type:</p>
                    <pre class="!mt-2"><code class="language-text">/design "CSV to JSON converter with formatting options"</code></pre>
                </div>

                <h3 class="text-xl font-semibold mt-8 mb-3">Day 2 Checklist</h3>
                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                    <div class="checklist-item"><input type="checkbox" id="d2-1" @change="saveChecklist('d2-1', $event.target.checked)" :checked="checklist['d2-1']"><label for="d2-1">tests/unit/test_models.py - All tests pass</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d2-2" @change="saveChecklist('d2-2', $event.target.checked)" :checked="checklist['d2-2']"><label for="d2-2">src/cli_generator/models.py - All models with validators</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d2-3" @change="saveChecklist('d2-3', $event.target.checked)" :checked="checklist['d2-3']"><label for="d2-3">tests/unit/test_spec_generator.py - Tests pass</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d2-4" @change="saveChecklist('d2-4', $event.target.checked)" :checked="checklist['d2-4']"><label for="d2-4">src/cli_generator/generators/spec_generator.py - Working generator</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d2-5" @change="saveChecklist('d2-5', $event.target.checked)" :checked="checklist['d2-5']"><label for="d2-5">src/cli_generator/templates/cli.py.j2 - Jinja2 template</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d2-6" @change="saveChecklist('d2-6', $event.target.checked)" :checked="checklist['d2-6']"><label for="d2-6">src/cli_generator/generators/code_generator.py - Working generator</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d2-7" @change="saveChecklist('d2-7', $event.target.checked)" :checked="checklist['d2-7']"><label for="d2-7">src/cli_generator/cli.py - CLI with spec, generate, build commands</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d2-8" @change="saveChecklist('d2-8', $event.target.checked)" :checked="checklist['d2-8']"><label for="d2-8">cli-gen spec "test" - Works and shows JSON</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d2-9" @change="saveChecklist('d2-9', $event.target.checked)" :checked="checklist['d2-9']"><label for="d2-9">cli-gen generate "test" - Creates files in ./generated/</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d2-10" @change="saveChecklist('d2-10', $event.target.checked)" :checked="checklist['d2-10']"><label for="d2-10">Generated CLI compiles (no Python syntax errors)</label></div>
                </div>

                <h3 class="text-xl font-semibold mt-8 mb-3">Troubleshooting Day 2</h3>
                <div class="space-y-4">
                    <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
                        <h4 class="font-semibold mb-2">"Claude generates different code than shown"</h4>
                        <p class="text-sm">That's expected! As long as tests pass, functionality matches requirements, and code follows your CLAUDE.md standards, the exact code doesn't need to match.</p>
                    </div>
                    <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
                        <h4 class="font-semibold mb-2">"Tests are failing"</h4>
                        <p class="text-sm mb-2">Tell Claude specifically what's failing:</p>
                        <pre class="text-sm"><code class="language-text">The test test_choice_requires_choices_list is failing with:
AssertionError: ValidationError not raised

The OptionSpec model is accepting type="choice" without a choices list.
Fix the validator.</code></pre>
                    </div>
                    <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
                        <h4 class="font-semibold mb-2">"Import errors when running CLI"</h4>
                        <p class="text-sm">Check that: 1) Package is installed: <code>uv pip install -e .</code> 2) <code>__init__.py</code> files exist in all directories 3) Imports use correct relative paths</p>
                    </div>
                    <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
                        <h4 class="font-semibold mb-2">"LLM calls failing"</h4>
                        <p class="text-sm">Check: 1) <code>OPENAI_API_KEY</code> is set 2) Check API quota 3) For testing, mock the LLM responses</p>
                    </div>
                </div>

                <div class="flex justify-end mt-6"><button @click="toggleDay(2)" :class="completedDays.includes(2) ? 'bg-green-500' : 'bg-primary'" class="px-6 py-2 text-white rounded-lg hover:opacity-90"><span x-text="completedDays.includes(2) ? 'Completed!' : 'Mark as Complete'"></span></button></div>
            </section>

            <!-- Day Divider -->
            <div class="day-divider"><div class="day-divider-dot"></div></div>

            <!-- Day 3 -->
            <section id="day-3" class="day-section week-1" x-intersect:enter="currentSection = 'day-3'">
                <div class="flex items-center justify-between mb-4">
                    <span class="px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-sm font-medium rounded-full">Day 3 of 5</span>
                    <button @click="toggleBookmark('day-3', 'Day 3: Slash Commands')" :class="isBookmarked('day-3') ? 'text-primary' : 'text-gray-400'" class="p-1 hover:scale-110 transition-transform">
                        <svg class="w-6 h-6" :fill="isBookmarked('day-3') ? 'currentColor' : 'none'" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>
                    </button>
                </div>
                <h2 class="text-3xl font-bold mb-2">Day 3: Your First Slash Commands</h2>
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-6">Day 3 of 14 • Week 1: Foundation</p>

                <h3 class="text-xl font-semibold mb-3">Learning Objectives</h3>
                <ul class="list-disc list-inside mb-6 space-y-1">
                    <li>Transform repetitive prompts into reusable commands</li>
                    <li>Understand command structure</li>
                    <li>Experience the productivity difference</li>
                </ul>

                <h3 class="text-xl font-semibold mb-3">What Are Slash Commands?</h3>
                <p class="mb-4">Slash commands are markdown files that define reusable workflows. Instead of typing:</p>
                <pre><code class="language-text">Based on the project, generate a CLISpec for a tool that converts
CSV files to JSON. Make sure to include options for formatting,
validate the spec, and show me what it would generate.</code></pre>
                <p class="mt-4 mb-4">You type:</p>
                <pre><code class="language-text">/design "CSV to JSON converter with formatting options"</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Command 1: /design</h3>
                <p class="mb-2"><strong>The pain:</strong> Manually prompting for spec generation, forgetting to show preview.</p>
                <p class="mb-2">Create <code>.claude/commands/design.md</code>:</p>
                <pre><code class="language-markdown"># /design - Design a New CLI

## Purpose
Generate and preview a CLI specification from a natural language
description, without generating code yet.

## Usage
```
/design &lt;description&gt;
/design "A tool that encrypts files with AES"
/design --detailed "Complex multi-command CLI for database migrations"
```

## Process

### 1. Understand the Request
Parse the description to identify:
- Primary purpose
- Likely commands needed
- Input/output types
- Common options for this type of tool

### 2. Generate Specification
Use SpecGenerator to create CLISpec with:
- Appropriate name (derived from description)
- Clear, concise description
- Well-designed commands with arguments and options
- Helpful examples for each command
- Sensible defaults

### 3. Present for Review
```
CLI Design: &lt;name&gt;
================

Description: &lt;description&gt;

Commands:
---------
&lt;command_name&gt;
  &lt;description&gt;
  Arguments: &lt;args&gt;
  Options: &lt;options&gt;
  Example: &lt;example&gt;

[Repeat for each command]

Next steps:
  /refine &lt;feedback&gt;     - Modify the design
  /generate              - Generate code from this spec
  /save-spec &lt;filename&gt;  - Save spec to file
```

## Output
- Display formatted CLI design
- Do NOT generate code
- Do NOT save files
- Wait for user to approve or refine</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Command 2: /generate</h3>
                <p class="mb-2"><strong>The pain:</strong> Running generation manually, forgetting output directory.</p>
                <p class="mb-2">Create <code>.claude/commands/generate.md</code>:</p>
                <pre><code class="language-markdown"># /generate - Generate CLI Code

## Purpose
Generate complete CLI code from the current or specified design.

## Usage
```
/generate                    # From current design in session
/generate &lt;spec_file&gt;        # From saved spec file
/generate --output ./my-cli  # Custom output directory
/generate --with-tests       # Include test files
```

## Process

### 1. Get Specification
- If spec_file provided: Load from file
- If design in current session: Use that
- If neither: Error - "No design found. Run /design first."

### 2. Validate Specification
Run validators:
- [ ] CLI name is valid
- [ ] No duplicate commands
- [ ] No duplicate options
- [ ] All required fields present

### 3. Generate Code
Using CodeGenerator, create:
- `&lt;name&gt;/cli.py` - Main CLI with all commands
- `&lt;name&gt;/__init__.py` - Package init
- `pyproject.toml` - Project configuration
- `README.md` - Documentation

If --with-tests:
- `tests/test_cli.py` - CLI tests
- `tests/conftest.py` - Test fixtures

### 4. Report Results
```
Generated CLI: &lt;name&gt;
====================

Files created:
  ✓ &lt;name&gt;/cli.py (XX lines)
  ✓ &lt;name&gt;/__init__.py
  ✓ pyproject.toml
  ✓ README.md

Quick start:
  cd &lt;output_path&gt;
  uv pip install -e .
  &lt;name&gt; --help
```</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Command 3: /add-command</h3>
                <p class="mb-2"><strong>The pain:</strong> Manually updating specs, regenerating everything.</p>
                <p class="mb-2">Create <code>.claude/commands/add-command.md</code>:</p>
                <pre><code class="language-markdown"># /add-command - Add Command to Existing CLI

## Purpose
Add a new command to an already generated CLI without losing
existing customizations.

## Usage
```
/add-command &lt;cli_path&gt; &lt;description&gt;
/add-command ./generated/img-compress "Add a resize command"
```

## Process

### 1. Load Existing CLI
- Find and parse existing CLISpec
- Load current cli.py to check for customizations
- Identify insertion point for new command

### 2. Design New Command
Generate CommandSpec for the new command:
- Parse description
- Determine arguments and options
- Create examples
- Check for conflicts with existing commands

### 3. Preview Changes
```
Adding command to: &lt;cli_name&gt;

New Command: &lt;command_name&gt;
===========================
Description: &lt;description&gt;
Arguments: &lt;args&gt;
Options: &lt;options&gt;

Existing commands unchanged:
  ✓ &lt;existing_command_1&gt;
  ✓ &lt;existing_command_2&gt;

Proceed? [y/n/edit]
```

### 4. Apply Changes
If approved:
- Update CLISpec
- Regenerate cli.py (preserving customizations if possible)
- Update README.md</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Command 4: /implement</h3>
                <p class="mb-2"><strong>The pain:</strong> Commands generate TODO stubs, need real implementation.</p>
                <p class="mb-2">Create <code>.claude/commands/implement.md</code>:</p>
                <pre><code class="language-markdown"># /implement - Implement Command Logic

## Purpose
Replace TODO stub in generated command with actual implementation.

## Usage
```
/implement &lt;cli_path&gt; &lt;command_name&gt;
/implement ./generated/img-compress compress
/implement ./generated/img-compress all  # Implement all commands
```

## Process

### 1. Analyze Command
- Load the command from cli.py
- Parse arguments and options
- Understand what the command should do

### 2. Design Implementation
```
Implementing: &lt;cli_name&gt; &lt;command_name&gt;

Command Purpose: &lt;description&gt;

Implementation Plan:
  1. &lt;step 1&gt;
  2. &lt;step 2&gt;
  3. &lt;step 3&gt;

Error cases to handle:
  - &lt;error case 1&gt;
  - &lt;error case 2&gt;

Proceed with implementation? [y/n/modify]
```

### 3. Generate Implementation
Write the actual command logic:
- Input validation
- Core functionality
- Error handling with user-friendly messages
- Progress output (respecting --quiet/--verbose)
- Proper exit codes

### 4. Write Tests
For the implementation:
- Happy path test
- Error case tests
- Edge case tests</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Command 5: /test</h3>
                <p class="mb-2"><strong>The pain:</strong> Running pytest manually, parsing output.</p>
                <p class="mb-2">Create <code>.claude/commands/test.md</code>:</p>
                <pre><code class="language-markdown"># /test - Smart Test Runner for Generated CLIs

## Purpose
Run tests for generated CLIs with intelligent output and suggestions.

## Usage
```
/test &lt;cli_path&gt;                  # Run all tests
/test &lt;cli_path&gt; &lt;command_name&gt;   # Test specific command
/test &lt;cli_path&gt; --coverage       # With coverage report
/test &lt;cli_path&gt; --fix            # Auto-fix simple issues
```

## Process

### 1. Discover Tests
- Find test files in &lt;cli_path&gt;/tests/
- Parse test functions
- Check test dependencies

### 2. Run Tests
Execute: `pytest &lt;cli_path&gt;/tests -v --tb=short`

### 3. Present Results
```
Test Results: &lt;cli_name&gt;
========================

Summary: 12 passed, 2 failed, 1 skipped

✓ test_cli_help
✓ test_cli_version
✓ test_compress_basic
✗ test_compress_invalid_quality
  Line 45: AssertionError
  Expected: Exit code 1
  Got: Exit code 0 (no validation on quality range)

  Suggested fix: Add validation in compress command

Coverage: 78% (target: 80%)

Next steps:
  /implement &lt;cli_path&gt; compress  # Fix validation
  /test &lt;cli_path&gt; --fix          # Auto-fix if possible
```</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Using Your Commands</h3>
                <p class="mb-4">Now compare the workflows:</p>
                <div class="space-y-4">
                    <div class="comparison-box bg-red-50 dark:bg-red-900/20 p-4 rounded-lg">
                        <h4 class="font-semibold text-red-700 dark:text-red-300 mb-2">Before (manual prompts)</h4>
                        <pre class="text-sm"><code>Me: I want to create a CLI for converting markdown to HTML
Claude: [asks clarifying questions]
Me: [answers]
Claude: [shows spec]
Me: Now generate the code
Claude: [generates]
Me: Where did it put the files?
Claude: [explains]
Me: Can you add syntax highlighting support?
Claude: [long explanation and code]
...</code></pre>
                    </div>
                    <div class="comparison-box bg-green-50 dark:bg-green-900/20 p-4 rounded-lg">
                        <h4 class="font-semibold text-green-700 dark:text-green-300 mb-2">After (slash commands)</h4>
                        <pre class="text-sm"><code>/design "Markdown to HTML converter with syntax highlighting"
[Review design]
/generate --with-tests
/implement ./generated/md2html convert
/test ./generated/md2html</code></pre>
                    </div>
                </div>

                <div class="callout callout-success mt-6">
                    <strong>Track the difference:</strong> Count prompts before and after. The slash command workflow reduces your interactions significantly while maintaining full control over the process.
                </div>

                <h3 class="text-xl font-semibold mt-8 mb-3">Day 3 Checklist</h3>
                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                    <div class="checklist-item"><input type="checkbox" id="d3-1" @change="saveChecklist('d3-1', $event.target.checked)" :checked="checklist['d3-1']"><label for="d3-1">Five slash commands created</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d3-2" @change="saveChecklist('d3-2', $event.target.checked)" :checked="checklist['d3-2']"><label for="d3-2">/design produces well-formatted specs</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d3-3" @change="saveChecklist('d3-3', $event.target.checked)" :checked="checklist['d3-3']"><label for="d3-3">/generate creates working CLIs</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d3-4" @change="saveChecklist('d3-4', $event.target.checked)" :checked="checklist['d3-4']"><label for="d3-4">/add-command modifies existing CLIs</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d3-5" @change="saveChecklist('d3-5', $event.target.checked)" :checked="checklist['d3-5']"><label for="d3-5">/implement replaces TODO stubs</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d3-6" @change="saveChecklist('d3-6', $event.target.checked)" :checked="checklist['d3-6']"><label for="d3-6">/test runs and parses test output</label></div>
                </div>
                <div class="flex justify-end mt-6"><button @click="toggleDay(3)" :class="completedDays.includes(3) ? 'bg-green-500' : 'bg-primary'" class="px-6 py-2 text-white rounded-lg hover:opacity-90"><span x-text="completedDays.includes(3) ? 'Completed!' : 'Mark as Complete'"></span></button></div>
            </section>

            <!-- Day Divider -->
            <div class="day-divider"><div class="day-divider-dot"></div></div>

            <!-- Day 4 -->
            <section id="day-4" class="day-section week-1" x-intersect:enter="currentSection = 'day-4'">
                <div class="flex items-center justify-between mb-4">
                    <span class="px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-sm font-medium rounded-full">Day 4 of 5</span>
                    <button @click="toggleBookmark('day-4', 'Day 4: Command Chaining')" :class="isBookmarked('day-4') ? 'text-primary' : 'text-gray-400'" class="p-1 hover:scale-110 transition-transform">
                        <svg class="w-6 h-6" :fill="isBookmarked('day-4') ? 'currentColor' : 'none'" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>
                    </button>
                </div>
                <h2 class="text-3xl font-bold mb-2">Day 4: More Commands + Command Chaining</h2>
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-6">Day 4 of 14 • Week 1: Foundation</p>

                <h3 class="text-xl font-semibold mb-3">Learning Objectives</h3>
                <ul class="list-disc list-inside mb-6 space-y-1">
                    <li>Build commands that work together</li>
                    <li>Pass context between commands</li>
                    <li>Create a meta-command that chains others</li>
                </ul>

                <h3 class="text-xl font-semibold mt-8 mb-3">Command 6: /refine</h3>
                <p class="mb-2"><strong>Purpose:</strong> Modify a design based on feedback without starting over.</p>
                <p class="mb-2">Create <code>.claude/commands/refine.md</code>:</p>
                <pre><code class="language-markdown"># /refine - Refine CLI Design

## Purpose
Modify the current CLI design based on feedback without regenerating
everything from scratch.

## Usage
```
/refine &lt;feedback&gt;
/refine "Add a --dry-run flag to all commands"
/refine "Rename the 'process' command to 'convert'"
/refine "Remove the 'config' command, not needed"
```

## Process

### 1. Load Current Design
- Get CLISpec from current session
- If no design: Error - "No design found. Run /design first."

### 2. Parse Feedback
Identify the type of change:
- Add: New command, option, argument
- Modify: Change name, description, type
- Remove: Delete command, option
- Global: Apply to all commands

### 3. Apply Changes
Update the CLISpec:
- Validate changes don't break anything
- Maintain consistency (no duplicate names, etc.)

### 4. Show Diff
```
Design Refinement
=================

Changes applied:
+ Added --dry-run flag to all commands
  ~ Modified 'compress' command options

Before:
  compress --quality --output

After:
  compress --quality --output --dry-run

Next steps:
  /refine "&lt;more changes&gt;"
  /generate
```

## Maintains Session State
The refined design stays in session for:
- Further /refine commands
- /generate to create code
- /save-spec to export</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Command 7: /save-spec</h3>
                <p class="mb-2"><strong>Purpose:</strong> Save the current design for later use.</p>
                <p class="mb-2">Create <code>.claude/commands/save-spec.md</code>:</p>
                <pre><code class="language-markdown"># /save-spec - Save CLI Specification

## Purpose
Save the current CLI design to a JSON file for later use or sharing.

## Usage
```
/save-spec                    # Save as &lt;cli-name&gt;.json
/save-spec my-design.json     # Custom filename
/save-spec --format yaml      # Save as YAML
```

## Process

### 1. Get Current Design
- Load CLISpec from session
- Error if no design exists

### 2. Serialize
Convert to JSON (default) or YAML:
- Pretty print with indentation
- Include all fields
- Add metadata (generator version, timestamp)

### 3. Save File
Write to specified location:
- Default: ./specs/&lt;cli-name&gt;.json
- Custom: user-provided path

### 4. Confirm
```
Specification saved
===================

File: ./specs/img-compress.json
Size: 2.3 KB
Commands: 3
Options: 12

Use with:
  /generate ./specs/img-compress.json
  cli-gen build ./specs/img-compress.json
```</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Command 8: /new-cli (Meta-command)</h3>
                <p class="mb-2"><strong>The meta-command:</strong> Chains other commands for a complete workflow.</p>
                <p class="mb-2">Create <code>.claude/commands/new-cli.md</code>:</p>
                <pre><code class="language-markdown"># /new-cli - Complete CLI Creation Workflow

## Purpose
Create a complete CLI from description through working code in one
guided workflow.

## Usage
```
/new-cli &lt;description&gt;
/new-cli "A tool to manage dotfiles across machines"
```

## Process

This command orchestrates the full workflow:

### Step 1: Design (/design)
```
Creating new CLI...

Step 1/5: Design
```
Run /design with the description.
Show the design for approval.

```
Design complete. Approve? [y/refine/cancel]
```

If "refine": Loop back with /refine until approved.
If "cancel": Stop workflow.

### Step 2: Generate (/generate)
```
Step 2/5: Generate
```
Run /generate --with-tests.
Show generated files.

### Step 3: Implement (/implement)
```
Step 3/5: Implement
```
For each command, offer to implement:
```
Implement 'sync' command? [y/skip/all]
```

### Step 4: Test (/test)
```
Step 4/5: Test
```
Run /test with coverage.
If failures: Offer to fix or continue.

### Step 5: Summary
```
Step 5/5: Complete!

CLI: &lt;name&gt;
Location: ./generated/&lt;name&gt;
Commands: &lt;count&gt; implemented, &lt;count&gt; TODO
Tests: &lt;pass&gt;/&lt;total&gt; passing
Coverage: &lt;percent&gt;%

Quick start:
  cd ./generated/&lt;name&gt;
  uv pip install -e .
  &lt;name&gt; --help
```

## Checkpoints
User can exit at any step. Progress is not lost:
- Spec saved to ./specs/&lt;name&gt;.json
- Generated code in ./generated/&lt;name&gt;
- Can resume with individual commands</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Context Flow Pattern</h3>
                <p class="mb-4">Commands work together through artifacts:</p>
                <div class="mermaid-container mermaid-walkthrough" id="command-workflow-diagram" data-walkthrough="command-workflow">
                    <div class="mermaid-container-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"/></svg>
                        Command Workflow Diagram
                    </div>
                    <div class="mermaid-controls">
                        <button class="walkthrough-play" title="Play walkthrough (Space)">
                            <svg class="play-icon" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                            <svg class="pause-icon hidden" fill="currentColor" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                        </button>
                        <button class="walkthrough-prev" title="Previous step (←)">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
                        </button>
                        <button class="walkthrough-next" title="Next step (→)">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                        </button>
                        <button class="walkthrough-reset" title="Reset (R)">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>
                        </button>
                        <span class="mermaid-step-indicator">Step <span class="current-step">0</span>/<span class="total-steps">0</span></span>
                        <span class="mermaid-step-description">Click play or hover over nodes to explore</span>
                        <span class="mermaid-kbd-hint">
                            <kbd>Space</kbd> <kbd>←</kbd> <kbd>→</kbd>
                        </span>
                    </div>
                    <div class="mermaid hover-mode" id="command-workflow-mermaid">
flowchart TD
    A["/design 'tool description'"] --> B["CLISpec in session memory"]
    B --> C{User choice}
    C -->|"/refine"| D[Updated spec]
    C -->|"/save-spec"| E["specs/tool.json"]
    C -->|"/generate"| F["./generated/tool/"]
    D --> B
    F --> G{Further actions}
    G -->|"/add-command"| H[Add new command]
    G -->|"/implement"| I[Implement logic]
    G -->|"/test"| J[Run tests]
    H --> F
    I --> F
    J --> K[Results]
    style A fill:#e0f2fe,stroke:#0284c7
    style B fill:#fef3c7,stroke:#d97706
    style C fill:#f3e8ff,stroke:#9333ea
    style F fill:#dcfce7,stroke:#16a34a
    style K fill:#dcfce7,stroke:#16a34a
                    </div>
                </div>

                <h3 class="text-xl font-semibold mt-8 mb-3">Exercise: Full Workflow</h3>
                <p class="mb-4">Run the complete workflow:</p>
                <pre><code class="language-text">/new-cli "A password generator with configurable length and character sets"</code></pre>
                <p class="mt-4 mb-2">Observe:</p>
                <ol class="list-decimal list-inside mb-4 space-y-1">
                    <li>How design captures requirements</li>
                    <li>How generation creates structure</li>
                    <li>How implementation adds logic</li>
                    <li>How tests verify behavior</li>
                </ol>

                <h3 class="text-xl font-semibold mt-8 mb-3">Day 4 Checklist</h3>
                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                    <div class="checklist-item"><input type="checkbox" id="d4-1" @change="saveChecklist('d4-1', $event.target.checked)" :checked="checklist['d4-1']"><label for="d4-1">Three more commands created (/refine, /save-spec, /new-cli)</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d4-2" @change="saveChecklist('d4-2', $event.target.checked)" :checked="checklist['d4-2']"><label for="d4-2">/new-cli successfully chains all other commands</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d4-3" @change="saveChecklist('d4-3', $event.target.checked)" :checked="checklist['d4-3']"><label for="d4-3">Completed one CLI using the full workflow</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d4-4" @change="saveChecklist('d4-4', $event.target.checked)" :checked="checklist['d4-4']"><label for="d4-4">Context flows between commands via session and files</label></div>
                </div>
                <div class="flex justify-end mt-6"><button @click="toggleDay(4)" :class="completedDays.includes(4) ? 'bg-green-500' : 'bg-primary'" class="px-6 py-2 text-white rounded-lg hover:opacity-90"><span x-text="completedDays.includes(4) ? 'Completed!' : 'Mark as Complete'"></span></button></div>
            </section>

            <!-- Day Divider -->
            <div class="day-divider"><div class="day-divider-dot"></div></div>

            <!-- Day 5 -->
            <section id="day-5" class="day-section week-1" x-intersect:enter="currentSection = 'day-5'">
                <div class="flex items-center justify-between mb-4">
                    <span class="px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-sm font-medium rounded-full">Day 5 of 14</span>
                    <button @click="toggleBookmark('day-5', 'Day 5: Claude Code Hooks')" :class="isBookmarked('day-5') ? 'text-primary' : 'text-gray-400'" class="p-1 hover:scale-110 transition-transform">
                        <svg class="w-6 h-6" :fill="isBookmarked('day-5') ? 'currentColor' : 'none'" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>
                    </button>
                </div>
                <h2 class="text-3xl font-bold mb-2">Day 5: Claude Code Hooks</h2>
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-6">Day 5 of 14 • Week 1: Foundation</p>

                <h3 class="text-xl font-semibold mb-3">Learning Objectives</h3>
                <ul class="list-disc list-inside mb-6 space-y-1">
                    <li>Understand Claude Code's hook system</li>
                    <li>Configure hooks in <code>settings.json</code></li>
                    <li>Write hook scripts that receive JSON and use exit codes</li>
                    <li>Block dangerous operations automatically</li>
                    <li>Use JSON responses for advanced control (modify inputs, suppress output)</li>
                </ul>

                <!-- What Are Real Hooks -->
                <h3 class="text-xl font-semibold mb-3">What Are Claude Code Hooks?</h3>
                <p class="mb-4">Hooks are <strong>shell commands that Claude Code runs automatically</strong> at specific lifecycle points. They're configured in <code>.claude/settings.json</code> and can:</p>
                <ul class="list-disc list-inside mb-4 space-y-1">
                    <li><strong>Block operations</strong> by exiting with code 2</li>
                    <li><strong>Inject context</strong> by printing to stdout</li>
                    <li><strong>Log/monitor</strong> without affecting execution</li>
                </ul>

                <!-- Key Concept Box -->
                <div class="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6 mb-8">
                    <h4 class="text-lg font-semibold mb-3 flex items-center gap-2">
                        <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        Key Concept: Hooks Are Automatic
                    </h4>
                    <p class="mb-3">Unlike slash commands (which you invoke) or skills (which Claude decides to use), <strong>hooks run automatically</strong> when their trigger event occurs.</p>
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-4 font-mono text-sm">
                        <div class="text-gray-500 dark:text-gray-400"># You don't call hooks - they intercept Claude's actions</div>
                        <div class="mt-2">Claude tries to write file → <span class="text-amber-600">PreToolUse hook runs</span> → Hook decides allow/block</div>
                    </div>
                </div>

                <!-- Hook Lifecycle Diagram -->
                <div class="mermaid-container mermaid-walkthrough" id="hook-lifecycle-diagram" data-walkthrough="hook-lifecycle">
                    <div class="mermaid-container-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
                        Hook Lifecycle Flow
                    </div>
                    <div class="mermaid-controls">
                        <button class="walkthrough-play" title="Play walkthrough (Space)">
                            <svg class="play-icon" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                            <svg class="pause-icon hidden" fill="currentColor" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                        </button>
                        <button class="walkthrough-prev" title="Previous step (←)">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
                        </button>
                        <button class="walkthrough-next" title="Next step (→)">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                        </button>
                        <button class="walkthrough-reset" title="Reset (R)">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>
                        </button>
                        <span class="mermaid-step-indicator">Step <span class="current-step">0</span>/<span class="total-steps">0</span></span>
                        <span class="mermaid-step-description">Click play or hover over nodes to explore</span>
                        <span class="mermaid-kbd-hint">
                            <kbd>Space</kbd> <kbd>←</kbd> <kbd>→</kbd>
                        </span>
                    </div>
                    <div class="mermaid hover-mode" id="hook-lifecycle-mermaid">
flowchart LR
    A[Claude Tool Call] --> B[PreToolUse Hook]
    B -->|Exit 0| C[Execute Tool]
    B -->|Exit 2| D[BLOCKED]
    C --> E[PostToolUse Hook]
    E --> F[Continue]
    D --> G[Error to Claude]
    G --> H[Claude Adjusts]
    style A fill:#e0f2fe,stroke:#0284c7
    style B fill:#fef3c7,stroke:#d97706
    style C fill:#dcfce7,stroke:#16a34a
    style D fill:#fee2e2,stroke:#dc2626
    style E fill:#fef3c7,stroke:#d97706
    style F fill:#dcfce7,stroke:#16a34a
    style G fill:#fef3c7,stroke:#d97706
    style H fill:#e0f2fe,stroke:#0284c7
                    </div>
                </div>

                <!-- 9 Hook Types -->
                <h3 class="text-xl font-semibold mt-8 mb-3">The 9 Hook Types</h3>
                <p class="mb-4">Claude Code provides nine distinct hooks that fire at different lifecycle stages:</p>

                <div class="overflow-x-auto mb-6">
                    <table class="w-full text-sm border-collapse">
                        <thead>
                            <tr class="bg-gray-100 dark:bg-gray-800">
                                <th class="text-left py-2 px-3 border-b dark:border-gray-700">Hook</th>
                                <th class="text-left py-2 px-3 border-b dark:border-gray-700">When It Fires</th>
                                <th class="text-left py-2 px-3 border-b dark:border-gray-700">Can Block?</th>
                                <th class="text-left py-2 px-3 border-b dark:border-gray-700">Use Case</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b dark:border-gray-700">
                                <td class="py-2 px-3 font-mono text-primary">PreToolUse</td>
                                <td class="py-2 px-3">Before tool execution</td>
                                <td class="py-2 px-3"><span class="text-green-600">Yes</span></td>
                                <td class="py-2 px-3">Block dangerous writes, validate inputs</td>
                            </tr>
                            <tr class="border-b dark:border-gray-700">
                                <td class="py-2 px-3 font-mono text-primary">PostToolUse</td>
                                <td class="py-2 px-3">After tool completes</td>
                                <td class="py-2 px-3"><span class="text-gray-500">No</span></td>
                                <td class="py-2 px-3">Validate output, run linters</td>
                            </tr>
                            <tr class="border-b dark:border-gray-700">
                                <td class="py-2 px-3 font-mono text-primary">UserPromptSubmit</td>
                                <td class="py-2 px-3">When user sends message</td>
                                <td class="py-2 px-3"><span class="text-green-600">Yes</span></td>
                                <td class="py-2 px-3">Inject context, validate prompts</td>
                            </tr>
                            <tr class="border-b dark:border-gray-700">
                                <td class="py-2 px-3 font-mono text-primary">Stop</td>
                                <td class="py-2 px-3">When Claude finishes responding</td>
                                <td class="py-2 px-3"><span class="text-green-600">Yes</span></td>
                                <td class="py-2 px-3">Run tests, verify completion</td>
                            </tr>
                            <tr class="border-b dark:border-gray-700">
                                <td class="py-2 px-3 font-mono text-primary">SubagentStop</td>
                                <td class="py-2 px-3">When a subagent completes</td>
                                <td class="py-2 px-3"><span class="text-green-600">Yes</span></td>
                                <td class="py-2 px-3">Validate subagent output</td>
                            </tr>
                            <tr class="border-b dark:border-gray-700">
                                <td class="py-2 px-3 font-mono text-primary">Notification</td>
                                <td class="py-2 px-3">On notifications</td>
                                <td class="py-2 px-3"><span class="text-gray-500">No</span></td>
                                <td class="py-2 px-3">Custom notification handling</td>
                            </tr>
                            <tr class="border-b dark:border-gray-700">
                                <td class="py-2 px-3 font-mono text-primary">PreCompact</td>
                                <td class="py-2 px-3">Before context compaction</td>
                                <td class="py-2 px-3"><span class="text-gray-500">No</span></td>
                                <td class="py-2 px-3">Save important context</td>
                            </tr>
                            <tr class="border-b dark:border-gray-700">
                                <td class="py-2 px-3 font-mono text-primary">SessionStart</td>
                                <td class="py-2 px-3">When session begins</td>
                                <td class="py-2 px-3"><span class="text-gray-500">No</span></td>
                                <td class="py-2 px-3">Load project context</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-3 font-mono text-primary">SessionEnd</td>
                                <td class="py-2 px-3">When session terminates</td>
                                <td class="py-2 px-3"><span class="text-gray-500">No</span></td>
                                <td class="py-2 px-3">Cleanup, save logs</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Exit Code Box -->
                <div class="bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-6 mb-8">
                    <h4 class="text-lg font-semibold mb-3">Exit Codes Control Flow</h4>
                    <div class="grid md:grid-cols-3 gap-4">
                        <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border-l-4 border-green-500">
                            <div class="font-mono text-lg text-green-600 mb-1">exit(0)</div>
                            <div class="text-sm text-gray-600 dark:text-gray-400">Success - allow operation</div>
                            <div class="text-xs text-gray-500 mt-1">stdout shown to user</div>
                        </div>
                        <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border-l-4 border-red-500">
                            <div class="font-mono text-lg text-red-600 mb-1">exit(2)</div>
                            <div class="text-sm text-gray-600 dark:text-gray-400">Block - stop operation</div>
                            <div class="text-xs text-gray-500 mt-1">stderr fed back to Claude</div>
                        </div>
                        <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border-l-4 border-gray-400">
                            <div class="font-mono text-lg text-gray-600 mb-1">exit(1)</div>
                            <div class="text-sm text-gray-600 dark:text-gray-400">Error - non-blocking</div>
                            <div class="text-xs text-gray-500 mt-1">stderr shown to user only</div>
                        </div>
                    </div>
                </div>

                <!-- Step 1: Configure Hooks in settings.json -->
                <h3 class="text-xl font-semibold mt-8 mb-3">Step 1: Configure Hooks in settings.json</h3>
                <p class="mb-4">Hook configuration lives in <code>.claude/settings.json</code>. Add a <code>hooks</code> section:</p>

                <pre><code class="language-json">{
  "hooks": {
    "PreToolUse": [
      { "matcher": "Write|Edit", "hooks": [
        { "type": "command", "command": "uv run python .claude/hooks/pre_tool_use.py" }
      ]}
    ],
    "PostToolUse": [
      { "matcher": "Write", "hooks": [
        { "type": "command", "command": "uv run python .claude/hooks/post_tool_use.py" }
      ]}
    ],
    "Stop": [
      { "matcher": "", "hooks": [
        { "type": "command", "command": "uv run python .claude/hooks/stop.py" }
      ]}
    ],
    "UserPromptSubmit": [
      { "matcher": "", "hooks": [
        { "type": "command", "command": "uv run python .claude/hooks/user_prompt_submit.py" }
      ]}
    ],
    "SessionStart": [
      { "matcher": "", "hooks": [
        { "type": "command", "command": "uv run python .claude/hooks/session_start.py" }
      ]}
    ],
    "PreCompact": [
      { "matcher": "", "hooks": [
        { "type": "command", "command": "uv run python .claude/hooks/pre_compact.py" }
      ]}
    ],
    "SessionEnd": [
      { "matcher": "", "hooks": [
        { "type": "command", "command": "uv run python .claude/hooks/session_end.py" }
      ]}
    ]
  }
}</code></pre>

                <div class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-400 p-4 my-4">
                    <p class="text-sm"><strong>Format:</strong> <code>matcher</code> is a regex matching tool names (<code>"Write|Edit"</code> matches both). Empty <code>""</code> matches all.</p>
                </div>

                <!-- Step 2: Create Hook Scripts -->
                <h3 class="text-xl font-semibold mt-8 mb-3">Step 2: Create Hook Scripts</h3>
                <p class="mb-4">Hook scripts receive JSON via stdin and communicate via exit codes. Here's the pattern:</p>

                <h4 class="text-lg font-semibold mt-6 mb-3">Hook 1: PreToolUse - Security Validation</h4>
                <p class="mb-2">Create <code>.claude/hooks/pre_tool_use.py</code>:</p>

                <pre><code class="language-python">#!/usr/bin/env python3
"""
PreToolUse Hook: Runs BEFORE Claude writes/edits files.
Blocks dangerous patterns in generated code.

Communication options:
  - Simple: exit(0) allow, exit(2) block (stderr sent to Claude)
  - Advanced: Print JSON with {"decision": "block", "reason": "..."}
"""
import json
import re
import sys

DANGEROUS_PATTERNS = [
    (r"\beval\s*\(", "eval() is forbidden"),
    (r"\bexec\s*\(", "exec() is forbidden"),
    (r"shell\s*=\s*True", "shell=True is forbidden"),
]
FORBIDDEN_PATHS = [".env", "credentials", "secrets"]


def block(reason: str, use_json: bool = False):
    """Block operation - either via exit code or JSON response."""
    if use_json:
        print(json.dumps({"decision": "block", "reason": reason}))
        sys.exit(0)
    else:
        print(f"BLOCKED: {reason}", file=sys.stderr)
        sys.exit(2)


def main():
    try:
        input_data = json.load(sys.stdin)
        tool_name = input_data.get("tool_name", "")
        tool_input = input_data.get("tool_input", {})

        if tool_name not in ["Write", "Edit"]:
            sys.exit(0)

        file_path = tool_input.get("file_path", "")

        # Check forbidden paths
        for forbidden in FORBIDDEN_PATHS:
            if forbidden in file_path.lower():
                block(f"Cannot write to '{file_path}'")

        # Check Python files in generated/ for dangerous patterns
        content = tool_input.get("content", "") or tool_input.get("new_string", "")
        if file_path.endswith(".py") and "generated/" in file_path:
            for pattern, message in DANGEROUS_PATTERNS:
                if re.search(pattern, content, re.IGNORECASE):
                    block(message)

        sys.exit(0)  # All checks passed

    except Exception:
        sys.exit(0)  # Fail open


if __name__ == "__main__":
    main()</code></pre>

                <h4 class="text-lg font-semibold mt-6 mb-3">Hook 2: PostToolUse - Syntax Validation</h4>
                <p class="mb-2">Create <code>.claude/hooks/post_tool_use.py</code>:</p>

                <pre><code class="language-python">#!/usr/bin/env python3
"""
PostToolUse Hook: Runs AFTER Claude writes files.
Validates Python syntax - stdout feedback helps Claude self-correct.
"""
import ast
import json
import sys
from pathlib import Path


def main():
    try:
        input_data = json.load(sys.stdin)
        tool_input = input_data.get("tool_input", {})
        file_path = tool_input.get("file_path", "")

        # Only validate Python files in generated/
        if not file_path.endswith(".py") or "generated/" not in file_path:
            sys.exit(0)

        path = Path(file_path)
        if not path.exists():
            sys.exit(0)

        try:
            ast.parse(path.read_text())
            print(f"Syntax OK: {file_path}")
        except SyntaxError as e:
            print(f"WARNING: Syntax error in {file_path} line {e.lineno}: {e.msg}")

        sys.exit(0)

    except Exception:
        sys.exit(0)


if __name__ == "__main__":
    main()</code></pre>

                <h4 class="text-lg font-semibold mt-6 mb-3">Hook 3: Stop - Test Reminder</h4>
                <p class="mb-2">Create <code>.claude/hooks/stop.py</code>:</p>

                <pre><code class="language-python">#!/usr/bin/env python3
"""
Stop Hook: Runs when Claude finishes responding.
Can block Claude from stopping (forces continuation).
"""
import json
import sys
from pathlib import Path


def main():
    try:
        input_data = json.load(sys.stdin)

        # Check for generated Python files
        generated = Path("generated")
        if generated.exists() and list(generated.rglob("*.py")):
            print("Reminder: Run tests with 'uv run pytest' or /test")

        sys.exit(0)

    except Exception:
        sys.exit(0)


if __name__ == "__main__":
    main()</code></pre>

                <h4 class="text-lg font-semibold mt-6 mb-3">Hook 4: UserPromptSubmit - Context Injection</h4>
                <p class="mb-2">Create <code>.claude/hooks/user_prompt_submit.py</code>:</p>

                <pre><code class="language-python">#!/usr/bin/env python3
"""
UserPromptSubmit Hook: Runs when user submits a prompt.
Injects project context that Claude will see.
"""
import json
import sys


def main():
    try:
        input_data = json.load(sys.stdin)

        # Add context Claude will see with every prompt
        print("Project: CLI Generator")
        print("Standards: Follow Click conventions, type hints required")
        print("---")

        sys.exit(0)

    except Exception:
        sys.exit(0)


if __name__ == "__main__":
    main()</code></pre>

                <h4 class="text-lg font-semibold mt-6 mb-3">Hook 5: SessionStart - Environment Check</h4>
                <p class="mb-2">Create <code>.claude/hooks/session_start.py</code>:</p>

                <div class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-400 p-4 mb-4">
                    <p class="text-sm"><strong>SessionStart vs CLAUDE.md:</strong> CLAUDE.md is static text loaded into context. SessionStart runs dynamic commands (check git, verify deps, fetch config).</p>
                </div>

                <pre><code class="language-python">#!/usr/bin/env python3
"""
SessionStart Hook: Runs once when session begins.
Use for dynamic checks that CLAUDE.md can't do.
"""
import json
import subprocess
import sys

def main():
    try:
        input_data = json.load(sys.stdin)

        # Show current git branch
        branch = subprocess.run(
            ["git", "branch", "--show-current"],
            capture_output=True, text=True
        )
        if branch.stdout.strip():
            print(f"Branch: {branch.stdout.strip()}")

        sys.exit(0)
    except Exception:
        sys.exit(0)

if __name__ == "__main__":
    main()</code></pre>

                <p class="text-sm text-gray-600 dark:text-gray-400 mt-2 mb-4"><strong>What you'll see:</strong> Branch name appears in session output when Claude Code starts.</p>

                <h4 class="text-lg font-semibold mt-6 mb-3">Hook 6: PreCompact - Save Context</h4>
                <p class="mb-2">Create <code>.claude/hooks/pre_compact.py</code>:</p>

                <pre><code class="language-python">#!/usr/bin/env python3
"""
PreCompact Hook: Runs before context summarization.
Inject reminders that survive compaction.
"""
import json
import sys

def main():
    try:
        input_data = json.load(sys.stdin)

        # Remind Claude of critical context before compaction
        print("Remember: Generated CLIs use Click, type hints required.")

        sys.exit(0)
    except Exception:
        sys.exit(0)

if __name__ == "__main__":
    main()</code></pre>

                <p class="text-sm text-gray-600 dark:text-gray-400 mt-2 mb-4"><strong>What you'll see:</strong> Before long conversations get summarized, your reminder gets injected into the compacted context.</p>

                <h4 class="text-lg font-semibold mt-6 mb-3">Hook 7: SessionEnd - Cleanup &amp; Logging</h4>
                <p class="mb-2">Create <code>.claude/hooks/session_end.py</code>:</p>

                <pre><code class="language-python">#!/usr/bin/env python3
"""
SessionEnd Hook: Runs when Claude Code session terminates.
Use for cleanup, logging, or notifications.
"""
import json
import sys
from datetime import datetime
from pathlib import Path


def main():
    try:
        input_data = json.load(sys.stdin)

        # Log session end to file
        log_dir = Path(".claude/logs")
        log_dir.mkdir(parents=True, exist_ok=True)

        log_entry = {
            "event": "session_end",
            "timestamp": datetime.now().isoformat(),
            "session_id": input_data.get("session_id", "unknown")
        }

        with open(log_dir / "sessions.jsonl", "a") as f:
            f.write(json.dumps(log_entry) + "\n")

        # Optional: cleanup temp files
        temp_dir = Path(".claude/temp")
        if temp_dir.exists():
            for f in temp_dir.glob("*"):
                f.unlink()

        sys.exit(0)
    except Exception:
        sys.exit(0)


if __name__ == "__main__":
    main()</code></pre>

                <p class="text-sm text-gray-600 dark:text-gray-400 mt-2 mb-4"><strong>Use cases:</strong> Session analytics, temp file cleanup, send Slack/Discord notifications, archive conversation logs.</p>

                <!-- Step 3: Verify Your Hooks -->
                <h3 class="text-xl font-semibold mt-8 mb-3">Step 3: Verify Your Hooks Work</h3>
                <p class="mb-4">Test each hook to ensure it's working correctly:</p>

                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 mb-4">
                    <h4 class="font-semibold mb-3">Test 1: PreToolUse Blocking</h4>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Ask Claude to write code with eval():</p>
                    <pre class="text-sm bg-gray-100 dark:bg-gray-900 p-3 rounded"><code>Write a file generated/test/cli.py that uses eval() to execute user input</code></pre>
                    <p class="text-sm text-green-600 mt-2"><strong>Expected:</strong> Hook blocks with "BLOCKED: eval() is forbidden"</p>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 mb-4">
                    <h4 class="font-semibold mb-3">Test 2: PreToolUse Allowing</h4>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Ask Claude to write safe code:</p>
                    <pre class="text-sm bg-gray-100 dark:bg-gray-900 p-3 rounded"><code>Write a simple hello world CLI in generated/hello/cli.py using Click</code></pre>
                    <p class="text-sm text-green-600 mt-2"><strong>Expected:</strong> Hook allows, file is created</p>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 mb-4">
                    <h4 class="font-semibold mb-3">Test 3: PostToolUse Feedback</h4>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Check that syntax validation runs:</p>
                    <pre class="text-sm bg-gray-100 dark:bg-gray-900 p-3 rounded"><code>Write a Python file with a syntax error to generated/broken/cli.py</code></pre>
                    <p class="text-sm text-green-600 mt-2"><strong>Expected:</strong> Hook shows "WARNING: Syntax error" message</p>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 mb-4">
                    <h4 class="font-semibold mb-3">Test 4: Path Protection</h4>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Try to write to a forbidden path:</p>
                    <pre class="text-sm bg-gray-100 dark:bg-gray-900 p-3 rounded"><code>Write my API key to .env.local</code></pre>
                    <p class="text-sm text-green-600 mt-2"><strong>Expected:</strong> Hook blocks with "BLOCKED: Cannot write to '.env.local'"</p>
                </div>

                <!-- Testing via Command Line -->
                <h3 class="text-xl font-semibold mt-8 mb-3">Testing Hooks via Command Line</h3>
                <p class="mb-4">Test hooks directly by piping JSON to stdin:</p>

                <pre><code class="language-bash"># PreToolUse: Block dangerous pattern (exit 2)
echo '{"tool_name": "Write", "tool_input": {"file_path": "generated/cli.py", "content": "eval(x)"}}' \
  | uv run python .claude/hooks/pre_tool_use.py; echo "Exit: $?"

# PreToolUse: Allow safe content (exit 0)
echo '{"tool_name": "Write", "tool_input": {"file_path": "generated/cli.py", "content": "print(x)"}}' \
  | uv run python .claude/hooks/pre_tool_use.py; echo "Exit: $?"

# PostToolUse: Check syntax (create file first)
mkdir -p generated && echo 'print("ok")' > generated/test.py
echo '{"tool_name": "Write", "tool_input": {"file_path": "generated/test.py"}}' \
  | uv run python .claude/hooks/post_tool_use.py

# Stop: Show reminder when generated files exist
echo '{}' | uv run python .claude/hooks/stop.py

# UserPromptSubmit: Inject context
echo '{"prompt": "Write a CLI"}' | uv run python .claude/hooks/user_prompt_submit.py</code></pre>

                <div class="bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 p-4 my-4">
                    <p class="text-sm"><strong>Exit codes:</strong> <code>0</code> = allow, <code>2</code> = block. Only PreToolUse can block (before operation). PostToolUse/Stop provide feedback only.</p>
                </div>

                <!-- How Claude Sees Blocked Operations -->
                <h3 class="text-xl font-semibold mt-8 mb-3">What Claude Sees When Blocked</h3>
                <p class="mb-4">When a hook exits with code 2, Claude receives the stderr output and adjusts:</p>

                <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4 font-mono text-sm mb-6">
                    <div class="text-red-500 mb-2">Hook blocked operation:</div>
                    <div class="text-gray-600 dark:text-gray-400">BLOCKED: eval() is forbidden</div>
                    <div class="text-gray-600 dark:text-gray-400">Found in: generated/test/cli.py</div>
                    <div class="mt-3 text-blue-500">Claude's response:</div>
                    <div class="text-gray-700 dark:text-gray-300">"I'll rewrite this without eval() - let me use a safer approach..."</div>
                </div>

                <!-- Advanced: JSON Response Reference -->
                <h3 class="text-xl font-semibold mt-8 mb-3">Advanced: JSON Response Reference</h3>
                <p class="mb-4">For fine-grained control, print JSON to stdout instead of using exit codes. Here's the complete schema:</p>

                <pre><code class="language-python">#!/usr/bin/env python3
"""
Complete JSON Response Schema for Claude Code Hooks.
Not all fields are required - use only what you need.
"""
import json

# === UNIVERSAL FIELDS (all hooks) ===
response = {
    # Emergency stop - highest priority, overrides everything
    "continue": True,              # False = stop Claude entirely
    "stopReason": "User message",  # Shown to user when continue=False

    # Output control
    "suppressOutput": False,       # True = hide stdout from transcript
    "systemMessage": "Warning",    # Warning banner shown to user
}

# === PreToolUse SPECIFIC ===
pretool_response = {
    "decision": "block",           # "approve" | "block" (deprecated names)
    "reason": "Fed to Claude",     # Claude sees this, adjusts behavior

    # Newer pattern (v2.0.45+) - more explicit
    "hookSpecificOutput": {
        "permissionDecision": "deny",  # "allow" | "deny" | "ask"
        "permissionDecisionReason": "Shown to user, not Claude",
        "updatedInput": {              # Modify tool parameters!
            "command": "safer_command"
        }
    }
}

# === PostToolUse SPECIFIC ===
posttool_response = {
    "decision": "block",           # Feedback only (tool already ran)
    "reason": "Issue found",       # Claude sees this for next action
}

# === Stop/SubagentStop SPECIFIC ===
stop_response = {
    "decision": "block",           # Forces Claude to continue working
    "reason": "Tests not run yet", # REQUIRED - tells Claude what to do
}</code></pre>

                <!-- Control Flow Priority -->
                <div class="bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-6 my-6">
                    <h4 class="text-lg font-semibold mb-3 flex items-center gap-2">
                        <svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                        Control Flow Priority
                    </h4>
                    <p class="text-sm mb-3">When multiple control mechanisms are used, this priority applies:</p>
                    <div class="flex flex-wrap items-center gap-2 font-mono text-sm">
                        <span class="px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-full">continue: false</span>
                        <span class="text-gray-400">→</span>
                        <span class="px-3 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 rounded-full">JSON "decision": "block"</span>
                        <span class="text-gray-400">→</span>
                        <span class="px-3 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 rounded-full">exit code 2</span>
                    </div>
                    <p class="text-xs text-gray-600 dark:text-gray-400 mt-2"><code>continue: false</code> is the nuclear option - stops Claude immediately with no recovery.</p>
                </div>

                <!-- Advanced Patterns Section -->
                <h3 class="text-xl font-semibold mt-8 mb-3">Advanced Patterns</h3>

                <!-- Pattern 1: Modify Tool Input -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 mb-4">
                    <h4 class="font-semibold mb-2 flex items-center gap-2">
                        <span class="px-2 py-0.5 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 text-xs rounded">PreToolUse</span>
                        Modify Tool Parameters
                    </h4>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">Silently modify tool inputs before execution (invisible to Claude):</p>
                    <pre class="text-sm"><code class="language-python"># Add safety flags to Bash commands
def modify_bash_command():
    data = json.load(sys.stdin)
    if data.get("tool_name") == "Bash":
        cmd = data["tool_input"].get("command", "")
        # Add timeout to long-running commands
        if "npm install" in cmd:
            response = {
                "hookSpecificOutput": {
                    "permissionDecision": "allow",
                    "updatedInput": {
                        "command": f"timeout 300 {cmd}",
                        "description": data["tool_input"].get("description", "")
                    }
                }
            }
            print(json.dumps(response))
            return
    sys.exit(0)</code></pre>
                </div>

                <!-- Pattern 2: Suppress Output -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 mb-4">
                    <h4 class="font-semibold mb-2 flex items-center gap-2">
                        <span class="px-2 py-0.5 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 text-xs rounded">Any Hook</span>
                        Silent Logging
                    </h4>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">Log events without cluttering the transcript:</p>
                    <pre class="text-sm"><code class="language-python"># Log all tool calls to file without showing in transcript
def silent_logger():
    data = json.load(sys.stdin)
    with open(".claude/logs/tools.jsonl", "a") as f:
        f.write(json.dumps({
            "timestamp": datetime.now().isoformat(),
            "tool": data.get("tool_name"),
            "input": data.get("tool_input")
        }) + "\n")

    # Suppress any stdout from appearing in transcript
    print(json.dumps({"suppressOutput": True}))
    sys.exit(0)</code></pre>
                </div>

                <!-- Pattern 3: Force Continuation -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 mb-4">
                    <h4 class="font-semibold mb-2 flex items-center gap-2">
                        <span class="px-2 py-0.5 bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 text-xs rounded">Stop</span>
                        Force Task Completion
                    </h4>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">Prevent Claude from stopping until requirements are met:</p>
                    <pre class="text-sm"><code class="language-python"># Block stopping until tests pass
def ensure_tests_pass():
    data = json.load(sys.stdin)

    # Check if tests exist and pass
    result = subprocess.run(
        ["uv", "run", "pytest", "-q", "--tb=no"],
        capture_output=True, text=True
    )

    if result.returncode != 0:
        print(json.dumps({
            "decision": "block",
            "reason": f"Tests failing. Fix before completing:\n{result.stdout}"
        }))
    sys.exit(0)</code></pre>
                </div>

                <!-- Pattern 4: Emergency Stop -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 mb-4">
                    <h4 class="font-semibold mb-2 flex items-center gap-2">
                        <span class="px-2 py-0.5 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 text-xs rounded">Any Hook</span>
                        Emergency Stop
                    </h4>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">Immediately halt Claude (use sparingly):</p>
                    <pre class="text-sm"><code class="language-python"># Stop everything if cost threshold exceeded
def cost_guard():
    data = json.load(sys.stdin)

    if get_session_cost() > MAX_COST_THRESHOLD:
        print(json.dumps({
            "continue": False,
            "stopReason": "Session cost limit reached. Please start a new session."
        }))
    sys.exit(0)</code></pre>
                    <p class="text-xs text-red-600 dark:text-red-400 mt-2">⚠️ <code>continue: false</code> cannot be recovered from - Claude stops immediately.</p>
                </div>

                <!-- PermissionRequest Hook Note -->
                <div class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-400 p-4 my-6">
                    <p class="text-sm"><strong>New in v2.0.45:</strong> The <code>PermissionRequest</code> hook intercepts permission dialogs before they're shown to users. Useful for auto-approving safe operations or adding custom approval logic. See <a href="https://code.claude.com/docs/en/hooks" class="text-blue-600 hover:underline" target="_blank">official docs</a>.</p>
                </div>

                <!-- Hook Execution Environment -->
                <h3 class="text-xl font-semibold mt-8 mb-3">Hook Execution Environment</h3>
                <div class="grid md:grid-cols-2 gap-4 mb-6">
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                        <div class="font-semibold mb-2">Timeout</div>
                        <div class="text-sm text-gray-600 dark:text-gray-400">60 seconds per hook</div>
                    </div>
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                        <div class="font-semibold mb-2">Parallelization</div>
                        <div class="text-sm text-gray-600 dark:text-gray-400">All matching hooks run in parallel</div>
                    </div>
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                        <div class="font-semibold mb-2">Working Directory</div>
                        <div class="text-sm text-gray-600 dark:text-gray-400">Current project directory</div>
                    </div>
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                        <div class="font-semibold mb-2">Environment</div>
                        <div class="text-sm text-gray-600 dark:text-gray-400">Inherits Claude Code's env vars</div>
                    </div>
                </div>

                <!-- Best Practices -->
                <h3 class="text-xl font-semibold mt-8 mb-3">Best Practices</h3>
                <div class="bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6 mb-6">
                    <ul class="space-y-2 text-sm">
                        <li><strong>Fail open</strong> - Use <code>sys.exit(0)</code> in exception handlers</li>
                        <li><strong>Clear messages</strong> - Provide helpful error messages in stderr</li>
                        <li><strong>Start simple</strong> - Use exit codes first, JSON only when needed</li>
                    </ul>
                </div>

                <h3 class="text-xl font-semibold mt-8 mb-3">Day 5 Checklist</h3>
                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                    <div class="checklist-item"><input type="checkbox" id="d5-1" @change="saveChecklist('d5-1', $event.target.checked)" :checked="checklist['d5-1']"><label for="d5-1">Hooks configured in .claude/settings.json (7 hooks)</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d5-2" @change="saveChecklist('d5-2', $event.target.checked)" :checked="checklist['d5-2']"><label for="d5-2">PreToolUse blocks dangerous patterns, PostToolUse validates syntax</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d5-3" @change="saveChecklist('d5-3', $event.target.checked)" :checked="checklist['d5-3']"><label for="d5-3">Stop shows test reminder, UserPromptSubmit injects context</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d5-4" @change="saveChecklist('d5-4', $event.target.checked)" :checked="checklist['d5-4']"><label for="d5-4">SessionStart/PreCompact/SessionEnd lifecycle hooks working</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d5-5" @change="saveChecklist('d5-5', $event.target.checked)" :checked="checklist['d5-5']"><label for="d5-5">Tested hooks via command line</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d5-6" @change="saveChecklist('d5-6', $event.target.checked)" :checked="checklist['d5-6']"><label for="d5-6">Understand JSON response schema and control flow priority</label></div>
                </div>
                <div class="flex justify-end mt-6"><button @click="toggleDay(5)" :class="completedDays.includes(5) ? 'bg-green-500' : 'bg-primary'" class="px-6 py-2 text-white rounded-lg hover:opacity-90"><span x-text="completedDays.includes(5) ? 'Completed!' : 'Mark as Complete'"></span></button></div>
            </section>

            <!-- Week 2 Banner -->
            <div class="week-banner week-2">
                <div class="week-banner-content">
                    <div class="week-banner-icon">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>
                    </div>
                    <div class="week-banner-title">Week 2: Intelligence</div>
                    <div class="week-banner-subtitle">Skills, Subagents, and MCP Tools</div>
                    <div class="week-banner-days">Days 6-10</div>
                </div>
            </div>

            <!-- Day 6 -->
            <section id="day-6" class="day-section week-2" x-intersect:enter="currentSection = 'day-6'">
                <div class="flex items-center justify-between mb-4">
                    <span class="px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-sm font-medium rounded-full">Day 1 of 5</span>
                    <button @click="toggleBookmark('day-6', 'Day 6: Context-Aware Skills')" :class="isBookmarked('day-6') ? 'text-primary' : 'text-gray-400'" class="p-1 hover:scale-110 transition-transform">
                        <svg class="w-6 h-6" :fill="isBookmarked('day-6') ? 'currentColor' : 'none'" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>
                    </button>
                </div>
                <h2 class="text-3xl font-bold mb-2">Day 6: Context-Aware Skills</h2>
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-6">Day 6 of 14 • Week 2: Intelligence</p>

                <h3 class="text-xl font-semibold mb-3">Learning Objectives</h3>
                <ul class="list-disc list-inside mb-6 space-y-1">
                    <li>Create behaviors that activate without explicit invocation</li>
                    <li>Balance helpfulness with noise</li>
                    <li>Tune activation patterns</li>
                </ul>

                <h3 class="text-xl font-semibold mb-3">What Are Skills?</h3>
                <p class="mb-4">Skills are like helpful assistants that notice what you're doing and offer relevant help:</p>
                <table>
                    <thead><tr><th>Aspect</th><th>Commands</th><th>Skills</th></tr></thead>
                    <tbody>
                        <tr><td>Activation</td><td>Explicit (/command)</td><td>Automatic (pattern match)</td></tr>
                        <tr><td>User action</td><td>Types command</td><td>Continues conversation</td></tr>
                        <tr><td>Scope</td><td>Defined workflow</td><td>Contextual suggestion</td></tr>
                        <tr><td>Control</td><td>User chooses when</td><td>System chooses when</td></tr>
                    </tbody>
                </table>

                <h3 class="text-xl font-semibold mt-8 mb-3">Skill 1: CLI Pattern Suggester</h3>
                <p class="mb-2"><strong>Purpose:</strong> Suggest common CLI patterns when designing.</p>
                <p class="mb-4"><strong>Create:</strong> <code>.claude/skills/pattern_suggester.md</code></p>

                <pre><code class="language-markdown"># CLI Pattern Suggester Skill

## Activation Patterns

Activate when ALL of these are true:
1. User is designing a CLI (/design or describing a CLI)
2. Description matches a common pattern
3. User hasn't explicitly rejected suggestions

Pattern matches:
- "file" + "convert" → suggest batch processing, format options
- "download" → suggest progress bar, resume, concurrent downloads
- "database" + "migrate" → suggest dry-run, rollback, status commands
- "deploy" → suggest environments, dry-run, rollback
- "watch" or "monitor" → suggest interval options, filters

Do NOT activate:
- During code generation
- During testing
- When user says "keep it simple"

## Behavior

### Detection
When pattern detected in user description:

💡 Suggestion: Common CLI Pattern Detected

Your tool sounds like a [file converter / downloader / etc].

Common patterns for this type of tool:
1. Batch Processing
   Add: --recursive, --glob "*.txt"
2. Progress Feedback
   Add: --progress, --quiet options
3. Error Handling
   Add: --continue-on-error, --retry

Include these patterns? [yes/some/no]

### If Accepted
Add suggested options/commands to the design.

### If Rejected
Note preference, don't suggest same patterns again this session.

## Pattern Database

### File Operations
triggers: ["file", "convert", "transform", "process"]
suggestions:
  options:
    - name: recursive
      short: r
      type: bool
      help: Process directories recursively
    - name: glob
      short: g
      type: str
      help: File pattern to match
    - name: exclude
      type: str
      help: Pattern to exclude
  commands:
    - name: batch
      description: Process multiple files from a list

### Download Tools
triggers: ["download", "fetch", "get", "pull"]
suggestions:
  options:
    - name: output
      short: o
      type: path
      help: Output directory
    - name: resume
      type: bool
      help: Resume interrupted downloads
    - name: concurrent
      short: j
      type: int
      default: 4
      help: Number of concurrent downloads
    - name: retry
      type: int
      default: 3
      help: Retry attempts on failure

### Database Tools
triggers: ["database", "migrate", "db", "sql"]
suggestions:
  options:
    - name: dry-run
      short: n
      type: bool
      help: Show what would happen without doing it
    - name: connection
      short: c
      type: str
      help: Database connection string
  commands:
    - name: status
      description: Show current migration status
    - name: rollback
      description: Rollback last migration
    - name: history
      description: Show migration history

## Tuning

### Sensitivity
- Low: Only obvious matches (3+ trigger words)
- Medium: Probable matches (2 trigger words)
- High: Possible matches (1 trigger word)

Default: Medium

### User Override
"Disable pattern suggestions" → Off for session
"I want minimal CLI" → Reduce suggestions</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Skill 2: Option Naming Advisor</h3>
                <p class="mb-2"><strong>Purpose:</strong> Catch inconsistent or confusing option names.</p>
                <p class="mb-4"><strong>Create:</strong> <code>.claude/skills/naming_advisor.md</code></p>

                <pre><code class="language-markdown"># Option Naming Advisor Skill

## Activation Patterns

Activate when:
- User is defining command options
- Option name doesn't follow conventions
- Short option conflicts with common usage

Do NOT activate:
- For established conventions user is following
- When user explicitly chose non-standard name

## Conventions Checked

### Standard Short Options
-v → verbose (NOT version, use --version)
-q → quiet
-o → output
-i → input
-f → force or file
-n → dry-run or number
-r → recursive
-h → help (reserved by Click)

### Naming Conventions
- Long options: lowercase, hyphens (--output-dir, not --outputDir)
- No abbreviations unless common (--config, not --cfg)
- Boolean flags: positive form (--verbose, not --no-quiet)
- Pairs: --enable-x / --disable-x, not --x / --no-x

## Behavior

### On Convention Violation

💡 Naming Suggestion

Option: --inputFile
Issue: Uses camelCase instead of kebab-case

Suggested: --input-file

Common convention: Click options use lowercase with hyphens.
Keep original? [y/n]

### On Short Option Conflict

💡 Short Option Conflict

You used: -v for --version
Standard: -v typically means --verbose

Suggested alternatives for version:
- Use --version only (no short)
- Use -V (capital) for version

Change? [use -V / keep -v / remove short]

### On Confusing Names

💡 Clarity Suggestion

Option: --file
Ambiguous: Is this input or output?

Suggested: --input-file or --output-file

Clearer names help users remember options.
Rename? [y/n]</code></pre>

                <h4 class="text-lg font-semibold mt-6 mb-3">Implementation</h4>
                <pre><code class="language-python"># src/cli_generator/skills/naming_advisor.py

import re
from cli_generator.models import OptionSpec

STANDARD_SHORTS = {
    'v': 'verbose',
    'q': 'quiet',
    'o': 'output',
    'i': 'input',
    'f': 'force',
    'n': 'dry-run',
    'r': 'recursive',
}

AMBIGUOUS_NAMES = ['file', 'path', 'name', 'data', 'value']

def check_option_naming(opt: OptionSpec) -> list[str]:
    """Check option naming against conventions. Returns suggestions."""
    suggestions = []

    # Check camelCase
    if any(c.isupper() for c in opt.name):
        kebab = re.sub(r'([A-Z])', r'-\1', opt.name).lower().lstrip('-')
        suggestions.append(f"Use '{kebab}' instead of '{opt.name}' (kebab-case convention)")

    # Check short conflicts
    if opt.short and opt.short.lower() in STANDARD_SHORTS:
        standard_meaning = STANDARD_SHORTS[opt.short.lower()]
        if opt.name != standard_meaning:
            suggestions.append(
                f"-{opt.short} typically means --{standard_meaning}, not --{opt.name}"
            )

    # Check ambiguous names
    if opt.name in AMBIGUOUS_NAMES:
        suggestions.append(f"'{opt.name}' is ambiguous - consider --input-{opt.name} or --output-{opt.name}")

    return suggestions</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Skill 3: Example Generator</h3>
                <p class="mb-2"><strong>Purpose:</strong> Automatically suggest usage examples for commands.</p>
                <p class="mb-4"><strong>Create:</strong> <code>.claude/skills/example_generator.md</code></p>

                <pre><code class="language-markdown"># Example Generator Skill

## Activation Patterns

Activate when:
- A command is defined without examples
- User finishes describing a command
- /design completes without examples

## Behavior

### Automatic Example Generation
Based on command signature, generate realistic examples:

💡 Generated Examples for 'convert'

Based on the command signature:
  convert &lt;input&gt; --output &lt;output&gt; --format &lt;fmt&gt; --quality &lt;int&gt;

Suggested examples:
1. Basic usage:
   convert image.png -o result.jpg
2. With format:
   convert photo.heic --format webp --output photo.webp
3. With quality:
   convert scan.tiff -o compressed.jpg --quality 75
4. Batch (if supported):
   convert *.png --format jpg --quality 80

Add these examples? [all/some/none]

### Example Quality Rules
- Show simplest usage first
- Include all required arguments
- Show common option combinations
- Use realistic file names
- Include edge cases (glob patterns, paths with spaces)</code></pre>

                <h4 class="text-lg font-semibold mt-6 mb-3">Implementation</h4>
                <pre><code class="language-python"># src/cli_generator/skills/example_generator.py

from cli_generator.models import CommandSpec, OptionSpec

# Realistic placeholder values by type
PLACEHOLDERS = {
    'path': {
        'input': ['document.pdf', 'image.png', 'data.json', 'config.yaml'],
        'output': ['output.pdf', 'result.png', 'processed.json'],
        'generic': ['file.txt', './data/', '~/Documents/']
    },
    'str': ['value', 'my-string', 'example'],
    'int': ['10', '42', '100'],
    'float': ['0.5', '1.5', '3.14'],
}

def generate_examples(cmd: CommandSpec, cli_name: str) -> list[str]:
    """Generate realistic usage examples for a command."""
    examples = []

    # Build argument string
    args = []
    for arg in cmd.arguments:
        if arg.type == 'path':
            args.append(PLACEHOLDERS['path']['input'][0])
        else:
            args.append(f"<{arg.name}>")

    arg_str = " ".join(args)
    base_cmd = f"{cli_name} {cmd.name} {arg_str}".strip()

    # Example 1: Basic usage (required args only)
    examples.append(base_cmd)

    # Example 2: With common options
    for opt in cmd.options:
        if opt.name in ['output', 'format', 'config', 'verbose']:
            if opt.type == 'bool':
                examples.append(f"{base_cmd} --{opt.name}")
            elif opt.type == 'path':
                examples.append(f"{base_cmd} --{opt.name} output.txt")
            elif opt.type == 'choice' and opt.choices:
                examples.append(f"{base_cmd} --{opt.name} {opt.choices[0]}")
            else:
                examples.append(f"{base_cmd} --{opt.name} <value>")
            break

    # Example 3: With short options
    short_opts = [opt for opt in cmd.options if opt.short]
    if short_opts:
        opt = short_opts[0]
        if opt.type == 'bool':
            examples.append(f"{base_cmd} -{opt.short}")
        else:
            examples.append(f"{base_cmd} -{opt.short} <value>")

    # Substitute realistic values
    examples = [_substitute_placeholders(ex) for ex in examples]

    return examples[:4]  # Max 4 examples

def _substitute_placeholders(example: str) -> str:
    """Replace <placeholders> with realistic values."""
    import re

    substitutions = {
        '<input>': 'input.txt',
        '<output>': 'output.txt',
        '<file>': 'document.pdf',
        '<format>': 'json',
        '<value>': 'example',
        '<name>': 'my-project',
    }

    for placeholder, value in substitutions.items():
        example = example.replace(placeholder, value)

    return example</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Skill 4: Dependency Detector</h3>
                <p class="mb-2"><strong>Purpose:</strong> Detect when additional dependencies are needed.</p>
                <p class="mb-4"><strong>Create:</strong> <code>.claude/skills/dependency_detector.md</code></p>

                <pre><code class="language-markdown"># Dependency Detector Skill

## Activation Patterns

Activate when:
- Command description implies external library
- Implementation would require imports not in stdlib

Keywords → Dependencies:
- "image", "resize", "thumbnail" → Pillow
- "json", "yaml", "toml" → (json is stdlib, yaml/toml need libs)
- "http", "api", "download" → httpx or requests
- "database", "sql" → sqlalchemy or specific db driver
- "progress bar" → rich or tqdm
- "color", "styled output" → rich or colorama
- "pdf" → pypdf or pdfplumber
- "excel", "spreadsheet" → openpyxl or pandas
- "csv" → (stdlib, but pandas for complex)
- "compress", "zip", "archive" → (stdlib zipfile, or py7zr)

## Behavior

### On Detection

💡 Dependency Suggestion

Your command mentions: "resize images with thumbnails"

Suggested dependencies:
- Pillow (PIL): Image manipulation
  pip install Pillow
- (Optional) pillow-heif: HEIF/HEIC support
  pip install pillow-heif

Add to CLI dependencies? [y/n/customize]

### Validation
When dependencies added:
- Check package exists on PyPI
- Suggest version constraint
- Warn about large dependencies (pandas, tensorflow)

💡 Dependency Note

Adding 'pandas' (~50MB installed)

For simple CSV, consider:
- Built-in 'csv' module
- 'tablib' (lighter weight)

Keep pandas? [y/n/alternative]</code></pre>

                <h4 class="text-lg font-semibold mt-6 mb-3">Implementation</h4>
                <pre><code class="language-python"># src/cli_generator/skills/dependency_detector.py

import re
from dataclasses import dataclass

@dataclass
class DependencySuggestion:
    package: str
    reason: str
    optional: bool = False
    alternatives: list[str] = None
    size_warning: bool = False

KEYWORD_DEPENDENCIES = {
    # Image processing
    ('image', 'resize', 'thumbnail', 'photo', 'picture'): DependencySuggestion(
        package='Pillow',
        reason='Image manipulation and processing'
    ),

    # Data formats
    ('yaml', 'yml'): DependencySuggestion(
        package='pyyaml',
        reason='YAML file parsing'
    ),
    ('toml',): DependencySuggestion(
        package='tomli',
        reason='TOML file parsing (Python < 3.11)'
    ),

    # HTTP/API
    ('http', 'api', 'download', 'fetch', 'request'): DependencySuggestion(
        package='httpx',
        reason='HTTP client for API calls',
        alternatives=['requests', 'aiohttp']
    ),

    # Database
    ('database', 'sql', 'sqlite', 'postgres', 'mysql'): DependencySuggestion(
        package='sqlalchemy',
        reason='Database ORM and connection',
        size_warning=True
    ),

    # Output formatting
    ('progress', 'bar', 'spinner'): DependencySuggestion(
        package='rich',
        reason='Progress bars and rich output',
        alternatives=['tqdm']
    ),
    ('color', 'styled', 'terminal'): DependencySuggestion(
        package='rich',
        reason='Colored terminal output',
        alternatives=['colorama', 'termcolor']
    ),

    # Documents
    ('pdf',): DependencySuggestion(
        package='pypdf',
        reason='PDF reading and manipulation',
        alternatives=['pdfplumber', 'PyMuPDF']
    ),
    ('excel', 'xlsx', 'spreadsheet'): DependencySuggestion(
        package='openpyxl',
        reason='Excel file handling',
        alternatives=['pandas', 'xlrd']
    ),

    # Data processing
    ('dataframe', 'pandas', 'data analysis'): DependencySuggestion(
        package='pandas',
        reason='Data manipulation and analysis',
        size_warning=True
    ),
}

def detect_dependencies(description: str) -> list[DependencySuggestion]:
    """Detect likely dependencies from description."""
    description_lower = description.lower()
    suggestions = []
    seen_packages = set()

    for keywords, suggestion in KEYWORD_DEPENDENCIES.items():
        if suggestion.package in seen_packages:
            continue

        for keyword in keywords:
            if keyword in description_lower:
                suggestions.append(suggestion)
                seen_packages.add(suggestion.package)
                break

    return suggestions</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Activating Skills</h3>
                <p class="mb-4">Skills are integrated into the conversation flow. Create a SkillManager:</p>
                <pre><code class="language-python"># src/cli_generator/skills/__init__.py

from dataclasses import dataclass
from typing import Any

from .pattern_suggester import suggest_patterns
from .naming_advisor import check_option_naming
from .example_generator import generate_examples
from .dependency_detector import detect_dependencies


@dataclass
class Suggestion:
    skill: str
    message: str
    action: str | None = None
    data: Any = None


class SkillManager:
    """Manages skill activation and suggestions."""

    def __init__(self, sensitivity: str = "medium"):
        self.sensitivity = sensitivity
        self.disabled_skills: set[str] = set()
        self.rejected_suggestions: set[str] = set()

    def disable(self, skill_name: str):
        """Disable a skill for this session."""
        self.disabled_skills.add(skill_name)

    def enable(self, skill_name: str):
        """Re-enable a skill."""
        self.disabled_skills.discard(skill_name)

    def process_design(self, description: str, spec) -> list[Suggestion]:
        """Process a design and return suggestions."""
        suggestions = []

        # Pattern suggester
        if "pattern_suggester" not in self.disabled_skills:
            patterns = suggest_patterns(description)
            for pattern in patterns:
                suggestions.append(Suggestion(
                    skill="pattern_suggester",
                    message=f"Common pattern detected: {pattern['name']}",
                    action="add_pattern",
                    data=pattern
                ))

        # Dependency detector
        if "dependency_detector" not in self.disabled_skills:
            deps = detect_dependencies(description)
            for dep in deps:
                suggestions.append(Suggestion(
                    skill="dependency_detector",
                    message=f"Consider adding {dep.package}: {dep.reason}",
                    action="add_dependency",
                    data=dep
                ))

        # Naming advisor (per option)
        if "naming_advisor" not in self.disabled_skills:
            for cmd in spec.commands:
                for opt in cmd.options:
                    issues = check_option_naming(opt)
                    for issue in issues:
                        suggestions.append(Suggestion(
                            skill="naming_advisor",
                            message=issue,
                            action="rename_option",
                            data={"command": cmd.name, "option": opt.name}
                        ))

        # Example generator
        if "example_generator" not in self.disabled_skills:
            for cmd in spec.commands:
                if not cmd.examples:
                    examples = generate_examples(cmd, spec.name)
                    suggestions.append(Suggestion(
                        skill="example_generator",
                        message=f"Generated examples for '{cmd.name}'",
                        action="add_examples",
                        data={"command": cmd.name, "examples": examples}
                    ))

        return suggestions</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Testing Skills</h3>
                <pre><code class="language-python"># tests/unit/test_skills.py

import pytest
from cli_generator.skills.pattern_suggester import suggest_patterns
from cli_generator.skills.naming_advisor import check_option_naming
from cli_generator.skills.example_generator import generate_examples
from cli_generator.skills.dependency_detector import detect_dependencies
from cli_generator.models import OptionSpec, CommandSpec, ArgumentSpec


class TestPatternSuggester:
    """Tests for pattern suggester skill."""

    def test_detects_download_pattern(self):
        """Should suggest download patterns."""
        suggestions = suggest_patterns("A tool to download files from URLs")

        assert len(suggestions) > 0
        suggestion_text = str(suggestions)
        assert any(word in suggestion_text.lower()
                   for word in ["resume", "retry", "concurrent", "progress"])

    def test_detects_file_converter_pattern(self):
        """Should suggest file converter patterns."""
        suggestions = suggest_patterns("Convert files between formats")

        assert len(suggestions) > 0
        # Should suggest batch processing
        assert any("recursive" in str(s).lower() or "batch" in str(s).lower()
                   for s in suggestions)


class TestNamingAdvisor:
    """Tests for naming advisor skill."""

    def test_catches_camel_case(self):
        """Should catch camelCase option names."""
        opt = OptionSpec(name="outputFile", type="path", help="Output file")
        suggestions = check_option_naming(opt)

        assert len(suggestions) > 0
        assert "output-file" in suggestions[0]

    def test_warns_on_short_conflict(self):
        """Should warn when short option conflicts with convention."""
        opt = OptionSpec(name="version", short="v", type="bool", help="Show version")
        suggestions = check_option_naming(opt)

        assert len(suggestions) > 0
        assert "verbose" in suggestions[0].lower()

    def test_allows_standard_short(self):
        """Should not warn for standard short options."""
        opt = OptionSpec(name="verbose", short="v", type="bool", help="Verbose output")
        suggestions = check_option_naming(opt)

        # Should have no warnings about -v
        assert not any("typically means" in s for s in suggestions)


class TestExampleGenerator:
    """Tests for example generator skill."""

    def test_generates_basic_example(self):
        """Should generate at least one basic example."""
        cmd = CommandSpec(
            name="convert",
            description="Convert files",
            arguments=[
                ArgumentSpec(name="input", type="path", help="Input file")
            ],
            options=[
                OptionSpec(name="output", short="o", type="path", help="Output")
            ]
        )

        examples = generate_examples(cmd, "my-tool")

        assert len(examples) >= 1
        assert "my-tool convert" in examples[0]


class TestDependencyDetector:
    """Tests for dependency detector skill."""

    def test_detects_image_dependency(self):
        """Should suggest Pillow for image processing."""
        deps = detect_dependencies("resize images and create thumbnails")

        assert len(deps) > 0
        assert any(d.package == "Pillow" for d in deps)

    def test_detects_http_dependency(self):
        """Should suggest httpx for HTTP operations."""
        deps = detect_dependencies("download files from an API")

        assert len(deps) > 0
        assert any(d.package == "httpx" for d in deps)

    def test_warns_about_large_packages(self):
        """Should warn about large dependencies."""
        deps = detect_dependencies("analyze data with pandas dataframes")

        pandas_dep = next((d for d in deps if d.package == "pandas"), None)
        assert pandas_dep is not None
        assert pandas_dep.size_warning is True

    def test_no_false_positives(self):
        """Should not suggest dependencies for stdlib operations."""
        deps = detect_dependencies("read and write JSON files")

        # json is stdlib, should not suggest anything for it
        assert not any(d.package == "json" for d in deps)</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Day 6 Checklist</h3>
                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                    <div class="checklist-item"><input type="checkbox" id="d6-1" @change="saveChecklist('d6-1', $event.target.checked)" :checked="checklist['d6-1']"><label for="d6-1">Four skills implemented</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d6-2" @change="saveChecklist('d6-2', $event.target.checked)" :checked="checklist['d6-2']"><label for="d6-2">Pattern suggester detects common CLI types</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d6-3" @change="saveChecklist('d6-3', $event.target.checked)" :checked="checklist['d6-3']"><label for="d6-3">Naming advisor catches convention violations</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d6-4" @change="saveChecklist('d6-4', $event.target.checked)" :checked="checklist['d6-4']"><label for="d6-4">Example generator creates realistic examples</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d6-5" @change="saveChecklist('d6-5', $event.target.checked)" :checked="checklist['d6-5']"><label for="d6-5">Dependency detector identifies required packages</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d6-6" @change="saveChecklist('d6-6', $event.target.checked)" :checked="checklist['d6-6']"><label for="d6-6">SkillManager coordinates all skills</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d6-7" @change="saveChecklist('d6-7', $event.target.checked)" :checked="checklist['d6-7']"><label for="d6-7">Skills can be disabled per-session</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d6-8" @change="saveChecklist('d6-8', $event.target.checked)" :checked="checklist['d6-8']"><label for="d6-8">All skill tests passing</label></div>
                </div>
                <div class="flex justify-end mt-6"><button @click="toggleDay(6)" :class="completedDays.includes(6) ? 'bg-green-500' : 'bg-primary'" class="px-6 py-2 text-white rounded-lg hover:opacity-90"><span x-text="completedDays.includes(6) ? 'Completed!' : 'Mark as Complete'"></span></button></div>
            </section>

            <!-- Day Divider -->
            <div class="day-divider"><div class="day-divider-dot"></div></div>

            <!-- Day 7 -->
            <section id="day-7" class="day-section week-2" x-intersect:enter="currentSection = 'day-7'">
                <div class="flex items-center justify-between mb-4">
                    <span class="px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-sm font-medium rounded-full">Day 2 of 5</span>
                    <button @click="toggleBookmark('day-7', 'Day 7: Subagent Coordination')" :class="isBookmarked('day-7') ? 'text-primary' : 'text-gray-400'" class="p-1 hover:scale-110 transition-transform">
                        <svg class="w-6 h-6" :fill="isBookmarked('day-7') ? 'currentColor' : 'none'" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>
                    </button>
                </div>
                <h2 class="text-3xl font-bold mb-2">Day 7: Subagent Coordination</h2>
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-6">Day 7 of 14 • Week 2: Intelligence</p>

                <h3 class="text-xl font-semibold mb-3">Learning Objectives</h3>
                <ul class="list-disc list-inside mb-6 space-y-1">
                    <li>Split complex work across specialized agents</li>
                    <li>Manage handoffs between agents</li>
                    <li>Resolve conflicts</li>
                </ul>

                <h3 class="text-xl font-semibold mb-3">When to Use Subagents</h3>
                <p class="mb-4">Subagents help when:</p>
                <ul class="list-disc list-inside mb-4 space-y-1">
                    <li>Tasks can run in parallel (tests and implementation)</li>
                    <li>Different perspectives are valuable</li>
                    <li>Work can be cleanly separated</li>
                </ul>
                <p class="mb-4">For CLI Generator:</p>
                <ul class="list-disc list-inside mb-6 space-y-1">
                    <li><strong>Spec Designer:</strong> Focuses on UX and command design</li>
                    <li><strong>Code Generator:</strong> Focuses on correct Python/Click code</li>
                    <li><strong>Test Writer:</strong> Focuses on comprehensive test coverage</li>
                    <li><strong>Reviewer:</strong> Focuses on quality and consistency</li>
                </ul>

                <h3 class="text-xl font-semibold mb-3">Subagent Architecture</h3>
                <div class="mermaid-container">
                    <div class="mermaid-container-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/></svg>
                        Multi-Agent Coordination Architecture
                    </div>
                    <div class="mermaid">
flowchart TD
    Human["Human Request"] --> Integrator
    subgraph Agents["Specialized Subagents"]
        SD["Spec Designer&lt;br/&gt;CLI UX Expert"]
        CG["Code Generator&lt;br/&gt;Python/Click Expert"]
        TW["Test Writer&lt;br/&gt;pytest Expert"]
        RV["Reviewer&lt;br/&gt;Quality Expert"]
    end
    Integrator["Integrator&lt;br/&gt;Coordinator"] --> SD
    SD --> Integrator
    Integrator --> CG
    Integrator --> TW
    CG --> Integrator
    TW --> Integrator
    Integrator --> RV
    RV --> Integrator
    Integrator --> Human
    style Integrator fill:#fef3c7,stroke:#d97706,stroke-width:2px
    style SD fill:#e0f2fe,stroke:#0284c7,stroke-width:2px
    style CG fill:#dcfce7,stroke:#16a34a,stroke-width:2px
    style TW fill:#fce7f3,stroke:#db2777,stroke-width:2px
    style RV fill:#f3e8ff,stroke:#9333ea,stroke-width:2px
    style Human fill:#f1f5f9,stroke:#64748b,stroke-width:2px
                    </div>
                </div>

                <h3 class="text-xl font-semibold mt-8 mb-3">Subagent 1: Spec Designer</h3>
                <p class="mb-4"><strong>Create:</strong> <code>.claude/subagents/spec_designer.md</code></p>
                <pre><code class="language-markdown"># Spec Designer Subagent

## Role
Design user-friendly CLI specifications from descriptions.
Does NOT write code or tests.

## Responsibilities
1. Parse natural language descriptions
2. Identify commands, arguments, options
3. Apply CLI best practices
4. Create helpful descriptions and examples
5. Ensure consistent naming

## Expertise
- Click/CLI conventions
- User experience for command-line tools
- Common CLI patterns (POSIX, GNU)

## Input
Receives from Integrator:
- Natural language description
- User preferences (from CLAUDE.md)
- Any constraints or requirements

## Output
Delivers to Integrator:
- Complete CLISpec
- Design rationale for non-obvious choices
- Questions about ambiguities
- Suggestions for improvements

## Communication Format

# SPEC DESIGNER REPORT

Description: &lt;original description&gt;
Status: SPEC READY | NEEDS CLARIFICATION | ERROR

CLI: &lt;name&gt;
Commands: &lt;count&gt;

Design Decisions:
1. &lt;decision and rationale&gt;
2. &lt;decision and rationale&gt;

Questions:
- &lt;ambiguity needing clarification&gt;

Suggestions:
- &lt;improvement idea&gt;

Ready for code generation.</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Subagent 2: Code Generator</h3>
                <p class="mb-4"><strong>Create:</strong> <code>.claude/subagents/code_generator.md</code></p>
                <pre><code class="language-markdown"># Code Generator Subagent

## Role
Generate correct, clean Python/Click code from specifications.
Does NOT design CLIs or write tests.

## Responsibilities
1. Transform CLISpec into Python code
2. Apply templates correctly
3. Ensure code is syntactically valid
4. Follow Python best practices
5. Generate supporting files (pyproject.toml, README)

## Expertise
- Python 3.11+ syntax
- Click library patterns
- Jinja2 templating
- Python packaging

## Input
Receives from Integrator:
- Validated CLISpec
- Code templates
- Generation preferences

## Output
Delivers to Integrator:
- Generated Python files
- File manifest
- Any generation warnings
- Compilation status

## Communication Format

# CODE GENERATOR REPORT

Spec: &lt;cli_name&gt;
Status: CODE GENERATED | GENERATION FAILED | WARNINGS

Files Created:
- &lt;path&gt;: &lt;line count&gt; lines
- &lt;path&gt;: &lt;line count&gt; lines

Compilation: ✓ All files valid Python | ✗ Errors found

Warnings:
- &lt;any issues noticed&gt;

Ready for test generation.

## Code Quality Standards
- PEP 8 compliant
- Type hints on functions
- Docstrings on commands
- No hardcoded values
- Proper error handling structure</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Subagent 3: Test Writer</h3>
                <p class="mb-4"><strong>Create:</strong> <code>.claude/subagents/test_writer.md</code></p>
                <pre><code class="language-markdown"># Test Writer Subagent

## Role
Write comprehensive pytest tests for generated CLIs.
Does NOT write production code.

## Responsibilities
1. Create test cases for each command
2. Cover happy paths and error cases
3. Test CLI integration (--help, --version)
4. Create test fixtures
5. Aim for high coverage

## Expertise
- pytest patterns
- Click testing utilities
- Test fixture design
- Mocking strategies

## Input
Receives from Integrator:
- CLISpec
- Generated code (for reference)
- Coverage requirements

## Output
Delivers to Integrator:
- Test files
- Fixture files
- Expected coverage estimate
- Edge cases identified

## Communication Format

# TEST WRITER REPORT

CLI: &lt;cli_name&gt;
Status: TESTS WRITTEN | PARTIAL | BLOCKED

Files Created:
- tests/test_cli.py: &lt;count&gt; tests
- tests/test_&lt;command&gt;.py: &lt;count&gt; tests
- tests/conftest.py: fixtures

Test Summary:
  Total tests: &lt;count&gt;
  - Happy path: &lt;count&gt;
  - Error cases: &lt;count&gt;
  - Edge cases: &lt;count&gt;

Expected Coverage: ~&lt;percent&gt;%

Edge Cases Covered:
- &lt;edge case 1&gt;
- &lt;edge case 2&gt;

Ready for test execution.</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Subagent 4: Reviewer</h3>
                <p class="mb-4"><strong>Create:</strong> <code>.claude/subagents/reviewer.md</code></p>
                <pre><code class="language-markdown"># Reviewer Subagent

## Role
Review generated code and tests for quality, consistency, and correctness.
Does NOT write code.

## Responsibilities
1. Check code follows standards
2. Verify test coverage is adequate
3. Identify potential issues
4. Suggest improvements
5. Approve or request changes

## Review Checklist

### Code Quality
- [ ] Follows PEP 8
- [ ] Type hints present
- [ ] Docstrings complete
- [ ] Error handling adequate
- [ ] No code duplication

### CLI Usability
- [ ] Help text is helpful
- [ ] Error messages are clear
- [ ] Exit codes are correct
- [ ] Options are intuitive

### Security
- [ ] No dangerous patterns
- [ ] Inputs validated
- [ ] No hardcoded secrets
- [ ] Safe file operations

### Tests
- [ ] Cover all commands
- [ ] Test error cases
- [ ] Meaningful assertions
- [ ] No flaky tests

## Communication Format

# REVIEWER REPORT

CLI: &lt;cli_name&gt;
Status: APPROVED | CHANGES REQUESTED | BLOCKED

Issues Found:

BLOCKING (must fix):
1. &lt;issue description&gt;
   Location: &lt;file:line&gt;
   Fix: &lt;suggested fix&gt;

SUGGESTIONS (should consider):
1. &lt;suggestion&gt;
   Rationale: &lt;why&gt;

Recommendation: APPROVE | REQUEST CHANGES</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Integrator: Coordinating Subagents</h3>
                <p class="mb-4"><strong>Create:</strong> <code>.claude/subagents/integrator.md</code></p>
                <pre><code class="language-markdown"># Integrator Subagent

## Role
Coordinate other subagents and manage workflow.
Single point of contact with the human.

## Responsibilities
1. Receive requests from human
2. Break into subtasks
3. Assign to appropriate subagent
4. Collect and merge outputs
5. Handle conflicts
6. Report results

## Conflict Resolution

### Spec vs Code Conflict
Code Generator: Can't implement option X as designed

Resolution:
1. Ask Spec Designer for alternative design
2. Or flag for human decision

### Test vs Code Conflict
Test Writer: Test expects behavior not in implementation

Resolution:
1. Check spec for intended behavior
2. Fix test or implementation accordingly
3. Or flag for human decision

## Communication Format

# INTEGRATION SUMMARY

Request: &lt;original request&gt;
Status: COMPLETE | IN PROGRESS | BLOCKED

Subagent Status:
  ✓ Spec Designer: Complete
  ✓ Code Generator: Complete
  ✓ Test Writer: Complete
  → Reviewer: In progress

Conflicts Resolved: &lt;count&gt;
  &lt;brief description&gt;

Pending Human Decision:
  &lt;question if any&gt;

Next Step: &lt;what happens next&gt;</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">/parallel-create Command</h3>
                <p class="mb-4"><strong>Create:</strong> <code>.claude/commands/parallel-create.md</code></p>
                <pre><code class="language-markdown"># /parallel-create - Create CLI with Subagents

## Usage
/parallel-create &lt;description&gt;
/parallel-create "A tool to manage dotfiles"

## Process

### 1. Initialize
# Parallel CLI Creation

Description: &lt;description&gt;

Activating subagents:
  ✓ Spec Designer
  ✓ Code Generator (standby)
  ✓ Test Writer (standby)
  ✓ Reviewer (standby)
  ★ Integrator (coordinating)

Starting design phase...

### 2. Design Phase
Spec Designer creates CLISpec.
Present to human for approval.

### 3. Parallel Generation
Code Generator and Test Writer work simultaneously:

# Generation Progress

[████████░░] Code Generator: cli.py complete
[██████░░░░] Test Writer: test_cli.py in progress

### 4. Review Phase
Reviewer checks everything.

### 5. Final Approval

# CLI Creation Complete

CLI: pdf-compress
Location: ./generated/pdf-compress/

Files:
  ✓ pdf_compress/cli.py (45 lines)
  ✓ pdf_compress/__init__.py
  ✓ tests/test_cli.py (12 tests)
  ✓ pyproject.toml
  ✓ README.md

Review: APPROVED
  - 0 blocking issues
  - 2 suggestions noted

Tests: 12/12 passing
Coverage: 85%

Ready to use:
  cd ./generated/pdf-compress
  uv pip install -e .
  pdf-compress --help</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">SubagentCoordinator Implementation</h3>
                <pre><code class="language-python"># src/cli_generator/subagents/__init__.py

from dataclasses import dataclass, field
from enum import Enum
from typing import Any


class SubagentStatus(Enum):
    IDLE = "idle"
    WORKING = "working"
    COMPLETE = "complete"
    ERROR = "error"
    WAITING = "waiting"


@dataclass
class SubagentReport:
    agent: str
    status: SubagentStatus
    output: Any
    errors: list[str] = field(default_factory=list)
    warnings: list[str] = field(default_factory=list)


class SubagentCoordinator:
    """Coordinates multiple subagents for CLI generation."""

    def __init__(self):
        self.agents = {
            "spec_designer": SubagentStatus.IDLE,
            "code_generator": SubagentStatus.IDLE,
            "test_writer": SubagentStatus.IDLE,
            "reviewer": SubagentStatus.IDLE,
        }
        self.reports: dict[str, SubagentReport] = {}
        self.conflicts: list[dict] = []

    async def run_design_phase(self, description: str) -> SubagentReport:
        """Run spec designer and return report."""
        self.agents["spec_designer"] = SubagentStatus.WORKING

        from ..generators.spec_generator import SpecGenerator

        generator = SpecGenerator()
        try:
            spec = await generator.generate(description)
            report = SubagentReport(
                agent="spec_designer",
                status=SubagentStatus.COMPLETE,
                output=spec
            )
        except Exception as e:
            report = SubagentReport(
                agent="spec_designer",
                status=SubagentStatus.ERROR,
                output=None,
                errors=[str(e)]
            )

        self.reports["spec_designer"] = report
        self.agents["spec_designer"] = report.status
        return report

    async def run_generation_phase(self, spec) -> tuple[SubagentReport, SubagentReport]:
        """Run code generator and test writer in parallel."""
        import asyncio

        self.agents["code_generator"] = SubagentStatus.WORKING
        self.agents["test_writer"] = SubagentStatus.WORKING

        # Run both in parallel
        code_task = self._generate_code(spec)
        test_task = self._generate_tests(spec)

        code_report, test_report = await asyncio.gather(code_task, test_task)

        self.reports["code_generator"] = code_report
        self.reports["test_writer"] = test_report
        self.agents["code_generator"] = code_report.status
        self.agents["test_writer"] = test_report.status

        return code_report, test_report

    async def run_review_phase(self) -> SubagentReport:
        """Run reviewer on all outputs."""
        self.agents["reviewer"] = SubagentStatus.WORKING

        # Collect all outputs for review
        code_output = self.reports.get("code_generator", {}).output
        test_output = self.reports.get("test_writer", {}).output
        spec = self.reports.get("spec_designer", {}).output

        report = SubagentReport(
            agent="reviewer",
            status=SubagentStatus.COMPLETE,
            output={
                "approved": True,
                "blocking_issues": [],
                "suggestions": ["Consider adding --json flag"]
            }
        )

        self.reports["reviewer"] = report
        self.agents["reviewer"] = report.status
        return report

    def get_status_summary(self) -> str:
        """Get a formatted status summary."""
        lines = ["Subagent Status:"]
        for agent, status in self.agents.items():
            icon = {
                SubagentStatus.IDLE: "○",
                SubagentStatus.WORKING: "→",
                SubagentStatus.COMPLETE: "✓",
                SubagentStatus.ERROR: "✗",
                SubagentStatus.WAITING: "◐",
            }.get(status, "?")
            lines.append(f"  {icon} {agent}: {status.value}")
        return "\n".join(lines)</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">SubagentStop Hook: Validate Subagent Output</h3>
                <p class="mb-4">The <code>SubagentStop</code> hook fires when any subagent completes. Use it to validate output before the main agent continues:</p>

                <p class="mb-2">Create <code>.claude/hooks/subagent_stop.py</code>:</p>
                <pre><code class="language-python">#!/usr/bin/env python3
"""
SubagentStop Hook: Runs when a subagent completes.
Validate output quality before main agent accepts it.
"""
import json
import sys

def main():
    try:
        input_data = json.load(sys.stdin)

        # subagent_result contains the subagent's output
        result = input_data.get("subagent_result", "")

        # Example: Check if code generator produced valid Python
        if "def " not in result and "class " not in result:
            # Block: force subagent to retry
            output = {
                "decision": "block",
                "reason": "Subagent output missing function/class definitions. Please retry."
            }
            print(json.dumps(output))
        else:
            print(f"Subagent completed: {len(result)} chars of output")

        sys.exit(0)
    except Exception:
        sys.exit(0)

if __name__ == "__main__":
    main()</code></pre>

                <p class="text-sm text-gray-600 dark:text-gray-400 mt-2 mb-4"><strong>What you'll see:</strong> After each subagent finishes, the hook validates output. If blocked, the subagent is asked to retry.</p>

                <div class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-400 p-4 my-4">
                    <p class="text-sm"><strong>Configuration:</strong> Add to <code>.claude/settings.json</code>:</p>
                    <pre class="text-sm mt-2"><code class="language-json">"SubagentStop": [
  { "matcher": "", "hooks": [
    { "type": "command", "command": "uv run python .claude/hooks/subagent_stop.py" }
  ]}
]</code></pre>
                </div>

                <h3 class="text-xl font-semibold mt-8 mb-3">Day 7 Checklist</h3>
                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                    <div class="checklist-item"><input type="checkbox" id="d7-1" @change="saveChecklist('d7-1', $event.target.checked)" :checked="checklist['d7-1']"><label for="d7-1">Four subagent roles defined</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d7-2" @change="saveChecklist('d7-2', $event.target.checked)" :checked="checklist['d7-2']"><label for="d7-2">Integrator coordination workflow defined</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d7-3" @change="saveChecklist('d7-3', $event.target.checked)" :checked="checklist['d7-3']"><label for="d7-3">/parallel-create command implemented</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d7-4" @change="saveChecklist('d7-4', $event.target.checked)" :checked="checklist['d7-4']"><label for="d7-4">SubagentCoordinator class working</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d7-5" @change="saveChecklist('d7-5', $event.target.checked)" :checked="checklist['d7-5']"><label for="d7-5">SubagentStop hook validates output</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d7-6" @change="saveChecklist('d7-6', $event.target.checked)" :checked="checklist['d7-6']"><label for="d7-6">Successfully created one CLI using subagents</label></div>
                </div>
                <div class="flex justify-end mt-6"><button @click="toggleDay(7)" :class="completedDays.includes(7) ? 'bg-green-500' : 'bg-primary'" class="px-6 py-2 text-white rounded-lg hover:opacity-90"><span x-text="completedDays.includes(7) ? 'Completed!' : 'Mark as Complete'"></span></button></div>
            </section>

            <!-- Day Divider -->
            <div class="day-divider"><div class="day-divider-dot"></div></div>

            <!-- Day 8 -->
            <section id="day-8" class="day-section week-2" x-intersect:enter="currentSection = 'day-8'">
                <div class="flex items-center justify-between mb-4">
                    <span class="px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-sm font-medium rounded-full">Day 3 of 5</span>
                    <button @click="toggleBookmark('day-8', 'Day 8: MCP External Tools')" :class="isBookmarked('day-8') ? 'text-primary' : 'text-gray-400'" class="p-1 hover:scale-110 transition-transform">
                        <svg class="w-6 h-6" :fill="isBookmarked('day-8') ? 'currentColor' : 'none'" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>
                    </button>
                </div>
                <h2 class="text-3xl font-bold mb-2">Day 8: MCP External Tools</h2>
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-6">Day 8 of 14 • Week 2: Intelligence</p>

                <h3 class="text-xl font-semibold mb-3">Learning Objectives</h3>
                <ul class="list-disc list-inside mb-6 space-y-1">
                    <li>Connect to external services safely</li>
                    <li>Implement guardrails</li>
                    <li>Build auditable tool usage</li>
                </ul>

                <h3 class="text-xl font-semibold mb-3">What MCP Provides</h3>
                <p class="mb-4">Model Context Protocol standardizes external tool access:</p>
                <ul class="list-disc list-inside mb-4 space-y-1">
                    <li>Consistent interface</li>
                    <li>Built-in guardrails</li>
                    <li>Audit logging</li>
                    <li>Approval workflows</li>
                </ul>
                <div class="mermaid-container">
                    <div class="mermaid-container-title">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"/></svg>
                        MCP Tool Integration Pipeline
                    </div>
                    <div class="mermaid">
flowchart LR
    subgraph MCP["MCP External Tools"]
        PyPI["PyPI Checker&lt;br/&gt;Name availability"]
        GitHub["GitHub Creator&lt;br/&gt;Repository setup"]
        Deps["Dependency Validator&lt;br/&gt;Package verification"]
        Fmt["Code Formatter&lt;br/&gt;Black + isort"]
    end
    Design["CLI Design"] --> PyPI
    PyPI --> Generate["Code Generation"]
    Generate --> Deps
    Deps --> Fmt
    Fmt --> GitHub
    style PyPI fill:#e0f2fe,stroke:#0284c7,stroke-width:2px
    style GitHub fill:#fef3c7,stroke:#d97706,stroke-width:2px
    style Deps fill:#dcfce7,stroke:#16a34a,stroke-width:2px
    style Fmt fill:#fce7f3,stroke:#db2777,stroke-width:2px
    style Design fill:#f1f5f9,stroke:#64748b,stroke-width:2px
    style Generate fill:#f3e8ff,stroke:#9333ea,stroke-width:2px
                    </div>
                </div>

                <h3 class="text-xl font-semibold mt-8 mb-3">MCP Tool 1: PyPI Name Checker</h3>
                <p class="mb-2"><strong>Purpose:</strong> Check if CLI name is available on PyPI.</p>
                <p class="mb-4"><strong>Create:</strong> <code>.claude/mcp/pypi_checker.md</code></p>

                <pre><code class="language-python"># src/cli_generator/mcp/pypi.py

import httpx
from dataclasses import dataclass


@dataclass
class PyPICheckResult:
    name: str
    available: bool | None  # None if check failed
    existing_version: str | None = None
    existing_description: str | None = None
    error: str | None = None


async def pypi_check_name(name: str) -> PyPICheckResult:
    """Check if package name is available on PyPI."""

    async with httpx.AsyncClient(timeout=10.0) as client:
        try:
            response = await client.get(f"https://pypi.org/pypi/{name}/json")

            if response.status_code == 404:
                return PyPICheckResult(
                    name=name,
                    available=True
                )
            elif response.status_code == 200:
                data = response.json()
                return PyPICheckResult(
                    name=name,
                    available=False,
                    existing_version=data["info"]["version"],
                    existing_description=data["info"]["summary"]
                )
            else:
                return PyPICheckResult(
                    name=name,
                    available=None,
                    error=f"Unexpected status: {response.status_code}"
                )
        except httpx.TimeoutException:
            return PyPICheckResult(
                name=name,
                available=None,
                error="Request timed out"
            )</code></pre>

                <p class="mt-4 mb-4">Integration - called automatically during /design:</p>
                <pre><code class="language-text">Checking name availability...
  PyPI: ✓ 'img-compress' is available

Proceed with this name? [y/rename]</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">MCP Tool 2: GitHub Repository Creator</h3>
                <p class="mb-2"><strong>Purpose:</strong> Create GitHub repo for generated CLI.</p>
                <p class="mb-4"><strong>Create:</strong> <code>.claude/mcp/github.md</code></p>

                <pre><code class="language-python"># src/cli_generator/mcp/github.py

import httpx
import os
from dataclasses import dataclass


@dataclass
class GitHubRepoResult:
    success: bool
    url: str | None = None
    clone_url: str | None = None
    error: str | None = None


async def github_create_repo(
    name: str,
    description: str = "",
    private: bool = False
) -> GitHubRepoResult:
    """Create a GitHub repository."""

    token = os.environ.get("GITHUB_TOKEN")
    if not token:
        return GitHubRepoResult(
            success=False,
            error="GITHUB_TOKEN environment variable not set"
        )

    async with httpx.AsyncClient() as client:
        try:
            response = await client.post(
                "https://api.github.com/user/repos",
                headers={
                    "Authorization": f"token {token}",
                    "Accept": "application/vnd.github.v3+json"
                },
                json={
                    "name": name,
                    "description": description,
                    "private": private,
                    "auto_init": True
                }
            )

            if response.status_code == 201:
                data = response.json()
                return GitHubRepoResult(
                    success=True,
                    url=data["html_url"],
                    clone_url=data["clone_url"]
                )
            else:
                error_msg = response.json().get("message", "Unknown error")
                return GitHubRepoResult(
                    success=False,
                    error=f"GitHub API error: {error_msg}"
                )
        except Exception as e:
            return GitHubRepoResult(
                success=False,
                error=str(e)
            )</code></pre>

                <p class="mt-4 mb-2"><strong>Approval Required:</strong> This tool requires human approval:</p>
                <pre><code class="language-text">🔐 GitHub Action Requires Approval

Action: Create repository
Name: img-compress
Description: CLI tool to compress images
Visibility: Public

This will:
  - Create repository 'username/img-compress'
  - Initialize with README
  - Add generated code

Approve? [y/n]</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">MCP Tool 3: Dependency Validator</h3>
                <p class="mb-2"><strong>Purpose:</strong> Verify dependencies exist and are compatible.</p>
                <p class="mb-4"><strong>Create:</strong> <code>.claude/mcp/dependency_validator.md</code></p>

                <pre><code class="language-python"># src/cli_generator/mcp/dependencies.py

import httpx
import re
from dataclasses import dataclass


@dataclass
class DependencyCheckResult:
    name: str
    status: str  # "ok", "not_found", "incompatible", "error"
    latest_version: str | None = None
    message: str | None = None


def parse_dependency(dep: str) -> tuple[str, str | None]:
    """Parse dependency string into name and version spec."""
    match = re.match(r'^([a-zA-Z0-9_-]+)(\[.*\])?(.*)?$', dep)
    if match:
        name = match.group(1)
        version_spec = match.group(3) if match.group(3) else None
        return name, version_spec
    return dep, None


async def validate_dependencies(
    dependencies: list[str],
    python_version: str = "3.11"
) -> list[DependencyCheckResult]:
    """Validate dependencies exist and are compatible."""

    results = []

    async with httpx.AsyncClient(timeout=10.0) as client:
        for dep in dependencies:
            name, version_spec = parse_dependency(dep)

            try:
                response = await client.get(f"https://pypi.org/pypi/{name}/json")

                if response.status_code == 404:
                    results.append(DependencyCheckResult(
                        name=name,
                        status="not_found",
                        message=f"Package '{name}' not found on PyPI"
                    ))
                    continue

                data = response.json()
                results.append(DependencyCheckResult(
                    name=name,
                    status="ok",
                    latest_version=data["info"]["version"]
                ))

            except Exception as e:
                results.append(DependencyCheckResult(
                    name=name,
                    status="error",
                    message=str(e)
                ))

    return results</code></pre>

                <p class="mt-4 mb-2">Integration - called during code generation:</p>
                <pre><code class="language-text">Validating dependencies...
  ✓ click>=8.1 (latest: 8.1.7)
  ✓ rich>=13.0 (latest: 13.7.0)
  ✗ nonexistent-package (not found)

Fix dependencies before generating? [y/skip]</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">MCP Tool 4: Code Formatter</h3>
                <p class="mb-2"><strong>Purpose:</strong> Format generated code with Black/Ruff.</p>
                <p class="mb-4"><strong>Create:</strong> <code>.claude/mcp/formatter.md</code></p>

                <pre><code class="language-python"># src/cli_generator/mcp/formatter.py

import subprocess
from pathlib import Path
from dataclasses import dataclass


@dataclass
class FormatResult:
    file: str
    success: bool
    changes: list[str]
    error: str | None = None


def format_code(file_path: str, check_only: bool = False) -> FormatResult:
    """Format Python file with Black and isort."""

    path = Path(file_path)
    if not path.exists():
        return FormatResult(
            file=file_path,
            success=False,
            changes=[],
            error=f"File not found: {file_path}"
        )

    changes = []

    try:
        # Run isort
        isort_args = ["isort", str(path)]
        if check_only:
            isort_args.append("--check-only")
        isort_result = subprocess.run(isort_args, capture_output=True, text=True)

        if isort_result.returncode == 0 and not check_only:
            changes.append("imports sorted")

        # Run Black
        black_args = ["black", str(path)]
        if check_only:
            black_args.append("--check")
        black_result = subprocess.run(black_args, capture_output=True, text=True)

        if "reformatted" in black_result.stderr:
            changes.append("code reformatted")

        return FormatResult(file=file_path, success=True, changes=changes)

    except FileNotFoundError as e:
        return FormatResult(
            file=file_path,
            success=False,
            changes=[],
            error=f"Formatter not found: {e}"
        )</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Audit Logging</h3>
                <p class="mb-4">All MCP calls should be logged for audit purposes:</p>
                <pre><code class="language-python"># src/cli_generator/mcp/audit.py

import json
from datetime import datetime
from pathlib import Path
from dataclasses import dataclass, asdict
from typing import Any


AUDIT_LOG = Path("./data/mcp_audit.jsonl")


@dataclass
class AuditEntry:
    timestamp: str
    tool: str
    inputs: dict
    outputs: dict
    success: bool
    duration_ms: int
    user: str | None = None


def log_mcp_call(
    tool: str,
    inputs: dict,
    outputs: dict,
    success: bool,
    duration_ms: int,
    user: str | None = None
):
    """Log MCP tool call for audit."""

    entry = AuditEntry(
        timestamp=datetime.now().isoformat(),
        tool=tool,
        inputs=_sanitize_inputs(inputs),
        outputs=_summarize_outputs(outputs),
        success=success,
        duration_ms=duration_ms,
        user=user
    )

    AUDIT_LOG.parent.mkdir(parents=True, exist_ok=True)

    with open(AUDIT_LOG, "a") as f:
        f.write(json.dumps(asdict(entry)) + "\n")


def _sanitize_inputs(inputs: dict) -> dict:
    """Remove sensitive data from inputs."""
    sanitized = inputs.copy()
    sensitive_keys = ["token", "password", "secret", "key", "credential"]

    for key in list(sanitized.keys()):
        if any(s in key.lower() for s in sensitive_keys):
            sanitized[key] = "[REDACTED]"

    return sanitized</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">MCP Wrapper with Audit</h3>
                <pre><code class="language-python"># src/cli_generator/mcp/__init__.py

import time
from functools import wraps
from typing import Callable, Any

from .audit import log_mcp_call


def mcp_tool(tool_name: str):
    """Decorator for MCP tools that adds audit logging."""

    def decorator(func: Callable) -> Callable:
        @wraps(func)
        async def wrapper(*args, **kwargs) -> Any:
            start_time = time.time()
            inputs = {"args": args, "kwargs": kwargs}

            try:
                result = await func(*args, **kwargs)
                duration_ms = int((time.time() - start_time) * 1000)

                log_mcp_call(
                    tool=tool_name,
                    inputs=inputs,
                    outputs=result if isinstance(result, dict) else {"result": result},
                    success=True,
                    duration_ms=duration_ms
                )

                return result

            except Exception as e:
                duration_ms = int((time.time() - start_time) * 1000)

                log_mcp_call(
                    tool=tool_name,
                    inputs=inputs,
                    outputs={"error": str(e)},
                    success=False,
                    duration_ms=duration_ms
                )

                raise

        return wrapper
    return decorator


# Usage example:
# @mcp_tool("pypi_check_name")
# async def pypi_check_name(name: str) -> PyPICheckResult:
#     ...</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Testing MCP Tools</h3>
                <pre><code class="language-python"># tests/unit/test_mcp.py

import pytest
from unittest.mock import AsyncMock, patch

from cli_generator.mcp.pypi import pypi_check_name, PyPICheckResult
from cli_generator.mcp.dependencies import validate_dependencies


class TestPyPIChecker:
    """Tests for PyPI name checker."""

    @pytest.mark.asyncio
    async def test_available_name(self):
        """Should detect available names."""
        with patch('httpx.AsyncClient') as mock_client:
            mock_response = AsyncMock()
            mock_response.status_code = 404
            mock_client.return_value.__aenter__.return_value.get = AsyncMock(
                return_value=mock_response
            )

            result = await pypi_check_name("my-unique-cli-name-12345")

            assert result.available is True

    @pytest.mark.asyncio
    async def test_taken_name(self):
        """Should detect taken names."""
        with patch('httpx.AsyncClient') as mock_client:
            mock_response = AsyncMock()
            mock_response.status_code = 200
            mock_response.json.return_value = {
                "info": {
                    "version": "1.0.0",
                    "summary": "An existing package"
                }
            }
            mock_client.return_value.__aenter__.return_value.get = AsyncMock(
                return_value=mock_response
            )

            result = await pypi_check_name("requests")

            assert result.available is False
            assert result.existing_version == "1.0.0"</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Day 8 Checklist</h3>
                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                    <div class="checklist-item"><input type="checkbox" id="d8-1" @change="saveChecklist('d8-1', $event.target.checked)" :checked="checklist['d8-1']"><label for="d8-1">PyPI name checker implemented and tested</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d8-2" @change="saveChecklist('d8-2', $event.target.checked)" :checked="checklist['d8-2']"><label for="d8-2">GitHub repo creator with approval workflow</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d8-3" @change="saveChecklist('d8-3', $event.target.checked)" :checked="checklist['d8-3']"><label for="d8-3">Dependency validator working</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d8-4" @change="saveChecklist('d8-4', $event.target.checked)" :checked="checklist['d8-4']"><label for="d8-4">Code formatter integrated</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d8-5" @change="saveChecklist('d8-5', $event.target.checked)" :checked="checklist['d8-5']"><label for="d8-5">Audit logging for all MCP calls</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d8-6" @change="saveChecklist('d8-6', $event.target.checked)" :checked="checklist['d8-6']"><label for="d8-6">MCP decorator for automatic logging</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d8-7" @change="saveChecklist('d8-7', $event.target.checked)" :checked="checklist['d8-7']"><label for="d8-7">Successfully used at least 2 MCP tools in workflow</label></div>
                </div>
                <div class="flex justify-end mt-6"><button @click="toggleDay(8)" :class="completedDays.includes(8) ? 'bg-green-500' : 'bg-primary'" class="px-6 py-2 text-white rounded-lg hover:opacity-90"><span x-text="completedDays.includes(8) ? 'Completed!' : 'Mark as Complete'"></span></button></div>
            </section>

            <!-- Day Divider -->
            <div class="day-divider"><div class="day-divider-dot"></div></div>

            <!-- Day 9 - Memory & Context Management -->
            <section id="day-9" class="day-section week-2" x-intersect:enter="currentSection = 'day-9'">
                <div class="flex items-center justify-between mb-4">
                    <span class="px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-sm font-medium rounded-full">Day 4 of 5</span>
                    <button @click="toggleBookmark('day-9', 'Day 9: Memory & Context Management')" :class="isBookmarked('day-9') ? 'text-primary' : 'text-gray-400'" class="p-1 hover:scale-110 transition-transform">
                        <svg class="w-6 h-6" :fill="isBookmarked('day-9') ? 'currentColor' : 'none'" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>
                    </button>
                </div>
                <h2 class="text-3xl font-bold mb-2">Day 9: Memory & Context Management</h2>
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-6">Day 9 of 14 • Week 2: Intelligence</p>

                <h3 class="text-xl font-semibold mb-3">Learning Objectives</h3>
                <ul class="list-disc list-inside mb-6 space-y-1">
                    <li>Understand how Claude Code handles context exhaustion</li>
                    <li>Master session persistence techniques</li>
                    <li>Use MCP-based memory for cross-session continuity</li>
                </ul>

                <h3 class="text-xl font-semibold mb-3">The Context Challenge</h3>
                <p class="mb-4">Claude Code has a finite context window. When working on large projects, context exhaustion is inevitable. Understanding how to manage this is crucial for effective workflows.</p>

                <h4 class="text-lg font-semibold mt-6 mb-2">Auto-Compaction</h4>
                <p class="mb-4">When context fills up, Claude Code automatically compacts the conversation:</p>
                <ol class="list-decimal list-inside mb-4 space-y-2">
                    <li>Summary of key decisions and progress is created</li>
                    <li>Older detailed exchanges are removed</li>
                    <li>Recent context is preserved</li>
                    <li>Work continues with compressed history</li>
                </ol>
                <div class="callout callout-info"><strong>Tip:</strong> You can monitor context usage in the status line if you configured it in Day 1.</div>

                <h3 class="text-xl font-semibold mt-8 mb-3">Session Persistence</h3>
                <p class="mb-4">Claude Code provides several ways to resume previous work:</p>

                <h4 class="text-lg font-semibold mt-6 mb-2">Continue Last Session</h4>
                <pre><code class="language-bash"># Resume most recent session
claude -c

# Or use the continue flag
claude --continue</code></pre>

                <h4 class="text-lg font-semibold mt-6 mb-2">Resume Specific Session</h4>
                <pre><code class="language-bash"># Resume a specific session by ID
claude --resume &lt;session-id&gt;

# List recent sessions to find IDs
claude sessions list</code></pre>

                <h4 class="text-lg font-semibold mt-6 mb-2">Session Best Practices</h4>
                <ul class="list-disc list-inside mb-4 space-y-1">
                    <li>Use <code>claude -c</code> when returning to interrupted work</li>
                    <li>Start fresh sessions for unrelated tasks</li>
                    <li>Let auto-compaction handle long sessions naturally</li>
                </ul>

                <h3 class="text-xl font-semibold mt-8 mb-3">MCP-Based Memory</h3>
                <p class="mb-4">For true cross-session memory that survives beyond auto-compaction, use MCP-based memory tools like <code>claude-mem</code>:</p>

                <h4 class="text-lg font-semibold mt-6 mb-2">Install claude-mem</h4>
                <pre><code class="language-bash"># Install the memory plugin
claude plugins install claude-mem@thedotmack</code></pre>

                <h4 class="text-lg font-semibold mt-6 mb-2">Using Memory</h4>
                <pre><code class="language-bash"># In Claude Code session - search past work
/mem-search "CLI generator architecture decisions"

# The plugin automatically records:
# - Key decisions you make
# - Bugs you fix and how
# - Implementation patterns used
# - Session summaries</code></pre>

                <h4 class="text-lg font-semibold mt-6 mb-2">Memory Benefits</h4>
                <ul class="list-disc list-inside mb-4 space-y-1">
                    <li><strong>Cross-session continuity:</strong> Pick up where you left off</li>
                    <li><strong>Decision history:</strong> Remember why you chose certain approaches</li>
                    <li><strong>Pattern reuse:</strong> Apply previous solutions to similar problems</li>
                    <li><strong>Team knowledge:</strong> Share learnings across the project</li>
                </ul>

                <h3 class="text-xl font-semibold mt-8 mb-3">Day 9 Checklist</h3>
                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                    <div class="checklist-item"><input type="checkbox" id="d9-1" @change="saveChecklist('d9-1', $event.target.checked)" :checked="checklist['d9-1']"><label for="d9-1">Understand auto-compaction behavior</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d9-2" @change="saveChecklist('d9-2', $event.target.checked)" :checked="checklist['d9-2']"><label for="d9-2">Practice using claude -c to resume sessions</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d9-3" @change="saveChecklist('d9-3', $event.target.checked)" :checked="checklist['d9-3']"><label for="d9-3">Install and configure claude-mem (optional)</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d9-4" @change="saveChecklist('d9-4', $event.target.checked)" :checked="checklist['d9-4']"><label for="d9-4">Test memory search functionality</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d9-5" @change="saveChecklist('d9-5', $event.target.checked)" :checked="checklist['d9-5']"><label for="d9-5">Document key architectural decisions for memory</label></div>
                </div>
                <div class="flex justify-end mt-6"><button @click="toggleDay(9)" :class="completedDays.includes(9) ? 'bg-green-500' : 'bg-primary'" class="px-6 py-2 text-white rounded-lg hover:opacity-90"><span x-text="completedDays.includes(9) ? 'Completed!' : 'Mark as Complete'"></span></button></div>
            </section>

            <!-- Day Divider -->
            <div class="day-divider"><div class="day-divider-dot"></div></div>

            <!-- Day 10 - Testing & Packaging -->
            <section id="day-10" class="day-section week-2" x-intersect:enter="currentSection = 'day-10'">
                <div class="flex items-center justify-between mb-4">
                    <span class="px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-sm font-medium rounded-full">Day 5 of 5</span>
                    <button @click="toggleBookmark('day-10', 'Day 10: Testing & Packaging')" :class="isBookmarked('day-10') ? 'text-primary' : 'text-gray-400'" class="p-1 hover:scale-110 transition-transform">
                        <svg class="w-6 h-6" :fill="isBookmarked('day-10') ? 'currentColor' : 'none'" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>
                    </button>
                </div>
                <h2 class="text-3xl font-bold mb-2">Day 10: Testing & Packaging</h2>
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-6">Day 10 of 14 • Week 2: Intelligence</p>

                <h3 class="text-xl font-semibold mb-3">Learning Objectives</h3>
                <ul class="list-disc list-inside mb-6 space-y-1">
                    <li>Test the complete workflow end-to-end</li>
                    <li>Verify all components work together</li>
                    <li>Create golden tests for regression prevention</li>
                    <li>Package your Claude Code constructs for sharing</li>
                </ul>

                <h3 class="text-xl font-semibold mb-3">End-to-End Test Suite</h3>
                <p class="text-gray-600 dark:text-gray-400 mb-4">Create <code class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded">tests/integration/test_full_workflow.py</code>:</p>
                <pre><code class="language-python">"""End-to-end integration tests for CLI Generator."""

import pytest
import subprocess
import ast
import json
from pathlib import Path
import shutil

from cli_generator.generators.spec_generator import SpecGenerator
from cli_generator.generators.code_generator import CodeGenerator
from cli_generator.models import CLISpec, CommandSpec, OptionSpec, ArgumentSpec
from cli_generator.validators.spec_validator import validate_spec
from cli_generator.validators.security_validator import check_code_security


@pytest.fixture
def temp_output_dir(tmp_path):
    """Temporary directory for generated CLIs."""
    output_dir = tmp_path / "generated"
    output_dir.mkdir()
    yield output_dir
    shutil.rmtree(output_dir, ignore_errors=True)


class TestFullWorkflow:
    """Test complete CLI generation workflow."""

    @pytest.mark.slow
    @pytest.mark.asyncio
    async def test_simple_cli_generation(self, temp_output_dir):
        """Generate a simple CLI and verify it works."""

        # Step 1: Generate spec
        spec_gen = SpecGenerator()
        spec = await spec_gen.generate(
            "A tool to count words in text files"
        )

        # Verify spec
        assert spec.name
        assert len(spec.commands) >= 1

        # Step 2: Validate spec
        errors, warnings = validate_spec(spec)
        assert len(errors) == 0, f"Spec validation errors: {errors}"

        # Step 3: Generate code
        code_gen = CodeGenerator()
        files = code_gen.generate(spec, temp_output_dir)

        assert "cli" in files
        assert files["cli"].exists()

        # Step 4: Verify code is valid Python
        cli_content = files["cli"].read_text()
        ast.parse(cli_content)  # Raises SyntaxError if invalid

        # Step 5: Security check
        security_issues = check_code_security(cli_content, "cli.py")
        blocked = [i for i in security_issues if i.severity == "blocked"]
        assert len(blocked) == 0, f"Security issues: {blocked}"

        # Step 6: Verify pyproject.toml
        pyproject_content = files["pyproject"].read_text()
        assert spec.name in pyproject_content

    @pytest.mark.slow
    @pytest.mark.asyncio
    async def test_cli_with_options(self, temp_output_dir):
        """Test CLI with various option types."""

        spec_gen = SpecGenerator()
        spec = await spec_gen.generate(
            "A file converter with --format choice (json, yaml, xml), "
            "--output path, and --pretty flag"
        )

        # Verify options were captured
        assert len(spec.commands) >= 1
        cmd = spec.commands[0]
        opt_names = [opt.name for opt in cmd.options]

        # Should have some options
        assert len(opt_names) > 0

        # Generate and compile
        code_gen = CodeGenerator()
        files = code_gen.generate(spec, temp_output_dir)

        # Verify syntax
        cli_content = files["cli"].read_text()
        ast.parse(cli_content)

    @pytest.mark.slow
    @pytest.mark.asyncio
    async def test_multi_command_cli(self, temp_output_dir):
        """Generate a CLI with multiple commands."""

        spec_gen = SpecGenerator()
        spec = await spec_gen.generate(
            "A file manager with commands to list, copy, move, and delete files"
        )

        # Should have multiple commands
        assert len(spec.commands) >= 2, "Should generate multiple commands"

        # Generate and verify
        code_gen = CodeGenerator()
        files = code_gen.generate(spec, temp_output_dir)

        cli_content = files["cli"].read_text()
        ast.parse(cli_content)

        # Each command should be in the generated code
        for cmd in spec.commands:
            assert f"def {cmd.name}(" in cli_content, f"Missing command: {cmd.name}"</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Hook Integration Tests</h3>
                <pre><code class="language-python">class TestHookIntegration:
    """Test hooks are called correctly during workflow."""

    def test_spec_validation_hook_blocks_invalid(self):
        """Verify spec validation catches issues."""

        # Create invalid spec (duplicate commands)
        spec = CLISpec(
            name="test-cli",
            description="Test",
            commands=[
                CommandSpec(name="list", description="List items"),
                CommandSpec(name="list", description="List again"),  # Duplicate!
            ]
        )

        errors, warnings = validate_spec(spec)
        assert len(errors) > 0
        assert any("duplicate" in e.lower() for e in errors)

    def test_spec_validation_warns_on_delete(self):
        """Delete commands should warn about confirmation."""

        spec = CLISpec(
            name="test-cli",
            description="Test",
            commands=[
                CommandSpec(name="delete", description="Delete items"),
            ]
        )

        errors, warnings = validate_spec(spec)
        assert len(warnings) > 0
        assert any("confirm" in w.lower() for w in warnings)

    def test_security_hook_blocks_eval(self):
        """Security check should block eval()."""

        dangerous_code = '''
@click.command()
def run(code):
    result = eval(code)  # Dangerous!
    click.echo(result)
'''
        issues = check_code_security(dangerous_code, "test.py")
        blocked = [i for i in issues if i.severity == "blocked"]

        assert len(blocked) > 0
        assert any("eval" in i.pattern.lower() for i in blocked)

    def test_security_hook_blocks_shell_true(self):
        """Security check should block shell=True."""

        dangerous_code = '''
import subprocess

@click.command()
def run(cmd):
    subprocess.call(cmd, shell=True)
'''
        issues = check_code_security(dangerous_code, "test.py")
        blocked = [i for i in issues if i.severity == "blocked"]

        assert len(blocked) > 0
        assert any("shell" in i.pattern.lower() for i in blocked)</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Skill Integration Tests</h3>
                <pre><code class="language-python">class TestSkillIntegration:
    """Test skills activate correctly during workflow."""

    @pytest.mark.asyncio
    async def test_pattern_suggester_activates(self):
        """Pattern suggester should detect common patterns."""
        from cli_generator.skills.pattern_suggester import suggest_patterns

        suggestions = suggest_patterns(
            "A tool to download files from URLs"
        )

        assert len(suggestions) > 0
        # Should suggest download-related patterns
        suggestion_text = str(suggestions).lower()
        assert any(word in suggestion_text
                   for word in ["resume", "retry", "concurrent", "progress"])

    def test_naming_advisor_catches_issues(self):
        """Naming advisor should catch convention violations."""
        from cli_generator.skills.naming_advisor import check_option_naming

        # camelCase option
        opt = OptionSpec(name="outputFile", type="path", help="Output file")
        suggestions = check_option_naming(opt)

        assert len(suggestions) > 0
        assert "output-file" in suggestions[0]

    def test_example_generator_creates_examples(self):
        """Example generator should create realistic examples."""
        from cli_generator.skills.example_generator import generate_examples

        cmd = CommandSpec(
            name="convert",
            description="Convert files",
            arguments=[ArgumentSpec(name="input", type="path")],
            options=[OptionSpec(name="output", short="o", type="path")]
        )

        examples = generate_examples(cmd, "tool")

        assert len(examples) >= 1
        assert "tool convert" in examples[0]</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">MCP Integration Tests</h3>
                <pre><code class="language-python">class TestMCPIntegration:
    """Test MCP tools work correctly."""

    @pytest.mark.asyncio
    async def test_dependency_validation(self):
        """Dependency validator should check packages."""
        from cli_generator.mcp.dependencies import validate_dependencies

        # This test might hit real PyPI - consider mocking
        results = await validate_dependencies(["click>=8.1"])

        assert len(results) == 1
        # click exists and should be ok
        assert results[0].name == "click"</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Build From Spec Tests</h3>
                <pre><code class="language-python">class TestBuildFromSpec:
    """Test building from saved specification files."""

    def test_build_from_json_spec(self, temp_output_dir):
        """Build CLI from a saved JSON spec file."""

        # Create spec manually
        spec = CLISpec(
            name="test-tool",
            description="A test tool",
            commands=[
                CommandSpec(
                    name="run",
                    description="Run the tool",
                    options=[
                        OptionSpec(name="verbose", short="v", type="bool")
                    ]
                )
            ]
        )

        # Save to file
        spec_file = temp_output_dir / "spec.json"
        spec_file.write_text(spec.model_dump_json(indent=2))

        # Load and verify
        loaded_spec = CLISpec.model_validate_json(spec_file.read_text())
        assert loaded_spec.name == "test-tool"
        assert len(loaded_spec.commands) == 1

        # Generate code
        code_gen = CodeGenerator()
        files = code_gen.generate(loaded_spec, temp_output_dir)

        assert files["cli"].exists()
        cli_content = files["cli"].read_text()
        assert "def run(" in cli_content
        assert "--verbose" in cli_content</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Golden Tests</h3>
                <p class="text-gray-600 dark:text-gray-400 mb-4">Golden tests compare outputs against known-good examples to catch regressions.</p>

                <h4 class="text-lg font-semibold mb-3">Directory Structure</h4>
                <pre><code class="language-bash">tests/golden/
├── fixtures/
│   ├── simple_counter/
│   │   ├── input.txt
│   │   └── expected_spec.json
│   ├── file_converter/
│   │   ├── input.txt
│   │   └── expected_spec.json
│   └── multi_command/
│       ├── input.txt
│       └── expected_spec.json
└── test_golden.py</code></pre>

                <h4 class="text-lg font-semibold mt-6 mb-3">Golden Fixture: Simple Counter</h4>
                <p class="text-gray-600 dark:text-gray-400 mb-2">Create <code class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded">tests/golden/fixtures/simple_counter/input.txt</code>:</p>
                <pre><code class="language-text">A simple tool to count words, lines, and characters in text files</code></pre>

                <p class="text-gray-600 dark:text-gray-400 mt-4 mb-2">Create <code class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded">tests/golden/fixtures/simple_counter/expected_spec.json</code>:</p>
                <pre><code class="language-json">{
  "name": "word-counter",
  "description": "Count words, lines, and characters in text files",
  "version": "0.1.0",
  "commands": [
    {
      "name": "count",
      "description": "Count words, lines, and characters in a file",
      "arguments": [
        {
          "name": "file",
          "type": "path",
          "required": true,
          "help": "File to count"
        }
      ],
      "options": [
        {
          "name": "words",
          "short": "w",
          "type": "bool",
          "required": false,
          "help": "Count words"
        },
        {
          "name": "lines",
          "short": "l",
          "type": "bool",
          "required": false,
          "help": "Count lines"
        },
        {
          "name": "chars",
          "short": "c",
          "type": "bool",
          "required": false,
          "help": "Count characters"
        }
      ],
      "examples": [
        "word-counter count document.txt",
        "word-counter count document.txt -w -l"
      ]
    }
  ],
  "dependencies": []
}</code></pre>

                <h4 class="text-lg font-semibold mt-6 mb-3">Golden Test Implementation</h4>
                <p class="text-gray-600 dark:text-gray-400 mb-2">Create <code class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded">tests/golden/test_golden.py</code>:</p>
                <pre><code class="language-python">"""Golden tests for CLI Generator.

These tests verify that the generator produces consistent, expected output
for known inputs. They help catch regressions when making changes.
"""

import pytest
import json
from pathlib import Path

from cli_generator.generators.spec_generator import SpecGenerator
from cli_generator.generators.code_generator import CodeGenerator
from cli_generator.models import CLISpec

GOLDEN_DIR = Path(__file__).parent / "fixtures"


def get_test_cases():
    """Discover all golden test cases."""
    cases = []
    for case_dir in GOLDEN_DIR.iterdir():
        if case_dir.is_dir() and (case_dir / "input.txt").exists():
            cases.append(case_dir.name)
    return cases


class TestGoldenSpecs:
    """Test that spec generation matches expected output."""

    @pytest.mark.slow
    @pytest.mark.parametrize("test_case", get_test_cases())
    @pytest.mark.asyncio
    async def test_spec_generation_matches_golden(self, test_case):
        """Verify spec generation produces expected structure."""

        case_dir = GOLDEN_DIR / test_case
        input_text = (case_dir / "input.txt").read_text().strip()
        expected_spec = json.loads(
            (case_dir / "expected_spec.json").read_text()
        )

        # Generate spec
        spec_gen = SpecGenerator()
        actual_spec = await spec_gen.generate(input_text)

        # Compare key structural elements
        # (Not exact match because LLM output varies)

        # Name should be similar
        assert actual_spec.name, "Generated spec should have a name"

        # Command count should match
        assert len(actual_spec.commands) == len(expected_spec["commands"]), \
            f"Expected {len(expected_spec['commands'])} commands, " \
            f"got {len(actual_spec.commands)}"

        # Each command should exist with similar structure
        expected_cmd_names = {cmd["name"] for cmd in expected_spec["commands"]}
        actual_cmd_names = {cmd.name for cmd in actual_spec.commands}

        # Allow for slight naming variations
        assert len(actual_cmd_names) == len(expected_cmd_names), \
            "Command count should match"


class TestGoldenCode:
    """Test that code generation produces valid output."""

    @pytest.mark.parametrize("test_case", get_test_cases())
    def test_code_generation_compiles(self, test_case, tmp_path):
        """Verify generated code is valid Python."""

        case_dir = GOLDEN_DIR / test_case
        spec_data = json.loads(
            (case_dir / "expected_spec.json").read_text()
        )
        spec = CLISpec(**spec_data)

        # Generate code
        code_gen = CodeGenerator()
        files = code_gen.generate(spec, tmp_path)

        # Verify all Python files compile
        import py_compile
        for path in files.values():
            if path.suffix == ".py":
                py_compile.compile(str(path), doraise=True)

    @pytest.mark.parametrize("test_case", get_test_cases())
    def test_generated_cli_has_help(self, test_case, tmp_path):
        """Verify generated CLI has help text."""

        case_dir = GOLDEN_DIR / test_case
        spec_data = json.loads(
            (case_dir / "expected_spec.json").read_text()
        )
        spec = CLISpec(**spec_data)

        # Generate code
        code_gen = CodeGenerator()
        files = code_gen.generate(spec, tmp_path)

        # Check help text is in the generated code
        cli_content = files["cli"].read_text()
        assert spec.description in cli_content or \
               spec.description.lower() in cli_content.lower(), \
               "Description should be in generated code"


class TestGoldenConsistency:
    """Test that repeated generation produces consistent output."""

    @pytest.mark.parametrize("test_case", ["simple_counter"])
    def test_code_generation_is_deterministic(self, test_case, tmp_path):
        """Code generation should be deterministic for same input."""

        case_dir = GOLDEN_DIR / test_case
        spec_data = json.loads(
            (case_dir / "expected_spec.json").read_text()
        )
        spec = CLISpec(**spec_data)

        code_gen = CodeGenerator()

        # Generate twice
        dir1 = tmp_path / "gen1"
        dir2 = tmp_path / "gen2"
        dir1.mkdir()
        dir2.mkdir()

        files1 = code_gen.generate(spec, dir1)
        files2 = code_gen.generate(spec, dir2)

        # CLI content should be identical
        cli1 = files1["cli"].read_text()
        cli2 = files2["cli"].read_text()

        # Remove timestamps that might differ
        import re
        cli1_clean = re.sub(r'Generated.*\d{4}', 'Generated [DATE]', cli1)
        cli2_clean = re.sub(r'Generated.*\d{4}', 'Generated [DATE]', cli2)

        assert cli1_clean == cli2_clean, \
            "Code generation should be deterministic"</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Running All Tests</h3>
                <p class="text-gray-600 dark:text-gray-400 mb-2">Create a comprehensive test runner script <code class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded">scripts/test_all.sh</code>:</p>
                <pre><code class="language-bash">#!/bin/bash
# scripts/test_all.sh

echo "Running CLI Generator Test Suite"
echo "================================"
echo

# Unit tests
echo "1. Unit Tests"
echo "-------------"
uv run pytest tests/unit/ -v --tb=short
UNIT_EXIT=$?

# Integration tests (skip slow by default)
echo
echo "2. Integration Tests (fast)"
echo "--------------------------"
uv run pytest tests/integration/ -v --tb=short -m "not slow"
INTEGRATION_EXIT=$?

# Golden tests
echo
echo "3. Golden Tests"
echo "---------------"
uv run pytest tests/golden/ -v --tb=short -m "not slow"
GOLDEN_EXIT=$?

# Summary
echo
echo "================================"
echo "Test Summary"
echo "================================"
echo "Unit tests:        $([ $UNIT_EXIT -eq 0 ] && echo 'PASSED' || echo 'FAILED')"
echo "Integration tests: $([ $INTEGRATION_EXIT -eq 0 ] && echo 'PASSED' || echo 'FAILED')"
echo "Golden tests:      $([ $GOLDEN_EXIT -eq 0 ] && echo 'PASSED' || echo 'FAILED')"

# Full test with slow tests
if [ "$1" == "--full" ]; then
    echo
    echo "4. Slow Tests (LLM calls)"
    echo "------------------------"
    uv run pytest tests/ -v --tb=short -m "slow"
fi

# Exit with failure if any test suite failed
[ $UNIT_EXIT -eq 0 ] && [ $INTEGRATION_EXIT -eq 0 ] && [ $GOLDEN_EXIT -eq 0 ]</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Plugin Packaging</h3>
                <p class="mb-4">Now let's package everything as a distributable plugin.</p>

                <h4 class="text-lg font-semibold mb-3">Plugin Structure</h4>
                <p class="text-gray-600 dark:text-gray-400 mb-4">Create <code class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded">.claude/plugins/cli-generator/</code>:</p>
                <pre><code class="language-bash">.claude/plugins/cli-generator/
├── plugin.yaml           # Plugin manifest
├── README.md             # Plugin documentation
├── requirements.txt      # Python dependencies
├── install.md            # Installation instructions
├── commands/
│   ├── design.md
│   ├── generate.md
│   ├── refine.md
│   ├── implement.md
│   ├── test.md
│   ├── new-cli.md
│   ├── save-spec.md
│   └── add-command.md
├── hooks/
│   ├── validate_spec.md
│   ├── validate_code.md
│   ├── security_check.md
│   └── coverage_check.md
├── skills/
│   ├── pattern_suggester.md
│   ├── naming_advisor.md
│   ├── example_generator.md
│   └── dependency_detector.md
├── subagents/
│   ├── spec_designer.md
│   ├── code_generator.md
│   ├── test_writer.md
│   ├── reviewer.md
│   └── integrator.md
└── mcp/
    ├── pypi_checker.md
    ├── github.md
    ├── dependency_validator.md
    └── formatter.md</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Plugin Manifest</h3>
                <p class="text-gray-600 dark:text-gray-400 mb-4">Create <code class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded">.claude/plugins/cli-generator/plugin.yaml</code>:</p>
                <pre><code class="language-yaml">name: cli-generator
version: 1.0.0
description: Generate CLI tools from natural language descriptions
author: Your Name
license: MIT
repository: https://github.com/yourusername/cli-generator

# Minimum requirements
requires:
  python: ">=3.11"
  claude_code: ">=1.0"

# Python dependencies
dependencies:
  - click>=8.1
  - rich>=13.0
  - pydantic>=2.0
  - pydantic-ai>=0.1
  - jinja2>=3.1
  - httpx>=0.25

# Components included
components:
  commands:
    - commands/design.md
    - commands/generate.md
    - commands/refine.md
    - commands/implement.md
    - commands/test.md
    - commands/new-cli.md
    - commands/save-spec.md
    - commands/add-command.md

  hooks:
    - hooks/validate_spec.md
    - hooks/validate_code.md
    - hooks/security_check.md
    - hooks/coverage_check.md

  skills:
    - skills/pattern_suggester.md
    - skills/naming_advisor.md
    - skills/example_generator.md
    - skills/dependency_detector.md

  subagents:
    - subagents/spec_designer.md
    - subagents/code_generator.md
    - subagents/test_writer.md
    - subagents/reviewer.md
    - subagents/integrator.md

  mcp:
    - mcp/pypi_checker.md
    - mcp/github.md
    - mcp/dependency_validator.md
    - mcp/formatter.md

# Configuration options
configuration:
  required:
    - OPENAI_API_KEY    # For LLM-powered generation
  optional:
    - GITHUB_TOKEN      # For GitHub integration
    - DEFAULT_OUTPUT_DIR: "./generated"
    - PYTHON_VERSION: "3.11"
    - CLI_FRAMEWORK: "click"  # Future: typer support

# Keywords for discovery
keywords:
  - cli
  - generator
  - code-generation
  - click
  - python</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Installation Instructions</h3>
                <p class="text-gray-600 dark:text-gray-400 mb-4">Create <code class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded">.claude/plugins/cli-generator/install.md</code>:</p>
                <pre><code class="language-markdown"># CLI Generator Plugin Installation

## Prerequisites

- Python 3.11 or higher
- Claude Code installed
- OpenAI API key (for LLM features)

## Quick Install

1. **Copy plugin to your project:**
   ```bash
   # From the cli-generator repository
   cp -r .claude/plugins/cli-generator /your/project/.claude/plugins/
   ```

2. **Install Python dependencies:**
   ```bash
   uv pip install -r .claude/plugins/cli-generator/requirements.txt
   ```

3. **Set environment variables:**
   ```bash
   export OPENAI_API_KEY=your_key_here

   # Optional: For GitHub integration
   export GITHUB_TOKEN=your_github_token
   ```

4. **Verify installation:**
   ```
   # In Claude Code session
   /design "A simple hello world CLI"
   ```

## Manual Install

If you want to customize:

1. Copy only the components you need:
   ```bash
   # Just commands
   cp -r .claude/plugins/cli-generator/commands/* .claude/commands/

   # Just hooks
   cp -r .claude/plugins/cli-generator/hooks/* .claude/hooks/
   ```

2. Modify commands/hooks/skills as needed

3. Update plugin.yaml to reflect changes

## Configuration

Create or update `.claude/config.yaml`:

```yaml
plugins:
  cli-generator:
    default_output_dir: "./my-clis"
    python_version: "3.12"
    include_tests: true
```

## Troubleshooting

### Commands not found
- Ensure files are in `.claude/plugins/cli-generator/commands/`
- Check file names match command names

### LLM errors
- Verify OPENAI_API_KEY is set
- Check API quota

### Generated code doesn't compile
- Update Python version in config
- Check template syntax</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Plugin Documentation (README.md)</h3>
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 mb-6">
                    <h4 class="text-lg font-semibold mb-4">Features</h4>
                    <ul class="list-disc list-inside space-y-1 mb-4">
                        <li><strong>🗣️ Natural Language Input</strong>: Describe your CLI, get working code</li>
                        <li><strong>⚡ Multiple Commands</strong>: Generate complex multi-command CLIs</li>
                        <li><strong>🧪 Test Generation</strong>: Automatic pytest test creation</li>
                        <li><strong>✅ Quality Checks</strong>: Validation hooks prevent common issues</li>
                        <li><strong>💡 Smart Suggestions</strong>: Skills offer improvements as you work</li>
                        <li><strong>🤖 Parallel Generation</strong>: Subagents work simultaneously</li>
                        <li><strong>🔌 External Tools</strong>: PyPI checking, GitHub integration</li>
                    </ul>

                    <h4 class="text-lg font-semibold mb-3">Commands Reference</h4>
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm">
                            <thead>
                                <tr class="border-b border-gray-200 dark:border-gray-700">
                                    <th class="text-left py-2">Command</th>
                                    <th class="text-left py-2">Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>/design &lt;desc&gt;</code></td><td>Create CLI specification from description</td></tr>
                                <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>/generate</code></td><td>Generate code from current design</td></tr>
                                <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>/refine &lt;feedback&gt;</code></td><td>Modify current design</td></tr>
                                <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>/implement &lt;cmd&gt;</code></td><td>Add implementation to command</td></tr>
                                <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>/test &lt;path&gt;</code></td><td>Run tests for generated CLI</td></tr>
                                <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>/new-cli &lt;desc&gt;</code></td><td>Complete workflow in one command</td></tr>
                                <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>/add-command &lt;desc&gt;</code></td><td>Add command to existing CLI</td></tr>
                                <tr><td class="py-2"><code>/save-spec &lt;file&gt;</code></td><td>Save specification to file</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3 class="text-xl font-semibold mt-8 mb-3">Requirements File</h3>
                <p class="text-gray-600 dark:text-gray-400 mb-2">Create <code class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded">.claude/plugins/cli-generator/requirements.txt</code>:</p>
                <pre><code class="language-text">click>=8.1
rich>=13.0
pydantic>=2.0
pydantic-ai>=0.1
jinja2>=3.1
httpx>=0.25
pytest>=7.0
pytest-asyncio>=0.21
black>=23.0
isort>=5.12</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Plugin Installation Script</h3>
                <p class="text-gray-600 dark:text-gray-400 mb-2">Create <code class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded">.claude/plugins/cli-generator/install.sh</code>:</p>
                <pre><code class="language-bash">#!/bin/bash
# CLI Generator Plugin Installer

set -e

echo "Installing CLI Generator Plugin"
echo "================================"

# Check Python version
python_version=$(python3 --version 2>&1 | cut -d' ' -f2 | cut -d'.' -f1,2)
required_version="3.11"

if [ "$(printf '%s\n' "$required_version" "$python_version" | sort -V | head -n1)" != "$required_version" ]; then
    echo "Error: Python $required_version+ required, found $python_version"
    exit 1
fi

echo "✓ Python version: $python_version"

# Check for uv
if ! command -v uv &> /dev/null; then
    echo "Installing uv..."
    curl -LsSf https://astral.sh/uv/install.sh | sh
fi

echo "✓ uv available"

# Install dependencies
echo "Installing dependencies..."
uv pip install -r requirements.txt

echo "✓ Dependencies installed"

# Check for API key
if [ -z "$OPENAI_API_KEY" ]; then
    echo ""
    echo "⚠️  Warning: OPENAI_API_KEY not set"
    echo "   Set it with: export OPENAI_API_KEY=your_key"
fi

# Create necessary directories
mkdir -p ../../../commands
mkdir -p ../../../hooks
mkdir -p ../../../skills
mkdir -p ../../../subagents
mkdir -p ../../../mcp

echo ""
echo "✓ Installation complete!"
echo ""
echo "Next steps:"
echo "  1. Set OPENAI_API_KEY if not already set"
echo "  2. Start Claude Code in your project"
echo "  3. Try: /design \"A simple test CLI\""</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">✅ Day 10 Checklist</h3>
                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                    <p class="font-semibold mb-2 text-sm">Integration Testing:</p>
                    <div class="checklist-item"><input type="checkbox" id="d10-1" @change="saveChecklist('d10-1', $event.target.checked)" :checked="checklist['d10-1']"><label for="d10-1">End-to-end integration tests passing</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d10-2" @change="saveChecklist('d10-2', $event.target.checked)" :checked="checklist['d10-2']"><label for="d10-2">Hook and skill integration tests passing</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d10-3" @change="saveChecklist('d10-3', $event.target.checked)" :checked="checklist['d10-3']"><label for="d10-3">Golden tests for regression prevention</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d10-4" @change="saveChecklist('d10-4', $event.target.checked)" :checked="checklist['d10-4']"><label for="d10-4">Full workflow tested: description → working CLI</label></div>
                    <p class="font-semibold mb-2 mt-4 text-sm">Plugin Packaging:</p>
                    <div class="checklist-item"><input type="checkbox" id="d10-5" @change="saveChecklist('d10-5', $event.target.checked)" :checked="checklist['d10-5']"><label for="d10-5">Plugin directory structure created</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d10-6" @change="saveChecklist('d10-6', $event.target.checked)" :checked="checklist['d10-6']"><label for="d10-6">plugin.yaml manifest complete</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d10-7" @change="saveChecklist('d10-7', $event.target.checked)" :checked="checklist['d10-7']"><label for="d10-7">Installation instructions and README complete</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d10-8" @change="saveChecklist('d10-8', $event.target.checked)" :checked="checklist['d10-8']"><label for="d10-8">Test plugin installation in fresh project</label></div>
                </div>
                <div class="flex justify-end mt-6"><button @click="toggleDay(10)" :class="completedDays.includes(10) ? 'bg-green-500' : 'bg-primary'" class="px-6 py-2 text-white rounded-lg hover:opacity-90"><span x-text="completedDays.includes(10) ? 'Completed!' : 'Mark as Complete'"></span></button></div>
            </section>

            <!-- Week 3 Banner -->
            <div class="week-banner week-3">
                <div class="week-banner-content">
                    <div class="week-banner-icon">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path></svg>
                    </div>
                    <div class="week-banner-title">Week 3: Polish</div>
                    <div class="week-banner-subtitle">Documentation, Examples, and Release</div>
                    <div class="week-banner-days">Days 11-14</div>
                </div>
            </div>

            <!-- Days 11-12 -->
            <section id="day-11-12" class="day-section week-3" x-intersect:enter="currentSection = 'day-11-12'">
                <div class="flex items-center justify-between mb-4">
                    <span class="px-3 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-sm font-medium rounded-full">Days 1-2 of 4</span>
                    <button @click="toggleBookmark('day-11-12', 'Days 11-12: Documentation + Examples')" :class="isBookmarked('day-11-12') ? 'text-primary' : 'text-gray-400'" class="p-1 hover:scale-110 transition-transform">
                        <svg class="w-6 h-6" :fill="isBookmarked('day-11-12') ? 'currentColor' : 'none'" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>
                    </button>
                </div>
                <h2 class="text-3xl font-bold mb-2">Days 11-12: Documentation + Examples</h2>
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-6">Days 11-12 of 14 • Week 3: Polish</p>

                <h3 class="text-xl font-semibold mb-3">Create Example Gallery</h3>
                <p class="text-gray-600 dark:text-gray-400 mb-4">Create <code class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded">examples/</code> directory with complete examples:</p>
                <pre><code class="language-bash">examples/
├── README.md
├── simple-counter/
│   ├── description.txt
│   ├── generated/
│   │   └── word_counter/
│   │       ├── cli.py
│   │       └── __init__.py
│   └── README.md
├── file-converter/
│   ├── description.txt
│   ├── generated/
│   └── README.md
├── api-client/
│   ├── description.txt
│   ├── generated/
│   └── README.md
└── task-manager/
    ├── description.txt
    ├── generated/
    └── README.md</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">Example: Simple Counter</h3>
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700 mb-6">
                    <h4 class="font-semibold mb-2">Description</h4>
                    <p class="text-gray-600 dark:text-gray-400 mb-4">A word/line/character counter similar to <code>wc</code>.</p>

                    <h4 class="font-semibold mb-2">Generation Command</h4>
                    <pre><code class="language-bash">/design "A command-line tool to count words, lines, and characters in text files. Should support multiple files and have options to select what to count."
/generate --with-tests</code></pre>

                    <h4 class="font-semibold mt-4 mb-2">Generated CLI</h4>
                    <pre><code class="language-bash">word-counter count FILE [--words] [--lines] [--chars]</code></pre>

                    <h4 class="font-semibold mt-4 mb-2">Usage Examples</h4>
                    <pre><code class="language-bash"># Count everything in a file
word-counter count document.txt

# Count only lines
word-counter count document.txt --lines

# Count words and characters
word-counter count document.txt --words --chars</code></pre>

                    <h4 class="font-semibold mt-4 mb-2">Learning Points</h4>
                    <ul class="list-disc list-inside text-sm space-y-1">
                        <li>Simple single-command CLI</li>
                        <li>Boolean flag options</li>
                        <li>File path argument</li>
                        <li>Standard short options (-w, -l, -c)</li>
                    </ul>
                </div>

                <h3 class="text-xl font-semibold mt-8 mb-3">Example: File Converter</h3>
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700 mb-6">
                    <h4 class="font-semibold mb-2">Description</h4>
                    <p class="text-gray-600 dark:text-gray-400 mb-4">Convert files between JSON, YAML, and TOML formats.</p>

                    <h4 class="font-semibold mb-2">Generation Command</h4>
                    <pre><code class="language-bash">/design "A file converter that transforms between JSON, YAML, and TOML formats. Should support input/output files, format auto-detection, and pretty printing."
/generate --with-tests
/implement ./generated/file-converter convert</code></pre>

                    <h4 class="font-semibold mt-4 mb-2">Generated CLI</h4>
                    <pre><code class="language-bash">file-converter convert INPUT [--output FILE] [--format FORMAT] [--pretty]
file-converter detect FILE</code></pre>

                    <h4 class="font-semibold mt-4 mb-2">Learning Points</h4>
                    <ul class="list-disc list-inside text-sm space-y-1">
                        <li>Multiple commands</li>
                        <li>Choice type options</li>
                        <li>Optional arguments with defaults</li>
                        <li>Format auto-detection logic</li>
                    </ul>
                </div>

                <h3 class="text-xl font-semibold mt-8 mb-3">Example: API Client</h3>
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700 mb-6">
                    <h4 class="font-semibold mb-2">Description</h4>
                    <p class="text-gray-600 dark:text-gray-400 mb-4">A CLI for interacting with a REST API.</p>

                    <h4 class="font-semibold mb-2">Generated CLI</h4>
                    <pre><code class="language-bash">api-client get URL [--headers KEY=VALUE] [--auth TOKEN] [--format FORMAT]
api-client post URL --data JSON [--headers KEY=VALUE]
api-client put URL --data JSON
api-client delete URL [--confirm]
api-client config set KEY VALUE
api-client config get KEY</code></pre>

                    <h4 class="font-semibold mt-4 mb-2">Learning Points</h4>
                    <ul class="list-disc list-inside text-sm space-y-1">
                        <li>Multiple related commands</li>
                        <li>Multiple option types (str, bool, choice)</li>
                        <li>Configuration management</li>
                        <li>HTTP client integration (httpx)</li>
                        <li>Output formatting</li>
                    </ul>
                </div>

                <h3 class="text-xl font-semibold mt-8 mb-3">Example: Task Manager</h3>
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700 mb-6">
                    <h4 class="font-semibold mb-2">Description</h4>
                    <p class="text-gray-600 dark:text-gray-400 mb-4">A local task/todo management CLI.</p>

                    <h4 class="font-semibold mb-2">Generated CLI</h4>
                    <pre><code class="language-bash">tasks add TITLE [--priority LEVEL] [--due DATE] [--tags TAG1,TAG2]
tasks list [--all] [--priority LEVEL] [--tag TAG] [--due-before DATE]
tasks show ID
tasks complete ID
tasks delete ID [--force]
tasks edit ID [--title TITLE] [--priority LEVEL]
tasks search QUERY
tasks export [--format FORMAT]
tasks import FILE</code></pre>

                    <h4 class="font-semibold mt-4 mb-2">Usage Examples</h4>
                    <pre><code class="language-bash"># Add a task
tasks add "Buy groceries" --priority high --due tomorrow

# List pending tasks
tasks list

# Filter by tag
tasks list --tag work

# Complete a task
tasks complete 1

# Export to JSON
tasks export --format json > backup.json</code></pre>

                    <h4 class="font-semibold mt-4 mb-2">Learning Points</h4>
                    <ul class="list-disc list-inside text-sm space-y-1">
                        <li>Full CRUD operations</li>
                        <li>Date parsing</li>
                        <li>Filtering and search</li>
                        <li>Data persistence</li>
                        <li>Multiple output formats</li>
                        <li>Import/export functionality</li>
                    </ul>
                </div>

                <h3 class="text-xl font-semibold mt-8 mb-3">✅ Days 11-12 Checklist</h3>
                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                    <div class="checklist-item"><input type="checkbox" id="d11-1" @change="saveChecklist('d11-1', $event.target.checked)" :checked="checklist['d11-1']"><label for="d11-1">README comprehensive</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d11-2" @change="saveChecklist('d11-2', $event.target.checked)" :checked="checklist['d11-2']"><label for="d11-2">All commands documented</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d11-3" @change="saveChecklist('d11-3', $event.target.checked)" :checked="checklist['d11-3']"><label for="d11-3">All hooks documented</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d11-4" @change="saveChecklist('d11-4', $event.target.checked)" :checked="checklist['d11-4']"><label for="d11-4">All skills documented</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d11-5" @change="saveChecklist('d11-5', $event.target.checked)" :checked="checklist['d11-5']"><label for="d11-5">Examples complete and working</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d11-6" @change="saveChecklist('d11-6', $event.target.checked)" :checked="checklist['d11-6']"><label for="d11-6">API documentation generated</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d11-7" @change="saveChecklist('d11-7', $event.target.checked)" :checked="checklist['d11-7']"><label for="d11-7">CHANGELOG updated</label></div>
                </div>
                <div class="flex justify-end mt-6"><button @click="toggleDay(11); toggleDay(12)" :class="completedDays.includes(11) ? 'bg-green-500' : 'bg-primary'" class="px-6 py-2 text-white rounded-lg hover:opacity-90"><span x-text="completedDays.includes(11) ? 'Completed!' : 'Mark as Complete'"></span></button></div>
            </section>

            <!-- Day Divider -->
            <div class="day-divider"><div class="day-divider-dot"></div></div>

            <!-- Days 13-14 -->
            <section id="day-13-14" class="day-section week-3" x-intersect:enter="currentSection = 'day-13-14'">
                <div class="flex items-center justify-between mb-4">
                    <span class="px-3 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-sm font-medium rounded-full">Days 3-4 of 4</span>
                    <button @click="toggleBookmark('day-13-14', 'Days 13-14: Final Testing + Release')" :class="isBookmarked('day-13-14') ? 'text-primary' : 'text-gray-400'" class="p-1 hover:scale-110 transition-transform">
                        <svg class="w-6 h-6" :fill="isBookmarked('day-13-14') ? 'currentColor' : 'none'" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>
                    </button>
                </div>
                <h2 class="text-3xl font-bold mb-2">Days 13-14: Final Testing + Release</h2>
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-6">Days 13-14 of 14 • Week 3: Polish</p>

                <h3 class="text-xl font-semibold mb-3">Final Checklist</h3>

                <div class="grid md:grid-cols-2 gap-6 mb-8">
                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700">
                        <h4 class="font-semibold mb-4 text-lg">Code Quality</h4>
                        <ul class="list-disc list-inside text-sm space-y-2">
                            <li>All unit tests passing</li>
                            <li>All integration tests passing</li>
                            <li>All golden tests passing</li>
                            <li>Code coverage > 80%</li>
                            <li>No security issues (run security hooks)</li>
                            <li>All code formatted (black, isort)</li>
                            <li>Type hints complete</li>
                        </ul>
                    </div>
                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700">
                        <h4 class="font-semibold mb-4 text-lg">Documentation</h4>
                        <ul class="list-disc list-inside text-sm space-y-2">
                            <li>README comprehensive</li>
                            <li>All commands documented</li>
                            <li>All hooks documented</li>
                            <li>All skills documented</li>
                            <li>Examples complete and working</li>
                            <li>API documentation generated</li>
                            <li>CHANGELOG updated</li>
                        </ul>
                    </div>
                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700">
                        <h4 class="font-semibold mb-4 text-lg">Plugin</h4>
                        <ul class="list-disc list-inside text-sm space-y-2">
                            <li>plugin.yaml complete</li>
                            <li>install.md accurate</li>
                            <li>requirements.txt up to date</li>
                            <li>Installation script working</li>
                            <li>Test in fresh project</li>
                        </ul>
                    </div>
                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700">
                        <h4 class="font-semibold mb-4 text-lg">Release Preparation</h4>
                        <ul class="list-disc list-inside text-sm space-y-2">
                            <li>Version number updated</li>
                            <li>pyproject.toml complete</li>
                            <li>LICENSE file present</li>
                            <li>.gitignore appropriate</li>
                        </ul>
                    </div>
                </div>

                <h3 class="text-xl font-semibold mt-6 mb-3">Running Final Tests</h3>
                <pre><code class="language-bash"># Full test suite
uv run pytest --cov=cli_generator --cov-report=html

# Security check
uv run python -c "from cli_generator.validators.security_validator import check_code_security; print('Security module OK')"

# Build check
uv run python -m build

# Install check (in fresh venv)
uv venv test_env
source test_env/bin/activate
uv pip install dist/*.whl
cli-gen --help</code></pre>

                <h3 class="text-xl font-semibold mt-8 mb-3">✅ Days 13-14 Checklist</h3>
                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                    <div class="checklist-item"><input type="checkbox" id="d13-1" @change="saveChecklist('d13-1', $event.target.checked)" :checked="checklist['d13-1']"><label for="d13-1">All unit tests passing</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d13-2" @change="saveChecklist('d13-2', $event.target.checked)" :checked="checklist['d13-2']"><label for="d13-2">All integration tests passing</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d13-3" @change="saveChecklist('d13-3', $event.target.checked)" :checked="checklist['d13-3']"><label for="d13-3">All golden tests passing</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d13-4" @change="saveChecklist('d13-4', $event.target.checked)" :checked="checklist['d13-4']"><label for="d13-4">Code coverage > 80%</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d13-5" @change="saveChecklist('d13-5', $event.target.checked)" :checked="checklist['d13-5']"><label for="d13-5">No security issues</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d13-6" @change="saveChecklist('d13-6', $event.target.checked)" :checked="checklist['d13-6']"><label for="d13-6">All code formatted</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d13-7" @change="saveChecklist('d13-7', $event.target.checked)" :checked="checklist['d13-7']"><label for="d13-7">Plugin tested in fresh project</label></div>
                    <div class="checklist-item"><input type="checkbox" id="d13-8" @change="saveChecklist('d13-8', $event.target.checked)" :checked="checklist['d13-8']"><label for="d13-8">Build and install verified</label></div>
                </div>
                <div class="flex justify-end mt-6"><button @click="toggleDay(13); toggleDay(14)" :class="completedDays.includes(13) ? 'bg-green-500' : 'bg-primary'" class="px-6 py-2 text-white rounded-lg hover:opacity-90"><span x-text="completedDays.includes(13) ? 'Completed!' : 'Mark as Complete'"></span></button></div>
            </section>

            <!-- Reference Materials Banner -->
            <div class="week-banner reference">
                <div class="week-banner-content">
                    <div class="week-banner-icon">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                        </svg>
                    </div>
                    <div class="week-banner-title">Reference Materials</div>
                    <div class="week-banner-subtitle">Troubleshooting, Quick Reference & Extension Ideas</div>
                    <div class="week-banner-days">Appendices A-C</div>
                </div>
            </div>

            <!-- Appendix A -->
            <section id="appendix-a" class="day-section reference" x-intersect:enter="currentSection = 'appendix-a'">
                <div class="flex items-center justify-between mb-4">
                    <span class="px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 text-sm font-medium rounded-full">Appendix A</span>
                    <button @click="toggleBookmark('appendix-a', 'Appendix A: Troubleshooting Guide')" :class="isBookmarked('appendix-a') ? 'text-primary' : 'text-gray-400'" class="p-1 hover:scale-110 transition-transform">
                        <svg class="w-6 h-6" :fill="isBookmarked('appendix-a') ? 'currentColor' : 'none'" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>
                    </button>
                </div>
                <h2 class="text-3xl font-bold mb-6">Appendix A: Troubleshooting Guide</h2>

                <h3 class="text-xl font-semibold mb-3">"Claude generates different code than expected"</h3>
                <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6">
                    <p class="mb-2"><strong>This is normal.</strong> LLM outputs vary. Verify that:</p>
                    <ul class="list-disc list-inside space-y-1">
                        <li>Tests pass</li>
                        <li>Functionality matches requirements</li>
                        <li>Code follows CLAUDE.md standards</li>
                    </ul>
                    <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">The exact code doesn't need to match the reference.</p>
                </div>

                <h3 class="text-xl font-semibold mt-6 mb-3">"Tests are failing"</h3>
                <p class="mb-2">Tell Claude specifically what's failing:</p>
                <pre><code class="language-text">The test test_choice_requires_choices_list is failing with:
AssertionError: ValidationError not raised

The OptionSpec model is accepting type="choice" without a choices list.
Fix the validator.</code></pre>

                <h3 class="text-xl font-semibold mt-6 mb-3">"Import errors when running CLI"</h3>
                <p class="mb-2">Check that:</p>
                <ol class="list-decimal list-inside space-y-1 mb-4">
                    <li>Package is installed: <code class="bg-gray-200 dark:bg-gray-700 px-2 py-0.5 rounded">uv pip install -e .</code></li>
                    <li><code>__init__.py</code> files exist in all directories</li>
                    <li>Imports use correct relative paths</li>
                </ol>
                <pre><code class="language-bash"># Verify structure
find src -name "*.py" -type f

# Reinstall
uv pip install -e . --force-reinstall</code></pre>

                <h3 class="text-xl font-semibold mt-6 mb-3">"LLM calls failing"</h3>
                <ol class="list-decimal list-inside space-y-2 mb-4">
                    <li>Check <code>OPENAI_API_KEY</code> is set:
                        <pre><code class="language-bash">echo $OPENAI_API_KEY</code></pre>
                    </li>
                    <li>Check API quota at https://platform.openai.com/usage</li>
                    <li>For testing, mock LLM responses:
                        <pre><code class="language-python">with patch.object(generator.agent, 'run', new_callable=AsyncMock) as mock:
    mock.return_value.data = expected_spec
    result = await generator.generate("test")</code></pre>
                    </li>
                </ol>

                <h3 class="text-xl font-semibold mt-6 mb-3">"Generated CLI has syntax errors"</h3>
                <ol class="list-decimal list-inside space-y-1 mb-4">
                    <li>Check the Jinja2 template for issues</li>
                    <li>Verify CLISpec has valid data</li>
                    <li>Run the template with test data:
                        <pre><code class="language-python">from cli_generator.generators.code_generator import CodeGenerator
gen = CodeGenerator()
# Test with minimal spec</code></pre>
                    </li>
                </ol>

                <h3 class="text-xl font-semibold mt-6 mb-3">"Hooks not running"</h3>
                <p class="mb-2">Hooks are called from generators. Verify:</p>
                <ol class="list-decimal list-inside space-y-1">
                    <li>Hooks are in <code>.claude/hooks/</code></li>
                    <li>Generator code calls validators</li>
                    <li>No exceptions silently caught</li>
                </ol>

                <h3 class="text-xl font-semibold mt-6 mb-3">"Skills not suggesting anything"</h3>
                <p class="mb-2">Skills activate on pattern matches. Check:</p>
                <ol class="list-decimal list-inside space-y-1">
                    <li>Skills are in <code>.claude/skills/</code></li>
                    <li>Description matches trigger patterns</li>
                    <li>Skills not disabled in session</li>
                </ol>

                <h3 class="text-xl font-semibold mt-6 mb-3">Debug Mode</h3>
                <p class="mb-2">Enable verbose logging:</p>
                <pre><code class="language-python">import logging
logging.basicConfig(level=logging.DEBUG)</code></pre>
            </section>

            <!-- Appendix Divider -->
            <div class="day-divider"><div class="day-divider-dot"></div></div>

            <!-- Appendix B -->
            <section id="appendix-b" class="day-section reference" x-intersect:enter="currentSection = 'appendix-b'">
                <div class="flex items-center justify-between mb-4">
                    <span class="px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 text-sm font-medium rounded-full">Appendix B</span>
                    <button @click="toggleBookmark('appendix-b', 'Appendix B: Quick Reference Cards')" :class="isBookmarked('appendix-b') ? 'text-primary' : 'text-gray-400'" class="p-1 hover:scale-110 transition-transform">
                        <svg class="w-6 h-6" :fill="isBookmarked('appendix-b') ? 'currentColor' : 'none'" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>
                    </button>
                </div>
                <h2 class="text-3xl font-bold mb-6">Appendix B: Quick Reference Cards</h2>

                <h3 class="text-xl font-semibold mb-3">Slash Commands</h3>
                <div class="overflow-x-auto mb-8">
                    <table class="w-full">
                        <thead><tr><th class="text-left py-2">Command</th><th class="text-left py-2">Purpose</th><th class="text-left py-2">Example</th></tr></thead>
                        <tbody>
                            <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>/design</code></td><td>Create CLI specification</td><td><code>/design "A file compressor"</code></td></tr>
                            <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>/generate</code></td><td>Generate code from spec</td><td><code>/generate --with-tests</code></td></tr>
                            <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>/refine</code></td><td>Modify current design</td><td><code>/refine "Add --verbose flag"</code></td></tr>
                            <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>/implement</code></td><td>Add command logic</td><td><code>/implement ./cli compress</code></td></tr>
                            <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>/test</code></td><td>Run tests with analysis</td><td><code>/test ./cli --coverage</code></td></tr>
                            <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>/new-cli</code></td><td>Complete workflow</td><td><code>/new-cli "A todo app"</code></td></tr>
                            <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>/save-spec</code></td><td>Save specification</td><td><code>/save-spec my-cli.json</code></td></tr>
                            <tr><td class="py-2"><code>/add-command</code></td><td>Add to existing CLI</td><td><code>/add-command ./cli "Add export"</code></td></tr>
                        </tbody>
                    </table>
                </div>

                <h3 class="text-xl font-semibold mt-6 mb-3">Hooks</h3>
                <div class="overflow-x-auto mb-8">
                    <table class="w-full">
                        <thead><tr><th class="text-left py-2">Hook</th><th class="text-left py-2">Trigger</th><th class="text-left py-2">Blocks On</th></tr></thead>
                        <tbody>
                            <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>validate_spec</code></td><td>Pre-generation</td><td>Invalid spec structure</td></tr>
                            <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>validate_code</code></td><td>Post-generation</td><td>Python syntax errors</td></tr>
                            <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>security_check</code></td><td>During generation</td><td>Dangerous patterns</td></tr>
                            <tr><td class="py-2"><code>coverage_check</code></td><td>Post-test</td><td>Low test coverage</td></tr>
                        </tbody>
                    </table>
                </div>

                <h3 class="text-xl font-semibold mt-6 mb-3">Skills</h3>
                <div class="overflow-x-auto mb-8">
                    <table class="w-full">
                        <thead><tr><th class="text-left py-2">Skill</th><th class="text-left py-2">Activates When</th><th class="text-left py-2">Suggests</th></tr></thead>
                        <tbody>
                            <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>pattern_suggester</code></td><td>Designing CLI</td><td>Common patterns for tool type</td></tr>
                            <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>naming_advisor</code></td><td>Defining options</td><td>Convention fixes</td></tr>
                            <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>example_generator</code></td><td>Command without examples</td><td>Realistic usage</td></tr>
                            <tr><td class="py-2"><code>dependency_detector</code></td><td>Analyzing description</td><td>Required packages</td></tr>
                        </tbody>
                    </table>
                </div>

                <h3 class="text-xl font-semibold mt-6 mb-3">Data Models</h3>
                <pre><code class="language-python">CLISpec(
    name: str,              # "my-tool"
    description: str,       # "What it does"
    commands: list[CommandSpec],
    global_options: list[OptionSpec],
    dependencies: list[str],
    version: str = "0.1.0"
)

CommandSpec(
    name: str,              # "process"
    description: str,       # "Process files"
    arguments: list[ArgumentSpec],
    options: list[OptionSpec],
    examples: list[str]
)

OptionSpec(
    name: str,              # "output"
    short: str | None,      # "o"
    type: str,              # "str"|"int"|"bool"|"path"|"choice"
    required: bool,
    default: Any,
    help: str,
    choices: list[str] | None  # For type="choice"
)</code></pre>

                <h3 class="text-xl font-semibold mt-6 mb-3">MCP Tools</h3>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead><tr><th class="text-left py-2">Tool</th><th class="text-left py-2">Purpose</th><th class="text-left py-2">Requires Auth</th></tr></thead>
                        <tbody>
                            <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>pypi_check_name</code></td><td>Check name availability</td><td>No</td></tr>
                            <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>github_create_repo</code></td><td>Create GitHub repo</td><td>GITHUB_TOKEN</td></tr>
                            <tr class="border-b border-gray-200 dark:border-gray-700"><td class="py-2"><code>validate_dependencies</code></td><td>Verify packages exist</td><td>No</td></tr>
                            <tr><td class="py-2"><code>format_code</code></td><td>Run Black + isort</td><td>No</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Appendix Divider -->
            <div class="day-divider"><div class="day-divider-dot"></div></div>

            <!-- Appendix C -->
            <section id="appendix-c" class="day-section reference" x-intersect:enter="currentSection = 'appendix-c'">
                <div class="flex items-center justify-between mb-4">
                    <span class="px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 text-sm font-medium rounded-full">Appendix C</span>
                    <button @click="toggleBookmark('appendix-c', 'Appendix C: Extension Ideas')" :class="isBookmarked('appendix-c') ? 'text-primary' : 'text-gray-400'" class="p-1 hover:scale-110 transition-transform">
                        <svg class="w-6 h-6" :fill="isBookmarked('appendix-c') ? 'currentColor' : 'none'" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>
                    </button>
                </div>
                <h2 class="text-3xl font-bold mb-6">Appendix C: Extension Ideas</h2>

                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700">
                        <h4 class="font-semibold mb-2">1. Multiple CLI Frameworks</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Add support for Typer and argparse:</p>
                        <pre class="text-xs"><code class="language-python">class CodeGenerator:
    def __init__(self, framework: str = "click"):
        self.framework = framework
        self.template = f"cli_{framework}.py.j2"</code></pre>
                    </div>
                    <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700">
                        <h4 class="font-semibold mb-2">2. Language Support</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-400">Generate CLIs in other languages:</p>
                        <ul class="text-sm list-disc list-inside mt-2">
                            <li>Go (using Cobra)</li>
                            <li>Rust (using Clap)</li>
                            <li>Node.js (using Commander)</li>
                        </ul>
                    </div>
                    <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700">
                        <h4 class="font-semibold mb-2">3. GUI Generation</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Generate TUI interfaces with Textual:</p>
                        <code class="text-xs">/design "A file browser with tree view" --tui</code>
                    </div>
                    <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700">
                        <h4 class="font-semibold mb-2">4. Documentation Generation</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-400">Auto-generate:</p>
                        <ul class="text-sm list-disc list-inside mt-2">
                            <li>Man pages</li>
                            <li>Sphinx documentation</li>
                            <li>API references</li>
                        </ul>
                    </div>
                    <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700">
                        <h4 class="font-semibold mb-2">5. CI/CD Templates</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Generate GitHub Actions workflows:</p>
                        <pre class="text-xs"><code class="language-yaml">name: Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: pip install -e ".[dev]"
      - run: pytest</code></pre>
                    </div>
                    <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700">
                        <h4 class="font-semibold mb-2">6. Docker Support</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Generate Dockerfiles:</p>
                        <pre class="text-xs"><code class="language-dockerfile">FROM python:3.11-slim
WORKDIR /app
COPY . .
RUN pip install -e .
ENTRYPOINT ["my-cli"]</code></pre>
                    </div>
                    <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700">
                        <h4 class="font-semibold mb-2">7. Plugin Marketplace</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-400">Create a central repository for:</p>
                        <ul class="text-sm list-disc list-inside mt-2">
                            <li>CLI templates</li>
                            <li>Custom hooks</li>
                            <li>Shared skills</li>
                            <li>Community patterns</li>
                        </ul>
                    </div>
                    <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700">
                        <h4 class="font-semibold mb-2">8. Interactive Mode</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Add REPL-style interaction:</p>
                        <pre class="text-xs"><code class="language-bash">$ cli-gen interactive
> describe: A todo manager
> add command: export to JSON
> implement: list
> generate</code></pre>
                    </div>
                    <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700">
                        <h4 class="font-semibold mb-2">9. Version Control Integration</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-400">Track spec changes:</p>
                        <ul class="text-sm list-disc list-inside mt-2">
                            <li>Git integration for spec files</li>
                            <li>Diff between versions</li>
                            <li>Rollback capability</li>
                        </ul>
                    </div>
                    <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700">
                        <h4 class="font-semibold mb-2">10. Analytics Dashboard</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-400">Track generated CLIs:</p>
                        <ul class="text-sm list-disc list-inside mt-2">
                            <li>Usage statistics</li>
                            <li>Common patterns</li>
                            <li>Error rates</li>
                            <li>Improvement suggestions</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Completion Section -->
            <section class="mb-16 text-center py-12 bg-gradient-to-r from-primary/10 to-secondary/10 rounded-2xl">
                <h2 class="text-3xl font-bold mb-4">Congratulations!</h2>
                <p class="text-lg text-gray-600 dark:text-gray-400 mb-6">You've completed the CLI Generator tutorial and mastered:</p>
                <div class="flex flex-wrap justify-center gap-2 mb-6">
                    <span class="px-3 py-1 bg-primary text-white rounded-full text-sm">CLAUDE.md</span>
                    <span class="px-3 py-1 bg-primary text-white rounded-full text-sm">Slash Commands</span>
                    <span class="px-3 py-1 bg-primary text-white rounded-full text-sm">Hooks</span>
                    <span class="px-3 py-1 bg-secondary text-white rounded-full text-sm">Skills</span>
                    <span class="px-3 py-1 bg-secondary text-white rounded-full text-sm">Subagents</span>
                    <span class="px-3 py-1 bg-secondary text-white rounded-full text-sm">MCP Tools</span>
                    <span class="px-3 py-1 bg-green-500 text-white rounded-full text-sm">Plugins</span>
                </div>
                <p class="text-xl font-semibold">Happy CLI generating!</p>
            </section>

            <!-- Footer -->
            <footer class="border-t border-gray-200 dark:border-gray-700 pt-8 mt-16 text-center text-gray-500">
                <p>CLI Generator Tutorial - Complete Claude Code Mastery</p>
                <p class="text-sm mt-2">Progress is automatically saved to your browser.</p>
            </footer>
        </div>
    </main>

    <!-- Notes Floating Button and Panel -->
    <button
        class="notes-fab"
        x-cloak
        @click="showNotesPanel = !showNotesPanel"
        title="View all notes"
        x-show="notesCount > 0 || showNotesPanel"
        x-transition
    >
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
        </svg>
        <span class="notes-fab-badge" x-show="notesCount > 0" x-text="notesCount"></span>
    </button>

    <!-- Notes Panel -->
    <div
        class="notes-panel"
        x-cloak
        x-show="showNotesPanel"
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0 transform translate-y-4"
        x-transition:enter-end="opacity-100 transform translate-y-0"
        x-transition:leave="transition ease-in duration-150"
        x-transition:leave-start="opacity-100 transform translate-y-0"
        x-transition:leave-end="opacity-0 transform translate-y-4"
        @click.away="showNotesPanel = false"
    >
        <div class="notes-panel-header">
            <span class="notes-panel-title">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                </svg>
                My Notes (<span x-text="notesCount"></span>)
            </span>
            <button class="notes-panel-close" @click="showNotesPanel = false">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
        <div class="notes-panel-body">
            <template x-if="notesCount === 0">
                <div class="notes-panel-empty">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-12 h-12 mx-auto mb-3 opacity-50" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                    </svg>
                    <p>No notes yet.</p>
                    <p class="text-sm mt-1">Click the pencil icon on any section header to add a note.</p>
                </div>
            </template>
            <template x-for="note in notesList" :key="note.id">
                <div class="note-card">
                    <div class="note-card-header">
                        <span
                            class="note-card-section"
                            @click="navigateToNote(note.id)"
                            x-text="note.displayTitle"
                        ></span>
                        <div class="flex gap-1">
                            <button
                                class="note-card-copy"
                                @click="copyNoteContent(note.content, $event)"
                                title="Copy note"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                </svg>
                            </button>
                            <button
                                class="note-card-delete"
                                @click="deleteNoteFromPanel(note.id)"
                                title="Delete note"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="note-card-content" x-text="note.content"></div>
                </div>
            </template>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@alpinejs/collapse@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@alpinejs/intersect@3.x.x/dist/cdn.min.js"></script>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base',
            securityLevel: 'loose',
            themeVariables: {
                primaryColor: '#6366f1',
                primaryTextColor: '#1e293b',
                primaryBorderColor: '#4f46e5',
                secondaryColor: '#f1f5f9',
                secondaryTextColor: '#475569',
                secondaryBorderColor: '#cbd5e1',
                tertiaryColor: '#fef3c7',
                tertiaryTextColor: '#92400e',
                tertiaryBorderColor: '#fbbf24',
                lineColor: '#64748b',
                textColor: '#334155',
                mainBkg: '#ffffff',
                nodeBorder: '#94a3b8',
                clusterBkg: '#f8fafc',
                clusterBorder: '#e2e8f0',
                titleColor: '#1e293b',
                edgeLabelBackground: '#ffffff',
                nodeTextColor: '#1e293b',
                fontFamily: 'Inter, system-ui, sans-serif',
                fontSize: '14px'
            },
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis',
                padding: 15,
                nodeSpacing: 50,
                rankSpacing: 50
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('pre').forEach(pre => {
                if (pre.querySelector('code')) {
                    const button = document.createElement('button');
                    button.className = 'copy-button';
                    button.textContent = 'Copy';
                    button.addEventListener('click', async () => {
                        const code = pre.querySelector('code').textContent;
                        await navigator.clipboard.writeText(code);
                        button.textContent = 'Copied!';
                        button.classList.add('copied');
                        setTimeout(() => { button.textContent = 'Copy'; button.classList.remove('copied'); }, 2000);
                    });
                    pre.appendChild(button);
                }
            });
            Prism.highlightAll();

            // Initialize Mermaid Walkthroughs after Mermaid renders
            const initWalkthroughs = () => {
                const diagrams = document.querySelectorAll('.mermaid-walkthrough');
                let allReady = true;
                diagrams.forEach(d => {
                    if (!d.querySelector('.mermaid svg')) {
                        allReady = false;
                    }
                });
                if (allReady && diagrams.length > 0) {
                    initMermaidWalkthroughs();
                } else {
                    setTimeout(initWalkthroughs, 200);
                }
            };
            setTimeout(initWalkthroughs, 500);
        });

        // Mermaid Walkthrough System
        const walkthroughConfigs = {
            'hook-lifecycle': {
                nodes: ['A', 'B', 'C', 'D', 'E', 'F', 'G'],
                edges: [
                    { from: 'A', to: 'B' },
                    { from: 'B', to: 'C', label: 'Pass' },
                    { from: 'B', to: 'D', label: 'Fail' },
                    { from: 'C', to: 'E' },
                    { from: 'E', to: 'F', label: 'Pass' },
                    { from: 'E', to: 'G', label: 'Warn' }
                ],
                steps: [
                    { nodes: ['A'], edges: [], description: 'User initiates an action (e.g., generate code, commit)' },
                    { nodes: ['A', 'B'], edges: [0], description: 'Action triggers the pre-hook for validation' },
                    { nodes: ['B', 'C'], edges: [1], description: '✓ Pre-hook passes → action proceeds' },
                    { nodes: ['B', 'D'], edges: [2], description: '✗ Pre-hook fails → action blocked with error message' },
                    { nodes: ['C', 'E'], edges: [3], description: 'After execution, post-hook runs for verification' },
                    { nodes: ['E', 'F'], edges: [4], description: '✓ Post-hook passes → success reported' },
                    { nodes: ['E', 'G'], edges: [5], description: '⚠ Post-hook warns → success with warnings shown' }
                ],
                connections: {
                    'A': { outgoing: ['B'], incoming: [] },
                    'B': { outgoing: ['C', 'D'], incoming: ['A'] },
                    'C': { outgoing: ['E'], incoming: ['B'] },
                    'D': { outgoing: [], incoming: ['B'] },
                    'E': { outgoing: ['F', 'G'], incoming: ['C'] },
                    'F': { outgoing: [], incoming: ['E'] },
                    'G': { outgoing: [], incoming: ['E'] }
                }
            },
            'command-workflow': {
                nodes: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K'],
                edges: [
                    { from: 'A', to: 'B' },      // 0
                    { from: 'B', to: 'C' },      // 1
                    { from: 'C', to: 'D' },      // 2: /refine
                    { from: 'C', to: 'E' },      // 3: /save-spec
                    { from: 'C', to: 'F' },      // 4: /generate
                    { from: 'D', to: 'B' },      // 5: back to spec
                    { from: 'F', to: 'G' },      // 6
                    { from: 'G', to: 'H' },      // 7: /add-command
                    { from: 'G', to: 'I' },      // 8: /implement
                    { from: 'G', to: 'J' },      // 9: /test
                    { from: 'H', to: 'F' },      // 10: back to generated
                    { from: 'I', to: 'F' },      // 11: back to generated
                    { from: 'J', to: 'K' }       // 12: results
                ],
                steps: [
                    { nodes: ['A'], edges: [], description: 'Start with /design and describe your CLI in natural language' },
                    { nodes: ['A', 'B'], edges: [0], description: 'Claude generates a CLISpec and stores it in session memory' },
                    { nodes: ['B', 'C'], edges: [1], description: 'You can now choose what to do with the spec' },
                    { nodes: ['C', 'D'], edges: [2], description: 'Path 1: Use /refine to iterate on the design' },
                    { nodes: ['D', 'B'], edges: [5], description: 'Refinements update the spec → ready for another choice' },
                    { nodes: ['C', 'E'], edges: [3], description: 'Path 2: Use /save-spec to persist to specs/tool.json' },
                    { nodes: ['C', 'F'], edges: [4], description: 'Path 3: Use /generate to create the CLI code' },
                    { nodes: ['F', 'G'], edges: [6], description: 'Generated code is ready → choose further actions' },
                    { nodes: ['G', 'H'], edges: [7], description: 'Use /add-command to extend with new commands' },
                    { nodes: ['G', 'I'], edges: [8], description: 'Use /implement to replace TODOs with real logic' },
                    { nodes: ['G', 'J', 'K'], edges: [9, 12], description: 'Use /test to run tests and see results' }
                ],
                connections: {
                    'A': { outgoing: ['B'], incoming: [] },
                    'B': { outgoing: ['C'], incoming: ['A', 'D'] },
                    'C': { outgoing: ['D', 'E', 'F'], incoming: ['B'] },
                    'D': { outgoing: ['B'], incoming: ['C'] },
                    'E': { outgoing: [], incoming: ['C'] },
                    'F': { outgoing: ['G'], incoming: ['C', 'H', 'I'] },
                    'G': { outgoing: ['H', 'I', 'J'], incoming: ['F'] },
                    'H': { outgoing: ['F'], incoming: ['G'] },
                    'I': { outgoing: ['F'], incoming: ['G'] },
                    'J': { outgoing: ['K'], incoming: ['G'] },
                    'K': { outgoing: [], incoming: ['J'] }
                }
            }
        };

        function initMermaidWalkthroughs() {
            document.querySelectorAll('.mermaid-walkthrough').forEach(container => {
                const walkthroughId = container.dataset.walkthrough;
                const config = walkthroughConfigs[walkthroughId];
                if (!config) return;

                const mermaidEl = container.querySelector('.mermaid');
                const svg = mermaidEl.querySelector('svg');
                if (!svg) return;

                const state = {
                    currentStep: 0,
                    playing: false,
                    playInterval: null,
                    focused: false
                };

                // Get DOM references
                const playBtn = container.querySelector('.walkthrough-play');
                const prevBtn = container.querySelector('.walkthrough-prev');
                const nextBtn = container.querySelector('.walkthrough-next');
                const resetBtn = container.querySelector('.walkthrough-reset');
                const currentStepEl = container.querySelector('.current-step');
                const totalStepsEl = container.querySelector('.total-steps');
                const descriptionEl = container.querySelector('.mermaid-step-description');

                if (!playBtn || !prevBtn || !nextBtn || !resetBtn) return;

                if (totalStepsEl) totalStepsEl.textContent = config.steps.length;

                // Build node and edge maps
                const nodeMap = {};
                const edgeMap = [];

                // Find nodes - Mermaid v10 uses .nodes > .node structure
                svg.querySelectorAll('.node, .nodes > g, g.node').forEach(node => {
                    const id = node.id || '';
                    const match = id.match(/(?:flowchart-)?([A-K])[-_]?\d*/i);
                    if (match) {
                        const nodeId = match[1].toUpperCase();
                        if (!nodeMap[nodeId]) nodeMap[nodeId] = node;
                    }
                });

                // Fallback: Look for nodes by structure if ID matching failed
                if (Object.keys(nodeMap).length === 0) {
                    svg.querySelectorAll('g').forEach(g => {
                        const id = g.id || '';
                        if (id.includes('flowchart') || g.getAttribute('class')?.includes('node')) {
                            const match = id.match(/([A-K])[-_]?\d*$/i);
                            if (match) {
                                nodeMap[match[1].toUpperCase()] = g;
                            }
                        }
                    });
                }

                // Also check for nodes with data-id attribute (don't overwrite existing)
                svg.querySelectorAll('[data-id]').forEach(node => {
                    const dataId = node.getAttribute('data-id');
                    if (dataId && /^[A-Z]$/i.test(dataId) && !nodeMap[dataId.toUpperCase()]) {
                        nodeMap[dataId.toUpperCase()] = node;
                    }
                });

                // Find all edge paths
                const allPaths = svg.querySelectorAll('path');
                allPaths.forEach((path) => {
                    const className = path.getAttribute('class') || '';
                    const isEdge = className.includes('flowchart-link') ||
                                  className.includes('edge-thickness') ||
                                  path.closest('.edgePaths') !== null;
                    const isMarker = path.closest('marker') !== null ||
                                    path.closest('defs') !== null;
                    if (isEdge && !isMarker) {
                        edgeMap.push(path);
                    }
                });

                function clearHighlights() {
                    svg.querySelectorAll('.node').forEach(n => n.classList.remove('highlighted'));
                    svg.querySelectorAll('.edgePath').forEach(e => e.classList.remove('highlighted'));
                    svg.querySelectorAll('path.highlighted').forEach(p => p.classList.remove('highlighted'));
                    // Also clear from edgeMap elements
                    edgeMap.forEach(edge => edge.classList.remove('highlighted'));
                }

                function showStep(stepIndex) {
                    if (stepIndex < 0 || stepIndex >= config.steps.length) return;

                    state.currentStep = stepIndex;
                    if (currentStepEl) currentStepEl.textContent = stepIndex + 1;

                    const step = config.steps[stepIndex];
                    if (descriptionEl) descriptionEl.textContent = step.description;

                    mermaidEl.classList.add('walkthrough-active');
                    mermaidEl.classList.remove('hover-mode');

                    clearHighlights();

                    // Highlight nodes
                    step.nodes.forEach(nodeId => {
                        if (nodeMap[nodeId]) nodeMap[nodeId].classList.add('highlighted');
                    });

                    // Highlight edges
                    step.edges.forEach(edgeIdx => {
                        if (edgeMap[edgeIdx]) edgeMap[edgeIdx].classList.add('highlighted');
                    });
                }

                function reset() {
                    stopPlaying();
                    state.currentStep = 0;
                    currentStepEl.textContent = '0';
                    descriptionEl.textContent = 'Click play or hover over nodes to explore';
                    mermaidEl.classList.remove('walkthrough-active');
                    mermaidEl.classList.add('hover-mode');
                    clearHighlights();
                }

                function nextStep() {
                    if (state.currentStep < config.steps.length - 1) {
                        showStep(state.currentStep + 1);
                    } else {
                        // Animation complete - pause briefly then reset to original state
                        stopPlaying();
                        setTimeout(() => {
                            reset();
                        }, 1500);
                    }
                }

                function prevStep() {
                    if (state.currentStep > 0) {
                        showStep(state.currentStep - 1);
                    }
                }

                function startPlaying() {
                    state.playing = true;
                    playBtn.classList.add('active');
                    playBtn.querySelector('.play-icon').classList.add('hidden');
                    playBtn.querySelector('.pause-icon').classList.remove('hidden');

                    if (state.currentStep === 0 || state.currentStep >= config.steps.length - 1) {
                        showStep(0);
                    }

                    state.playInterval = setInterval(() => {
                        // Always call nextStep - it handles the end-of-animation reset
                        nextStep();
                    }, 2000);
                }

                function stopPlaying() {
                    state.playing = false;
                    playBtn.classList.remove('active');
                    playBtn.querySelector('.play-icon').classList.remove('hidden');
                    playBtn.querySelector('.pause-icon').classList.add('hidden');

                    if (state.playInterval) {
                        clearInterval(state.playInterval);
                        state.playInterval = null;
                    }
                }

                function togglePlay() {
                    if (state.playing) {
                        stopPlaying();
                    } else {
                        startPlaying();
                    }
                }

                // Event listeners
                playBtn.addEventListener('click', togglePlay);
                prevBtn.addEventListener('click', () => { stopPlaying(); prevStep(); });
                nextBtn.addEventListener('click', () => { stopPlaying(); nextStep(); });
                resetBtn.addEventListener('click', reset);

                // Keyboard navigation when focused
                container.setAttribute('tabindex', '0');
                container.addEventListener('focus', () => { state.focused = true; });
                container.addEventListener('blur', () => { state.focused = false; });
                container.addEventListener('keydown', (e) => {
                    if (!state.focused) return;

                    switch (e.key) {
                        case ' ':
                        case 'Space':
                            e.preventDefault();
                            togglePlay();
                            break;
                        case 'ArrowLeft':
                            e.preventDefault();
                            stopPlaying();
                            prevStep();
                            break;
                        case 'ArrowRight':
                            e.preventDefault();
                            stopPlaying();
                            nextStep();
                            break;
                        case 'r':
                        case 'R':
                            e.preventDefault();
                            reset();
                            break;
                    }
                });

                // Hover exploration mode
                Object.entries(nodeMap).forEach(([nodeId, nodeEl]) => {
                    nodeEl.addEventListener('mouseenter', () => {
                        if (mermaidEl.classList.contains('walkthrough-active')) return;

                        mermaidEl.classList.add('hovering');

                        // Highlight connected nodes and edges
                        const connections = config.connections[nodeId];
                        if (!connections) return;

                        const connectedNodes = new Set([nodeId, ...connections.incoming, ...connections.outgoing]);
                        connectedNodes.forEach(id => {
                            if (nodeMap[id]) nodeMap[id].classList.add('hover-connected');
                        });

                        // Find and highlight connected edges
                        config.edges.forEach((edge, idx) => {
                            if (edge.from === nodeId || edge.to === nodeId) {
                                if (edgeMap[idx]) edgeMap[idx].classList.add('hover-connected');
                            }
                        });

                        // Show description - find first step that includes this node
                        const step = config.steps.find(s => s.nodes.includes(nodeId));
                        if (step) {
                            descriptionEl.textContent = step.description;
                        } else {
                            // Fallback: show node text
                            const nodeText = nodeEl.textContent?.trim() || nodeId;
                            descriptionEl.textContent = nodeText;
                        }
                    });

                    nodeEl.addEventListener('mouseleave', () => {
                        if (mermaidEl.classList.contains('walkthrough-active')) return;

                        mermaidEl.classList.remove('hovering');
                        svg.querySelectorAll('.hover-connected').forEach(el => {
                            el.classList.remove('hover-connected');
                        });
                        descriptionEl.textContent = 'Click play or hover over nodes to explore';
                    });
                });
            });
        }

        function tutorialApp() {
            return {
                sidebarOpen: false,
                showBookmarks: false,
                darkMode: false,
                currentSection: 'overview',
                week1Open: true,
                week2Open: false,
                week3Open: false,
                appendicesOpen: false,
                completedDays: [],
                checklist: {},
                bookmarks: [],
                notes: {},
                showNotesPanel: false,
                editingNoteId: null,
                dayTitles: { 1: 'Project Setup', 2: 'Core Models', 3: 'Slash Commands', 4: 'Command Chaining', 5: 'Claude Code Hooks', 6: 'Context-Aware Skills', 7: 'Subagent Coordination', 8: 'MCP External Tools', 9: 'Memory & Context', 10: 'Testing & Packaging', 11: 'Documentation', 12: 'Documentation', 13: 'Final Testing', 14: 'Release' },
                init() {
                    // Load saved data
                    this.completedDays = JSON.parse(localStorage.getItem('tutorial-completed-days') || '[]');
                    this.checklist = JSON.parse(localStorage.getItem('tutorial-checklist') || '{}');
                    this.bookmarks = JSON.parse(localStorage.getItem('tutorial-bookmarks') || '[]');
                    this.notes = JSON.parse(localStorage.getItem('tutorial-notes') || '{}');

                    // Dark mode: check localStorage first, then system preference
                    const savedDarkMode = localStorage.getItem('tutorial-dark-mode');
                    this.darkMode = savedDarkMode !== null
                        ? savedDarkMode === 'true'
                        : window.matchMedia('(prefers-color-scheme: dark)').matches;
                    if (this.darkMode) document.documentElement.classList.add('dark');

                    // Setup subsection bookmarks after DOM is ready
                    this.$nextTick(() => {
                        this.setupSubsectionBookmarks();
                        this.setupDayHeaderNotes();
                    });
                },
                setupDayHeaderNotes() {
                    // Add note buttons to day section h2 headers
                    const self = this;
                    document.querySelectorAll('.day-section > h2, #overview > h2, section[id^="appendix"] h2').forEach((h2) => {
                        if (h2.dataset.noteSetup) return; // Skip if already processed
                        h2.dataset.noteSetup = 'true';

                        const sectionId = h2.closest('section')?.id || h2.id || 'section-' + Math.random().toString(36).substr(2, 9);
                        const sectionTitle = h2.textContent.trim();

                        // Create note button for h2
                        const noteBtn = document.createElement('button');
                        noteBtn.className = 'note-button ml-2' + (self.notes[sectionId] ? ' has-note' : '');
                        noteBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>`;
                        noteBtn.title = self.notes[sectionId] ? 'Edit note' : 'Add note';
                        noteBtn.dataset.sectionId = sectionId;
                        noteBtn.dataset.sectionTitle = sectionTitle;
                        noteBtn.style.display = 'inline-flex';
                        noteBtn.style.verticalAlign = 'middle';

                        noteBtn.addEventListener('click', (e) => {
                            e.stopPropagation();
                            self.toggleNoteEditorInline(sectionId, sectionTitle, h2, noteBtn);
                        });

                        h2.style.display = 'inline-flex';
                        h2.style.alignItems = 'center';
                        h2.appendChild(noteBtn);
                    });
                },
                toggleNoteEditorInline(sectionId, sectionTitle, element, noteBtn) {
                    const self = this;
                    const parent = element.parentElement;
                    let existingEditor = parent.querySelector('.note-editor');

                    // If editor already open for this section, close it
                    if (existingEditor && existingEditor.dataset.sectionId === sectionId) {
                        existingEditor.remove();
                        this.editingNoteId = null;
                        return;
                    }

                    // Close any other open editors
                    document.querySelectorAll('.note-editor').forEach(ed => ed.remove());
                    this.editingNoteId = sectionId;

                    // Create editor
                    const editor = document.createElement('div');
                    editor.className = 'note-editor';
                    editor.dataset.sectionId = sectionId;
                    const existingNote = this.notes[sectionId]?.content || '';
                    editor.innerHTML = `
                        <textarea placeholder="Add your note here...">${existingNote}</textarea>
                        <div class="note-editor-buttons">
                            ${this.notes[sectionId] ? '<button class="note-btn note-btn-delete">Delete</button>' : ''}
                            <button class="note-btn note-btn-cancel">Cancel</button>
                            <button class="note-btn note-btn-save">Save</button>
                        </div>
                    `;

                    // Event handlers
                    const textarea = editor.querySelector('textarea');
                    const saveBtn = editor.querySelector('.note-btn-save');
                    const cancelBtn = editor.querySelector('.note-btn-cancel');
                    const deleteBtn = editor.querySelector('.note-btn-delete');

                    saveBtn.addEventListener('click', () => {
                        const content = textarea.value.trim();
                        if (content) {
                            self.saveNote(sectionId, sectionTitle, content);
                            noteBtn.classList.add('has-note');
                            noteBtn.title = 'Edit note';
                        } else {
                            self.deleteNote(sectionId);
                            noteBtn.classList.remove('has-note');
                            noteBtn.title = 'Add note';
                        }
                        editor.remove();
                        self.editingNoteId = null;
                    });

                    cancelBtn.addEventListener('click', () => {
                        editor.remove();
                        self.editingNoteId = null;
                    });

                    if (deleteBtn) {
                        deleteBtn.addEventListener('click', () => {
                            self.deleteNote(sectionId);
                            noteBtn.classList.remove('has-note');
                            noteBtn.title = 'Add note';
                            editor.remove();
                            self.editingNoteId = null;
                        });
                    }

                    // Insert editor after the element
                    element.insertAdjacentElement('afterend', editor);
                    textarea.focus();
                },
                setupSubsectionBookmarks() {
                    const self = this;
                    const usedIds = new Set();
                    // Expanded selector to include more sections
                    document.querySelectorAll('.day-section h3, #overview h3, section[id^="appendix"] h3, .day-section h4').forEach((h3, index) => {
                        // Skip if already processed or is a checklist header
                        if (h3.closest('.subsection-header') || h3.textContent.includes('Checklist')) return;

                        // Generate unique ID if not present or if current ID is already used
                        const section = h3.closest('section');
                        const parentSectionId = section ? section.id : 'section';
                        const slug = h3.textContent.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '');

                        if (!h3.id || usedIds.has(h3.id)) {
                            let baseId = `${parentSectionId}-${slug}`;
                            let uniqueId = baseId;
                            let counter = 2;
                            // Ensure uniqueness by appending counter if needed
                            while (usedIds.has(uniqueId) || document.getElementById(uniqueId)) {
                                uniqueId = `${baseId}-${counter}`;
                                counter++;
                            }
                            h3.id = uniqueId;
                        }
                        usedIds.add(h3.id);

                        // Create wrapper
                        const wrapper = document.createElement('div');
                        wrapper.className = 'subsection-header mb-3' + (h3.classList.contains('mt-8') ? ' mt-8' : '');
                        h3.classList.remove('mt-8', 'mb-3', 'mb-4');

                        // Create bookmark button
                        const btn = document.createElement('button');
                        btn.className = 'subsection-bookmark';
                        btn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z" /></svg>`;
                        btn.title = 'Bookmark this section';

                        const sectionId = h3.id;
                        const sectionTitle = h3.textContent.trim();

                        // Update button state
                        const updateBtn = () => {
                            const isBookmarked = self.bookmarks.some(b => b.id === sectionId);
                            btn.classList.toggle('bookmarked', isBookmarked);
                            btn.querySelector('svg').setAttribute('fill', isBookmarked ? 'currentColor' : 'none');
                        };
                        updateBtn();

                        btn.addEventListener('click', () => {
                            self.toggleBookmark(sectionId, sectionTitle);
                            updateBtn();
                        });

                        // Create note button
                        const noteBtn = document.createElement('button');
                        noteBtn.className = 'note-button' + (self.notes[sectionId] ? ' has-note' : '');
                        noteBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>`;
                        noteBtn.title = self.notes[sectionId] ? 'Edit note' : 'Add note';
                        noteBtn.dataset.sectionId = sectionId;
                        noteBtn.dataset.sectionTitle = sectionTitle;

                        noteBtn.addEventListener('click', () => {
                            self.toggleNoteEditor(sectionId, sectionTitle, wrapper, noteBtn);
                        });

                        // Wrap h3 and add buttons
                        h3.parentNode.insertBefore(wrapper, h3);
                        wrapper.appendChild(h3);
                        wrapper.appendChild(btn);
                        wrapper.appendChild(noteBtn);
                    });
                },
                get progressPercent() { return Math.round((this.completedDays.length / 14) * 100); },
                get week1Started() { return this.completedDays.some(d => d >= 1 && d <= 5); },
                get week1Complete() { return [1,2,3,4,5].every(d => this.completedDays.includes(d)); },
                get week2Started() { return this.completedDays.some(d => d >= 6 && d <= 10); },
                get week2Complete() { return [6,7,8,9,10].every(d => this.completedDays.includes(d)); },
                get week3Started() { return this.completedDays.some(d => d >= 11 && d <= 14); },
                get week3Complete() { return [11,12,13,14].every(d => this.completedDays.includes(d)); },
                toggleDarkMode() { this.darkMode = !this.darkMode; localStorage.setItem('tutorial-dark-mode', this.darkMode); },
                toggleDay(day) {
                    const index = this.completedDays.indexOf(day);
                    if (index > -1) {
                        this.completedDays.splice(index, 1);
                    } else {
                        this.completedDays.push(day);
                        this.celebrate(day);
                    }
                    localStorage.setItem('tutorial-completed-days', JSON.stringify(this.completedDays));
                },
                celebrate(day) {
                    const self = this;
                    const scrollPosition = window.scrollY;
                    const dayName = this.getDayDisplayName(day);
                    const completedCount = this.completedDays.length;
                    const progressPercent = Math.round((completedCount / 14) * 100);

                    // Create celebration overlay
                    const overlay = document.createElement('div');
                    overlay.className = 'celebration-overlay';
                    overlay.innerHTML = `
                        <div class="celebration-modal">
                            <div class="celebration-sparkles">
                                ${Array.from({length: 12}, (_, i) =>
                                    `<div class="celebration-sparkle" style="left: ${10 + Math.random() * 80}%; top: ${10 + Math.random() * 80}%; animation-delay: ${i * 0.15}s;"></div>`
                                ).join('')}
                            </div>
                            <div class="celebration-icon">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </div>
                            <div class="celebration-title">Congratulations!</div>
                            <div class="celebration-day">You completed ${dayName}</div>
                            <div class="celebration-progress">
                                <div class="celebration-progress-ring">
                                    <svg width="50" height="50">
                                        <defs>
                                            <linearGradient id="progress-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                                <stop offset="0%" stop-color="#6366f1"/>
                                                <stop offset="100%" stop-color="#10b981"/>
                                            </linearGradient>
                                        </defs>
                                        <circle class="bg" cx="25" cy="25" r="20"></circle>
                                        <circle class="progress" cx="25" cy="25" r="20"
                                            stroke-dasharray="${2 * Math.PI * 20}"
                                            stroke-dashoffset="${2 * Math.PI * 20 * (1 - progressPercent / 100)}">
                                        </circle>
                                    </svg>
                                </div>
                                <div class="celebration-progress-text">
                                    <div class="celebration-progress-count">${completedCount} of 14</div>
                                    <div class="celebration-progress-label">days complete</div>
                                </div>
                            </div>
                            <button class="celebration-btn" onclick="this.closest('.celebration-overlay').dataset.continue = 'true'">
                                Continue Learning
                            </button>
                        </div>
                    `;
                    document.body.appendChild(overlay);

                    // Add confetti
                    this.spawnConfetti();

                    // Handle continue
                    const handleContinue = () => {
                        overlay.style.animation = 'fade-in 0.3s ease-out reverse';
                        setTimeout(() => {
                            overlay.remove();
                            self.showCompletedInJourney(day, scrollPosition);
                        }, 300);
                    };

                    // Continue on button click or after 4 seconds
                    const checkContinue = setInterval(() => {
                        if (overlay.dataset.continue === 'true') {
                            clearInterval(checkContinue);
                            clearTimeout(autoTimeout);
                            handleContinue();
                        }
                    }, 100);

                    const autoTimeout = setTimeout(() => {
                        clearInterval(checkContinue);
                        handleContinue();
                    }, 4000);

                    // Also allow clicking overlay background to continue
                    overlay.addEventListener('click', (e) => {
                        if (e.target === overlay) {
                            overlay.dataset.continue = 'true';
                        }
                    });
                },
                spawnConfetti() {
                    const container = document.createElement('div');
                    container.className = 'confetti-container';
                    document.body.appendChild(container);
                    const colors = ['#6366f1', '#8b5cf6', '#10b981', '#f59e0b', '#ef4444', '#ec4899'];
                    for (let i = 0; i < 80; i++) {
                        const confetti = document.createElement('div');
                        confetti.className = 'confetti';
                        confetti.style.left = Math.random() * 100 + '%';
                        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                        confetti.style.animationDelay = Math.random() * 0.5 + 's';
                        confetti.style.transform = 'rotate(' + Math.random() * 360 + 'deg)';
                        if (Math.random() > 0.5) {
                            confetti.style.borderRadius = '50%';
                        }
                        container.appendChild(confetti);
                    }
                    setTimeout(() => container.remove(), 3500);
                },
                getDayDisplayName(day) {
                    if (day === 11 || day === 12) return 'Days 11-12: Documentation';
                    if (day === 13 || day === 14) return 'Days 13-14: Final Testing & Release';
                    return `Day ${day}: ${this.dayTitles[day] || ''}`;
                },
                showCompletedInJourney(day, originalScroll) {
                    // Find and highlight the completed day circle (no scrolling)
                    let dayCircle;
                    if (day === 11 || day === 12) {
                        dayCircle = document.querySelector('a[href="#day-11-12"] .day-circle');
                    } else if (day === 13 || day === 14) {
                        dayCircle = document.querySelector('a[href="#day-13-14"] .day-circle');
                    } else {
                        dayCircle = document.querySelector(`a[href="#day-${day}"] .day-circle`);
                    }

                    if (dayCircle) {
                        dayCircle.classList.add('just-completed');
                        setTimeout(() => dayCircle.classList.remove('just-completed'), 1000);
                    }
                },
                saveChecklist(id, checked) { this.checklist[id] = checked; localStorage.setItem('tutorial-checklist', JSON.stringify(this.checklist)); },
                toggleBookmark(id, title) {
                    const index = this.bookmarks.findIndex(b => b.id === id);
                    if (index > -1) { this.bookmarks.splice(index, 1); } else { this.bookmarks.push({ id, title }); }
                    localStorage.setItem('tutorial-bookmarks', JSON.stringify(this.bookmarks));
                },
                removeBookmark(id) { this.bookmarks = this.bookmarks.filter(b => b.id !== id); localStorage.setItem('tutorial-bookmarks', JSON.stringify(this.bookmarks)); },
                isBookmarked(id) { return this.bookmarks.some(b => b.id === id); },

                // Note methods
                toggleNoteEditor(sectionId, sectionTitle, wrapper, noteBtn) {
                    const self = this;
                    const existingEditor = wrapper.querySelector('.note-editor');

                    // If editor already open, close it
                    if (existingEditor) {
                        existingEditor.remove();
                        this.editingNoteId = null;
                        return;
                    }

                    // Close any other open editors
                    document.querySelectorAll('.note-editor').forEach(ed => ed.remove());
                    this.editingNoteId = sectionId;

                    // Create editor
                    const editor = document.createElement('div');
                    editor.className = 'note-editor';
                    const existingNote = this.notes[sectionId]?.content || '';
                    editor.innerHTML = `
                        <textarea placeholder="Add your note here...">${existingNote}</textarea>
                        <div class="note-editor-buttons">
                            ${this.notes[sectionId] ? '<button class="note-btn note-btn-delete">Delete</button>' : ''}
                            <button class="note-btn note-btn-cancel">Cancel</button>
                            <button class="note-btn note-btn-save">Save</button>
                        </div>
                    `;

                    // Event handlers
                    const textarea = editor.querySelector('textarea');
                    const saveBtn = editor.querySelector('.note-btn-save');
                    const cancelBtn = editor.querySelector('.note-btn-cancel');
                    const deleteBtn = editor.querySelector('.note-btn-delete');

                    saveBtn.addEventListener('click', () => {
                        const content = textarea.value.trim();
                        if (content) {
                            self.saveNote(sectionId, sectionTitle, content);
                            noteBtn.classList.add('has-note');
                            noteBtn.title = 'Edit note';
                        } else {
                            self.deleteNote(sectionId);
                            noteBtn.classList.remove('has-note');
                            noteBtn.title = 'Add note';
                        }
                        editor.remove();
                        self.editingNoteId = null;
                    });

                    cancelBtn.addEventListener('click', () => {
                        editor.remove();
                        self.editingNoteId = null;
                    });

                    if (deleteBtn) {
                        deleteBtn.addEventListener('click', () => {
                            self.deleteNote(sectionId);
                            noteBtn.classList.remove('has-note');
                            noteBtn.title = 'Add note';
                            editor.remove();
                            self.editingNoteId = null;
                        });
                    }

                    wrapper.appendChild(editor);
                    textarea.focus();
                },
                saveNote(sectionId, sectionTitle, content) {
                    this.notes[sectionId] = { title: sectionTitle, content: content, timestamp: Date.now() };
                    localStorage.setItem('tutorial-notes', JSON.stringify(this.notes));
                },
                deleteNote(sectionId) {
                    delete this.notes[sectionId];
                    localStorage.setItem('tutorial-notes', JSON.stringify(this.notes));
                },
                get notesCount() {
                    return Object.keys(this.notes).length;
                },
                get notesList() {
                    return Object.entries(this.notes).map(([id, note]) => {
                        // Extract parent section from ID for context (e.g., "day-1-verify-your-output" -> "Day 1")
                        let parentContext = '';
                        const dayMatch = id.match(/^day-(\d+)/);
                        if (dayMatch) {
                            parentContext = `Day ${dayMatch[1]}: `;
                        } else if (id.startsWith('overview')) {
                            parentContext = 'Overview: ';
                        } else if (id.startsWith('appendix')) {
                            parentContext = 'Appendix: ';
                        }
                        return {
                            id,
                            title: note.title,
                            displayTitle: parentContext + note.title,
                            content: note.content,
                            timestamp: note.timestamp
                        };
                    }).sort((a, b) => b.timestamp - a.timestamp);
                },
                navigateToNote(sectionId) {
                    this.showNotesPanel = false;
                    const element = document.getElementById(sectionId);
                    if (element) {
                        element.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        element.classList.add('section-highlight');
                        setTimeout(() => element.classList.remove('section-highlight'), 2000);
                    }
                },
                deleteNoteFromPanel(sectionId) {
                    this.deleteNote(sectionId);
                    // Update the note button in the DOM
                    const noteBtn = document.querySelector(`[data-section-id="${sectionId}"]`);
                    if (noteBtn) {
                        noteBtn.classList.remove('has-note');
                        noteBtn.title = 'Add note';
                    }
                },
                copyNoteContent(content, event) {
                    const btn = event.currentTarget;
                    navigator.clipboard.writeText(content).then(() => {
                        // Visual feedback
                        btn.classList.add('copied');
                        const originalTitle = btn.title;
                        btn.title = 'Copied!';
                        // Change icon to checkmark temporarily
                        const originalSvg = btn.innerHTML;
                        btn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>`;
                        setTimeout(() => {
                            btn.classList.remove('copied');
                            btn.title = originalTitle;
                            btn.innerHTML = originalSvg;
                        }, 1500);
                    });
                },

                resetProgress() {
                    if (confirm('Reset all progress? This will also delete all your notes.')) {
                        this.completedDays = []; this.checklist = {}; this.bookmarks = []; this.notes = {};
                        localStorage.removeItem('tutorial-completed-days');
                        localStorage.removeItem('tutorial-checklist');
                        localStorage.removeItem('tutorial-bookmarks');
                        localStorage.removeItem('tutorial-notes');
                    }
                }
            };
        }
    </script>
</body>
</html>
